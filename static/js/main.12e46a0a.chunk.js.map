{"version":3,"sources":["models/loading64.js","models/erl-logo64.js","models/delay.js","models/customEvents.js","components/RoutePage/RoutePage.js","components/SvgIcons/SvgIcons.js","database/db.js","models/tbl_stories.js","models/story-model.js","database/db-image-cache.js","models/tbl_dl_chaps.js","models/tbl_img_cache.js","components/CoverImage/CoverImage.js","components/ListItemOptions/ListItemOptions.js","components/StoryForm/StoryForm.js","components/Snackbar/Snackbar.js","models/load-images-sync-event.js","models/show-item-status.js","models/auto-delete-cache.js","models/fast-dl-status.js","models/dark-mode-status.js","components/Toggle/Toggle.js","components/Drawer/Drawer.js","pages/HomePage2/HomePage2.js","database/db-recents.js","models/tbl_recents.js","models/story-downloader.js","components/ChapterListItemOptions/ChapterListItemOptions.js","components/ConfirmModal/ConfirmModal.js","components/ChapterItem/ChapterItem.js","pages/StoryPage2/StoryPage2.js","components/LogoLoading/LogoLoading.js","components/ImageOneByOneArr/ImageOneByOneArr.js","pages/ChapterPage2/ChapterPage2.js","models/valid-sites.js","components/RecommendationTab/RecommendationTab.js","pages/AddPage/AddPage.js","pages/StoryInfoPage/StoryInfoPage.js","pages/AboutPage/AboutPage.js","pages/RecentPage/RecentPage.js","components/DownloadModal/DownloadModal.js","pages/SettingsPage/SettingsPage.js","App.js","serviceWorker.js","models/windowEvents.js","index.js"],"names":["module","exports","encodeURIComponent","ms","Promise","resolve","setTimeout","events","on","eventName","fn","this","push","off","i","length","splice","emit","data","forEach","RoutePage","componentDidMount","_isMounted","window","addEventListener","onPopState","customEvents","onPushState","componentWillUnmount","removeEventListener","pushTime","location","pathname","props","path","setState","show","contentRef","current","style","transform","screen","width","bgRef","opacity","clearTimeout","state","console","log","React","createRef","className","ref","children","Fragment","Component","svgIcons","xmlns","height","viewBox","d","fill","data-fillable","size","SVGIcon","Icon","name","database","db","init","callbackAction","devMode","request","indexedDB","open","onerror","alert","onsuccess","e","target","result","onupgradeneeded","_db","objectStoreNames","contains","createObjectStore","autoIncrement","createIndex","unique","sqlitePlugin","openDatabase","asyncQuery","sql","values","reject","transaction","tx","executeSql","results","rows","item","err","asyncExec","initTable","addStory","obj","objectStore","add","placeholder","Object","keys","map","key","join","placeholder2","sqlString","then","catch","getStories","search","limit","page","startCall","a","openCursor","event","cursor","regStr","trim","split","regex","RegExp","String","value","title","match","id","continue","sort","b","toLowerCase","localeCompare","toSend","offset","index","current_page_record_count","current_page","total_record_count","total_page_count","Math","ceil","cleanSearch","replace","tempArr","finalArr","concat","conditions","word","sqlString2","count","getStoriesByURL","url","startAction","get","deleteStory","delete","updateStory","erl_require","getStoryHTML","getChapterHTML","getImage","searchOnline","getStoryDetails","proceed","strHTML","status","doc","DOMParser","parseFromString","story","titleDOM","querySelector","childNodes","textContent","coverDOM","cover","getAttribute","storyInfoDOM","querySelectorAll","storyInfo","description","chapters","chapLabelDOM","dateDOM","date","getChapterImages","list","indexOf","tabIndex","pageNumber","orderBy","_sources","preURL","listCon","items","resultCount","itemJsonData","itm","imgURL","rating","chapterItems","last_two_chapters","j","chpItm","chapText","chapURL","postOn","isNew","badgesElems","badges","k","bItm","resultTotalCount","Number","getImageBlob","attempt","controller","pr","startReq","getAbortController","ctrl","imageBlob","fr","FileReader","onload","readAsDataURL","base_url","searchStoryOnline","keyword","db_img_cache","put","clearAllByStory","clear","action","req","deleteSingle","message","clearAll","deleteByChapter","chapterURL","imagesURLs","img","tbl_dl_chaps","mode","_objectStore","deleteByStory","storyURL","deleted","chap","deletedChapters","erl","imgcache","CoverImage","src","loading64","imgRef","abortController","loadData","tbl_img_cache","onCache","getImageSource","abort","alt","data-src","data-role","ListItemOptions","_onDelete","_onOpen","params","document","hide","cardClass","bgClass","setOnDelete","setOnOpen","onDelete","onOpen","ReactDOM","createPortal","onClick","URL","hostname","body","StoryForm","onTxtChange","preventDefault","submit","onSubmit","flex","onChange","color","Snackbar","positions","close","icons","colors","callback","closeTimer","visible","autoClose","autoCloseTime","closeAnimTimer","onCloseCallback","setOnCloseCallback","onForceClose","position","backgroundColor","localStorage","getItem","setItem","pubsub","setAttribute","Toggle","checked","disabled","defaultValue","onTap","activeColor","left","DButton","useState","active","setActive","onURLChange","to","useEffect","history","pushState","icon","label","Drawer","drawerCardRef","drawerBgRef","darkModeToggleRef","loadImageSyncToggle","showItemStatusToggle","autoDeleteToggle","fastDLToggle","threshold","allowMove","startPoint","endPoint","currentPosition","distance","startTime","endTime","isOpen","slideTimer","DARK_MODE_STATUS","LIS","SHOW_ITEM_STATUS","FAST_DL_STATUS","onLISChange","on_SHOW_ITEM_STATUS_Change","on_FAST_DL_STATUS_Change","on_DARK_MODE_STATUS_changed","onTouchStart","Date","getTime","touches","clientX","display","onTouchMove","requestAnimationFrame","_currentPosition","onTouchEnd","direction","timeElapse","isFling","slideToRight","slideToLeft","wait","time","fromButton","transition","onDarkModeChange","onChange_loadImageSync","onChange_showItemStatusToggle","onChange_autoDeleteToggle","AUTO_DELETE_CACHE","onChange_fastDLToggle","erl_logo64","oldState","StoryItem","setIsNew","LUpdate","setLUpdate","useRef","titleRef","showItemsStatus","Boolean","toDateString","onError","searchText","reString","innerHTML","storyData","cover_base64","onContextMenu","onMoreClick","HomePage2","logoTimer","DELAY","loadStories","logoAnimEnable","showLogo","logoBounce","onWindowResize","onUrlAdded","searchBoxX","showSearchBox","isLoading","tbl_stories","currentPage","onPrevPage","prev","onNextPage","next","searchTimer","onSearchChange","onItemOptionShow","lioRef","snackRef","info_json","JSON","stringify","res","code","onFormSubmit","onItemRequestError","msg","logoAnim","currentURL","formRef","seachInRef","drawerRef","focus","type","db_recents","dateAdded","getAll","reverse","overAllSize","_continue","set_continue","v","get_continue","delay","cacheStory","notify","notify2","onReceiveDetails","assign","currentChapter","cacheChapter","setOnProgress","total","imgUrl","setOnChapterProgress","imagesUrl","downloadImages","urlArray","counter","dataBase64","setOnAbort","ChapterListItemOptions","_onDownload","setShowDeleteButton","val","showDeleteBotton","setOnDownload","onDownload","ConfirmModal","buttons","iconName","text","ChapterItem","context","CMRef","isDownloaded","setIsDownloaded","isDownloading","setIsDownloading","percent","setPercent","chapterList","currentIndex","storyTitle","raw_cover","tbl_recents","onDlChapDone","_mode","exist","outerHTML","CLIORef","_per","floor","delAction","textAlign","getDayName","toLocaleString","StoryPage2","checkIfExistOnTheDatabase","info","parse","blob","loadStory","href","searchParams","showAddButton","fallback","getLimitChars","txt","substr","gotoInfoPage","coverWindowHeight","disableDlBtn","back","overflow","startDownload","chapTitle","indx","tot","stat","chapUrl","minHeight","innerHeight","LogoLoading","ImageOneByOneArr","loadingURL","isActive","loadImages","ChapterPage2","loadDataFromHistory","loadDataFromHref","pgCon","onScroll","currentPos","scrollTop","clientHeight","showNav","scrollHeight","onReachEdge","scrollTimer","scrollToTop","clearInterval","looper","targetPos","scrollToPosition","round","smoothScroll","onMouseDownImageCon","animID","cancelAnimationFrame","duration","targetPosition","startingPosition","animation","currentTime","t","run","pow","getCurrentChapterIndex","arrChaps","findIndex","story_url","images","chapterCurrentIndex","chapterPrevIndex","chapterNextIndex","_url","imageURLs","onChapterChange","targetURL","newHistoryState","replaceState","imgLoadAll","data-id","RecoOldState","categories","sources","CatItem","setActiveState","onChangeCateg","currentOrder","RecommendationTab","loadPage","onCatChange","getRecommendations","pageArr","createPageArray","itemPerPageCount","overallCount","totalCount","perPageCount","loopCount","arr","nextPage","prevPage","onSelPageChange","options","selectedIndex","gotoStoryPage","gotoChapterPage","paddingLeft","paddingRight","_item","SectionTitle","addPageOldState","AddPage","activeTab","tabCount","inURLRef","setActiveTab","0","1","2","zIndex","VALID_SITE","rel","searchOnlineOldState","SearchOnline","getResults","onSearchKeyDown","keyCode","onKeyDown","marginLeft","marginRight","success","s","StoryInfoPage","getHostName","polishText","str","infoKeys","infoKey","AboutPage","maxWidth","RecentPage","toLocaleTimeString","DownloadModal","dlContentRef","onReceivedStory","chapImageProgUpdate","onDoneDL","chaps","chaptitle","data-url","SettingsPage","darkModeRef","loadImageSyncRef","showItemStatusRef","autoDeleteImageCacheRef","fastDownloadRef","loadDefaultValues","SettingsItemWithToggle","SettingsItemWithButton","buttonClassName","fontSize","fontWeight","Spacer","forwardRef","App","sbRef","dlProgress","onOnline","onOffline","navigator","onLine","isLocalhost","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","onUpdate","onSuccess","error","initWindowListener","initTables","initWinListener","_startingURLPath","startApp","render","StrictMode","getElementById","cordova","remove","process","origin","fetch","headers","response","contentType","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.12e46a0a.chunk.js","sourcesContent":["module.exports = `data:image/svg+xml;utf8,${encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" style=\"margin: auto; background: rgba(241, 242, 243,0); display: block;\" width=\"200px\" height=\"200px\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\">\r\n<g transform=\"rotate(0 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.9166666666666666s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(30 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.8333333333333334s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(60 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.75s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(90 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.6666666666666666s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(120 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.5833333333333334s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(150 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.5s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(180 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.4166666666666667s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(210 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.3333333333333333s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(240 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.25s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(270 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.16666666666666666s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(300 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"-0.08333333333333333s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g><g transform=\"rotate(330 50 50)\">\r\n  <rect x=\"47\" y=\"24\" rx=\"3\" ry=\"6\" width=\"6\" height=\"12\" fill=\"#f3c669\">\r\n    <animate attributeName=\"opacity\" values=\"1;0\" keyTimes=\"0;1\" dur=\"1s\" begin=\"0s\" repeatCount=\"indefinite\"></animate>\r\n  </rect>\r\n</g>\r\n</svg>`)}`","module.exports = `data:image/svg+xml;utf8,${encodeURIComponent(\r\n    `<svg id=\"Layer_1\" data-name=\"Layer 1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 277.39 218.3\"><defs><style>.cls-1,.cls-2,.cls-4{stroke:#000;stroke-miterlimit:10;}.cls-1{stroke-width:5px;fill:url(#linear-gradient);}.cls-2{stroke-width:9px;}.cls-3{fill:#fff;}.cls-4{stroke-width:6px;}.cls-5{fill:#eaff30;}</style><linearGradient id=\"linear-gradient\" x1=\"138.55\" y1=\"89.48\" x2=\"146.55\" y2=\"188.3\" gradientUnits=\"userSpaceOnUse\"><stop offset=\"0\" stop-color=\"#ffa230\"/><stop offset=\"1\" stop-color=\"#4530ff\"/></linearGradient></defs><title>erl-manhwa-logo</title><polygon class=\"cls-1\" points=\"3.05 64.38 266.55 21.88 255.55 192.88 168.05 193.38 154.05 214.38 133.05 193.38 33.55 193.88 3.05 64.38\"/><polygon points=\"269.55 15.16 176.01 32.25 270.59 0 269.55 15.16\"/><polygon points=\"32.05 200.38 34.05 207.38 108.05 200.38 32.05 200.38\"/><path class=\"cls-2\" d=\"M65,148q26,1.41,40.67,1.69c1,.16,1.58,1.22,1.58,3.17q0,13.27-2,21.33a1.71,1.71,0,0,1-1.86,1.57q-21,.15-52.27-2.47a104.63,104.63,0,0,1-15.93-1.87c-1.13-.26-1.72-.82-1.76-1.7Q34.55,139.14,37,114l-5.41-.09A1.49,1.49,0,0,1,30,112.79a130.57,130.57,0,0,1-.51-23c.36-1.51,1.08-2.27,2.15-2.26q30.58-.17,72.43,4.41a2,2,0,0,1,2,1.78q1.1,8.25-.91,20.83c-.32,1.92-1.11,2.89-2.39,2.9q-17.57-1.41-35.31-2.31l-.36,5.69q15.42.89,25.35,1.77c1,.12,1.43.93,1.47,2.44q.08,10.44-1.65,16.78A1.49,1.49,0,0,1,90.69,143q-11.09-.57-25.1-1.1Q65.34,145,65,148Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-2\" d=\"M144.9,151.65q-.18,10.32-.83,21.84c-.08.95-1.19,1.48-3.33,1.6A131.66,131.66,0,0,1,117,172.66c-1.11-.16-1.72-.67-1.84-1.54q-1.3-29-1-53.9c-1.82.11-3.66.21-5.52.29a1.49,1.49,0,0,1-1.67-1.13A126.07,126.07,0,0,1,105,95.79a4.28,4.28,0,0,1,2-2.5q15.27-5.87,42.39-7,18-.9,38.17,5.58,7.65,3,9.85,13.71,3.15,28.56-1.84,37.64-3.09,4.74-9.85,6.47c-1.27.23-2.53.45-3.8.65Q191.08,160,196,164.76c.55.68.18,1.69-1.13,3a113.46,113.46,0,0,1-15.91,13.89q-1.36,1-2.25.12Q165.91,172.25,144.9,151.65ZM165,115.85q-7.59-.3-20.24.12.18,8.61.24,17.21,8.65,2.08,22.2,0a4.7,4.7,0,0,0,2.85-1.72,14.18,14.18,0,0,0,2.07-7.42,18.62,18.62,0,0,0-.47-5.46Q170.79,116.09,165,115.85Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-2\" d=\"M208.65,176.67a2.36,2.36,0,0,1-2.1-1.94Q200,129.2,198.71,95c0-.79.78-1.36,2.46-1.72A138.36,138.36,0,0,1,226,91c.84.08,1.29.43,1.35,1.06q4.1,28.35,6.49,56.33,24.28-3,40-4.62c1,0,1.66.94,2,2.85q2.26,13.08,1.82,20.76A2.48,2.48,0,0,1,276,169.9Q237,175.44,208.65,176.67Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-3\" d=\"M67.27,147.6q25.29,1.36,39.59,1.64c1,.16,1.55,1.19,1.54,3.08q0,12.94-2,20.78a1.68,1.68,0,0,1-1.81,1.53q-20.43.15-50.9-2.41a102.58,102.58,0,0,1-15.51-1.82c-1.1-.25-1.67-.8-1.72-1.66Q37.58,139,40,114.57l-5.27-.09a1.44,1.44,0,0,1-1.53-1.12A126.56,126.56,0,0,1,32.69,91c.35-1.48,1.05-2.22,2.09-2.21q29.78-.16,70.53,4.29a1.91,1.91,0,0,1,2,1.74q1.06,8-.89,20.28c-.31,1.87-1.09,2.81-2.32,2.82Q87,116.55,69.71,115.67c-.11,1.85-.23,3.69-.35,5.54q15,.86,24.69,1.72c.91.12,1.39.91,1.42,2.38q.07,10.16-1.6,16.34a1.44,1.44,0,0,1-1.61,1.14q-10.8-.56-24.44-1.06Q67.57,144.67,67.27,147.6Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-3\" d=\"M145.19,151q-.16,10.06-.81,21.28c-.07.92-1.15,1.44-3.23,1.56A129.16,129.16,0,0,1,118,171.48c-1.08-.16-1.68-.66-1.8-1.51q-1.26-28.26-.92-52.48c-1.77.11-3.57.21-5.38.29a1.45,1.45,0,0,1-1.62-1.1,123.42,123.42,0,0,1-2-20.06,4.16,4.16,0,0,1,2-2.43q14.85-5.72,41.27-6.82,17.57-.87,37.17,5.44,7.45,2.94,9.59,13.35,3.06,27.79-1.79,36.65c-2,3.08-5.2,5.18-9.6,6.3-1.23.23-2.46.44-3.7.63q9,9.36,13.7,14c.54.65.18,1.64-1.1,3a110.48,110.48,0,0,1-15.49,13.52q-1.32.93-2.19.12Q165.65,171.07,145.19,151Zm19.54-34.85q-7.39-.28-19.71.11.18,8.39.23,16.77,8.44,2,21.62,0a4.6,4.6,0,0,0,2.77-1.68,13.88,13.88,0,0,0,2-7.22,18,18,0,0,0-.47-5.32C170.66,117.2,168.51,116.31,164.73,116.16Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-3\" d=\"M207.37,175.58a2.29,2.29,0,0,1-2-1.9q-6.42-44.33-7.64-77.66c0-.77.76-1.33,2.39-1.68a134.06,134.06,0,0,1,24.18-2.2c.82.07,1.26.42,1.32,1q4,27.6,6.31,54.85,23.66-2.91,38.94-4.5c1,0,1.62.91,1.95,2.78Q275,159,274.55,166.51a2.43,2.43,0,0,1-1.62,2.48Q235,174.38,207.37,175.58Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-4\" d=\"M38.67,205.11q-1.06,8.74-2.35,16.6c-.11.42-.65.61-1.63.6a61.85,61.85,0,0,1-10.85-.93c-.51-.11-.77-.36-.77-.75A314.67,314.67,0,0,1,27.48,187c.07-.34.57-.69,1.5-1a41.5,41.5,0,0,1,11.21-1.37,1.15,1.15,0,0,1,.83.46q2.34,3.54,5.16,7.88,2.79-4.33,5.14-7.88a1,1,0,0,1,.72-.46A41.41,41.41,0,0,1,63.23,186c.92.34,1.42.69,1.49,1a311.76,311.76,0,0,1,4.42,33.6q0,.59-.75.75a62.3,62.3,0,0,1-10.87.93c-1,0-1.52-.18-1.6-.6q-1.29-7.8-2.35-16.45-2.9,3.31-6.69,7.6a.85.85,0,0,1-.7.38.87.87,0,0,1-.7-.38Q41.61,208.49,38.67,205.11Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-4\" d=\"M87.09,215c-.86,3-1.75,5.87-2.66,8.62-.14.4-.67.51-1.6.34a37.58,37.58,0,0,1-9.51-3.2c-.46-.18-.68-.46-.64-.86q4.26-20.08,8.73-34.32c.12-.31.47-.53,1-.67a91.23,91.23,0,0,1,21.26-.33c.86.12,1.37.45,1.55,1a334.84,334.84,0,0,1,8.44,34.09.79.79,0,0,1-.62.85,62.37,62.37,0,0,1-9.58,2.74c-.93.17-1.46.06-1.6-.33q-1.32-4.19-2.53-8.45Q93.54,214.79,87.09,215ZM91.27,199q-.8,3.47-1.7,6.92c2.73,0,5.23-.06,7.48-.07q-.87-3.42-1.67-6.87Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-4\" d=\"M130,208.44q-.18,8.3-.41,13.43c0,.58-.56.86-1.53.82a39.19,39.19,0,0,1-9.29-1.16,1.08,1.08,0,0,1-.83-1.08q-.89-15.06-1-32.41c0-.45.44-.95,1.34-1.5q3.64-2.46,11.23-2.3c.18,0,.36.17.55.44q4.31,5.9,9.91,14.28.18-8.62.42-13.92c0-.58.56-.86,1.52-.82a38.58,38.58,0,0,1,9.3,1.18,1,1,0,0,1,.82,1.06q.89,15.06,1,32.41a2.35,2.35,0,0,1-1.34,1.53q-4.23,2.44-10.95,2.35c-.27,0-.64-.34-1.11-.91Q135.41,216.68,130,208.44Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-4\" d=\"M178.3,202.22q-.17-7.75-.31-15.63a.73.73,0,0,1,.54-.8,65.74,65.74,0,0,1,11.31-1c.76.12,1.15.44,1.19,1q1.47,21.66.31,35.2a1,1,0,0,1-.8,1,38.16,38.16,0,0,1-10.33.26c-1-.09-1.46-.44-1.53-1.06q-.08-4.08-.15-8.21-3.61.28-7.44.51,0,4-.1,7.86c-.05.41-.57.65-1.55.72a63.92,63.92,0,0,1-10.9-.08c-.52-.07-.8-.3-.85-.7a330.83,330.83,0,0,1-.08-35.76c0-.36.41-.59,1.19-.67a65.73,65.73,0,0,1,11.39,0q.57.11.57.54.26,8.52.33,16.79Q175,202.16,178.3,202.22Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-4\" d=\"M217.7,194.08a.81.81,0,0,1,.7-.39.79.79,0,0,1,.7.39q3.79,4.29,6.69,7.59,1.05-8.67,2.35-16.45c.08-.41.62-.61,1.6-.59a62.3,62.3,0,0,1,10.87.93q.75.15.75.75a312.11,312.11,0,0,1-4.42,33.6c-.07.34-.56.68-1.49,1a41.41,41.41,0,0,1-11.19,1.37,1,1,0,0,1-.72-.47q-2.35-3.56-5.14-7.87c-1.87,2.87-3.6,5.5-5.16,7.87a1.16,1.16,0,0,1-.83.47,41.5,41.5,0,0,1-11.21-1.37c-.93-.35-1.43-.69-1.5-1a315,315,0,0,1-4.41-33.6c0-.4.26-.65.77-.75a61.85,61.85,0,0,1,10.85-.93c1,0,1.52.18,1.63.59q1.29,7.86,2.35,16.61Q213.83,198.44,217.7,194.08Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-4\" d=\"M255.72,215c-.86,3-1.75,5.87-2.66,8.62-.14.4-.67.51-1.6.34a37.58,37.58,0,0,1-9.51-3.2c-.46-.18-.68-.46-.64-.86q4.26-20.08,8.73-34.32c.12-.31.47-.53,1.05-.67a91.23,91.23,0,0,1,21.26-.33c.86.12,1.37.45,1.55,1a334.84,334.84,0,0,1,8.44,34.09.79.79,0,0,1-.62.85,62.37,62.37,0,0,1-9.58,2.74c-.93.17-1.46.06-1.6-.33q-1.32-4.19-2.53-8.45Q262.18,214.79,255.72,215ZM259.9,199q-.79,3.47-1.7,6.92c2.73,0,5.23-.06,7.48-.07q-.87-3.42-1.67-6.87Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-5\" d=\"M41.77,204.2q-1,8.53-2.3,16.19c-.1.4-.63.59-1.58.58a60,60,0,0,1-10.58-.91c-.5-.1-.75-.34-.75-.73a303.75,303.75,0,0,1,4.3-32.76c.07-.33.56-.67,1.46-1a40.62,40.62,0,0,1,10.93-1.33,1.1,1.1,0,0,1,.81.45q2.28,3.45,5,7.68,2.73-4.23,5-7.68a1,1,0,0,1,.71-.45,40.45,40.45,0,0,1,10.9,1.33c.91.34,1.39.68,1.46,1a306,306,0,0,1,4.31,32.76c0,.39-.25.63-.73.73a60.57,60.57,0,0,1-10.6.91c-1,0-1.48-.18-1.57-.58q-1.24-7.6-2.29-16-2.82,3.22-6.52,7.4a.82.82,0,0,1-.68.38.83.83,0,0,1-.68-.38Q44.63,207.51,41.77,204.2Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-5\" d=\"M89,213.79c-.84,2.92-1.71,5.73-2.6,8.41q-.19.59-1.56.33a36,36,0,0,1-9.26-3.12c-.46-.17-.67-.45-.63-.83q4.16-19.59,8.51-33.47c.12-.3.46-.52,1-.65a88.26,88.26,0,0,1,20.72-.33c.84.12,1.35.44,1.51,1a326.5,326.5,0,0,1,8.24,33.24.79.79,0,0,1-.61.83,61,61,0,0,1-9.34,2.67c-.9.17-1.43.06-1.56-.33q-1.29-4.08-2.47-8.23Q95.28,213.64,89,213.79Zm4.08-15.54q-.78,3.38-1.67,6.75l7.31-.07q-.86-3.33-1.64-6.7C95.77,198.25,94.43,198.25,93.06,198.25Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-5\" d=\"M130.8,207.45q-.18,8.07-.4,13.09c-.05.57-.55.84-1.49.81a38.7,38.7,0,0,1-9.06-1.14,1.07,1.07,0,0,1-.81-1.05q-.86-14.68-1-31.61c0-.43.43-.92,1.3-1.46q3.55-2.39,11-2.24c.17,0,.34.16.53.43q4.2,5.75,9.67,13.93.17-8.42.4-13.58c0-.57.54-.84,1.48-.8a36.89,36.89,0,0,1,9.07,1.16,1,1,0,0,1,.8,1q.87,14.67,1,31.6c-.08.54-.52,1-1.31,1.48q-4.12,2.4-10.67,2.3c-.27,0-.63-.33-1.09-.89Q136.1,215.49,130.8,207.45Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-5\" d=\"M177.91,201.38q-.15-7.56-.3-15.24a.72.72,0,0,1,.53-.78,64.38,64.38,0,0,1,11-1c.74.12,1.12.43,1.16.93q1.42,21.13.3,34.32a.93.93,0,0,1-.78,1,36.71,36.71,0,0,1-10.07.25c-.93-.08-1.42-.43-1.49-1q-.07-4-.15-8-3.52.28-7.25.51c0,2.56,0,5.12-.1,7.65,0,.4-.56.64-1.51.71a62.84,62.84,0,0,1-10.63-.08c-.5-.07-.78-.29-.83-.68a324.69,324.69,0,0,1-.08-34.87c0-.36.41-.57,1.16-.66a65.51,65.51,0,0,1,11.11,0c.37.07.55.25.55.53q.25,8.31.33,16.37Q174.75,201.32,177.91,201.38Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-5\" d=\"M216.34,193.45a.73.73,0,0,1,.68-.38.74.74,0,0,1,.68.38q3.7,4.17,6.52,7.4,1-8.46,2.29-16c.08-.4.61-.6,1.56-.58a60.48,60.48,0,0,1,10.6.91c.49.1.73.34.73.73a303.75,303.75,0,0,1-4.3,32.76c-.07.33-.56.67-1.46,1A40.54,40.54,0,0,1,222.73,221a.94.94,0,0,1-.7-.46q-2.29-3.47-5-7.68-2.75,4.21-5,7.68a1.08,1.08,0,0,1-.8.46,40.54,40.54,0,0,1-10.93-1.34c-.91-.33-1.4-.67-1.46-1a306,306,0,0,1-4.31-32.76c0-.39.25-.63.76-.73a60,60,0,0,1,10.57-.91c1,0,1.49.18,1.59.58q1.26,7.65,2.29,16.19Q212.56,197.7,216.34,193.45Z\" transform=\"translate(-7.95 -36.63)\"/><path class=\"cls-5\" d=\"M253.4,213.79c-.84,2.92-1.7,5.73-2.59,8.41q-.19.59-1.56.33a36.23,36.23,0,0,1-9.27-3.12c-.45-.17-.66-.45-.63-.83q4.16-19.59,8.51-33.47c.12-.3.47-.52,1-.65a88.26,88.26,0,0,1,20.72-.33c.84.12,1.34.44,1.51,1a326.72,326.72,0,0,1,8.23,33.24c0,.39-.16.66-.6.83a61.37,61.37,0,0,1-9.34,2.67q-1.37.26-1.56-.33-1.29-4.08-2.47-8.23Q259.71,213.64,253.4,213.79Zm4.08-15.54q-.78,3.38-1.66,6.75l7.3-.07q-.86-3.33-1.63-6.7C260.19,198.25,258.86,198.25,257.48,198.25Z\" transform=\"translate(-7.95 -36.63)\"/></svg>`\r\n)}`;","function DELAY(ms){\r\n    return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            resolve(null);\r\n        }, ms);\r\n    });\r\n}\r\n\r\nmodule.exports = DELAY;","var events = {\r\n    events: {},\r\n    on: function (eventName, fn) {\r\n        this.events[eventName] = this.events[eventName] || [];\r\n        this.events[eventName].push(fn);\r\n    },\r\n    off: function (eventName, fn) {\r\n        if (this.events[eventName]) {\r\n            for (var i = 0; i < this.events[eventName].length; i++) {\r\n                if (this.events[eventName][i] === fn) {\r\n                    this.events[eventName].splice(i, 1);\r\n                    break;\r\n                }\r\n            };\r\n        }\r\n    },\r\n    emit: function (eventName, data) {\r\n        if (this.events[eventName]) {\r\n            this.events[eventName].forEach(function (fn) {\r\n                fn(data);\r\n            });\r\n        }\r\n    }\r\n};\r\n\r\nexport default events;","import React, { Component } from 'react';\r\nimport customEvents from '../../models/customEvents';\r\nimport './RoutePage.css';\r\nclass RoutePage extends Component{\r\n\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            show: false\r\n        };\r\n\r\n        this.contentRef = React.createRef();\r\n        this.bgRef = React.createRef();\r\n\r\n        // this._isMounted = false;\r\n    }\r\n\r\n\r\n    componentDidMount = () => {\r\n        this._isMounted = true;\r\n        // window.addEventListener('load', this.onPushState);\r\n        window.addEventListener('popstate', this.onPopState);\r\n        customEvents.on('pushstate', this.onPushState);\r\n        this.onPushState();\r\n\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this._isMounted = false;\r\n        // window.removeEventListener('load', this.onPushState);\r\n        window.removeEventListener('popstate', this.onPopState);\r\n        customEvents.off('pushstate', this.onPushState);\r\n    }\r\n\r\n    pushTime = null;\r\n\r\n    onPushState = () => {\r\n        if(window.location.pathname === this.props.path){\r\n            this.setState({\r\n                show: true\r\n            }, () => {\r\n                this.contentRef.current.style.transform = `translateX(${window.screen.width}px)`;\r\n                // this.contentRef.current.style.opacity = 1;\r\n                this.bgRef.current.style.opacity = 0;\r\n                if(this.pushTime) clearTimeout(this.pushTime);\r\n                this.pushTime = setTimeout(() => {\r\n                    this.contentRef.current.style.transform = `translateX(0px)`;\r\n                    this.bgRef.current.style.opacity = 1;\r\n                    // this.contentRef.current.style.opacity = 1;\r\n                },10)\r\n            });\r\n        }else{\r\n            if(this.state.show){\r\n                this.contentRef.current.style.transform = `translateX(-${window.screen.width / 4}px)`;\r\n                // this.contentRef.current.style.opacity = 0;\r\n                this.bgRef.current.style.opacity = 0;\r\n                // if(this.pushTime) clearTimeout(this.pushTime);\r\n                // this.pushTime = setTimeout(() => {\r\n                //     this.setState({\r\n                //         show: false\r\n                //     },() => {\r\n                        \r\n                //     });\r\n                // }, 300);\r\n            }\r\n        }\r\n    }\r\n\r\n    // popTime = null;\r\n\r\n    onPopState = () => {\r\n        console.log(\"RoutPage: \", this.props.path, window.location.pathname);\r\n        if(window.location.pathname === this.props.path){\r\n            this.setState({\r\n                show: true\r\n            }, () => {\r\n                this.contentRef.current.style.transform = `translateX(-${window.screen.width / 4}px)`;\r\n                // this.contentRef.current.style.opacity = 0;\r\n                this.bgRef.current.style.opacity = 1;\r\n                if(this.pushTime) clearTimeout(this.pushTime);\r\n                this.pushTime = setTimeout(() => {\r\n                    this.contentRef.current.style.transform = `translateX(0px)`;\r\n                    // this.contentRef.current.style.opacity = 1;\r\n                    this.bgRef.current.style.opacity = 1;\r\n                },10)\r\n            });\r\n        }else{\r\n\r\n            if(this.state.show){\r\n                this.contentRef.current.style.transform = `translateX(${window.screen.width}px)`;\r\n                // this.contentRef.current.style.opacity = 1;\r\n                this.bgRef.current.style.opacity = 0;\r\n                if(this.pushTime) clearTimeout(this.pushTime);\r\n                this.pushTime = setTimeout(() => {\r\n                    this.setState({\r\n                        show: false\r\n                    },() => {\r\n                        \r\n                    });\r\n                }, 300);\r\n            }\r\n          \r\n            \r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            this.state.show ?\r\n            <div className=\"page\">\r\n                <div className=\"page-bg\" ref={this.bgRef}></div>\r\n                <div className=\"page-content\" ref={this.contentRef}>\r\n                    {\r\n                        this.props.children\r\n                    }\r\n                </div>\r\n            </div>\r\n            :\r\n            <React.Fragment></React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default RoutePage;","import React from 'react';\r\n\r\n\r\nconst svgIcons = {\r\n    \"menu\": (props) => {\r\n        return (\r\n            (   \r\n                <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                        height=\"24\" \r\n                        viewBox=\"0 0 24 24\" \r\n                        width=\"24\">\r\n                            <path   d=\"M0 0h24v24H0z\" \r\n                                    fill=\"none\"/>\r\n                            <path   d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\" \r\n                                    fill={props.fill}\r\n                                    data-fillable/>\r\n                </svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"search\": (props) => {\r\n        return (\r\n            (   \r\n                <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                        height=\"24\" \r\n                        viewBox=\"0 0 24 24\" \r\n                        width=\"24\">\r\n                            <path   d=\"M0 0h24v24H0z\" \r\n                                    fill=\"none\"/>\r\n                            <path   d=\"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\" \r\n                                    fill={props.fill}\r\n                                    data-fillable/>\r\n                </svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"arrow_back\": (props) => {\r\n        return (\r\n            (   \r\n                <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                        height=\"24\" \r\n                        viewBox=\"0 0 24 24\" \r\n                        width=\"24\">\r\n                            <path   d=\"M0 0h24v24H0z\" \r\n                                    fill=\"none\"/>\r\n                            <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\" \r\n                            fill={props.fill}\r\n                            data-fillable/>\r\n                </svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"arrow_forward\": (props) => {\r\n        return (\r\n            (   \r\n                <svg    xmlns=\"http://www.w3.org/2000/svg\"\r\n                        height=\"24\" \r\n                        viewBox=\"0 0 24 24\" \r\n                        width=\"24\">\r\n                            <path   d=\"M0 0h24v24H0z\" \r\n                                    fill=\"none\"/>\r\n                            <path   d=\"M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z\" \r\n                                    fill={props.fill}\r\n                                    data-fillable/>\r\n                </svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"arrow_up\": (props) => {\r\n        return (\r\n            (   \r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height=\"24\" \r\n                    viewBox=\"0 0 24 24\" \r\n                    width=\"24\">\r\n                        <path   d=\"M0 0h24v24H0V0z\" \r\n                                fill=\"none\"/>\r\n                        <path   d=\"M4 12l1.41 1.41L11 7.83V20h2V7.83l5.58 5.59L20 12l-8-8-8 8z\" \r\n                                fill={props.fill}\r\n                                data-fillable/>\r\n                </svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"arrow_down\": (props) => {\r\n        return (\r\n            (   \r\n                <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                        height=\"24\" \r\n                        viewBox=\"0 0 24 24\" \r\n                        width=\"24\">\r\n                            <path   d=\"M0 0h24v24H0V0z\" \r\n                                    fill=\"none\"/>\r\n                            <path   d=\"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z\" \r\n                            fill={props.fill}\r\n                            data-fillable/>\r\n                </svg>\r\n            )\r\n        );\r\n    },\r\n\r\n\r\n    \"close\": (props) => {\r\n        return (\r\n            (   \r\n                <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                        height=\"24\" \r\n                        viewBox=\"0 0 24 24\" \r\n                        width=\"24\">\r\n                            <path   d=\"M0 0h24v24H0z\" \r\n                                    fill=\"none\"/>\r\n                            <path   d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"\r\n                                    fill={props.fill}\r\n                                    data-fillable/>\r\n                </svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"import_export\": (props) => {\r\n        return (\r\n            (   \r\n                <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                        height=\"24\" \r\n                        viewBox=\"0 0 24 24\" \r\n                        width=\"24\">\r\n                            <path   d=\"M0 0h24v24H0z\" \r\n                                    fill=\"none\"/>\r\n                            <path   d=\"M9 3L5 6.99h3V14h2V6.99h3L9 3zm7 14.01V10h-2v7.01h-3L15 21l4-3.99h-3z\" \r\n                                    fill={props.fill}\r\n                                    data-fillable/>\r\n                </svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"home\": (props) => {\r\n        return (\r\n            (   \r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height={props.height || 24} viewBox=\"0 0 24 24\" width={props.width || 24}><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z\" fill={props.fill} data-fillable/></svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"cloud_download\": (props) => {\r\n        return (\r\n            (   \r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM17 13l-5 5-5-5h3V9h4v4h3z\" fill={props.fill} data-fillable/></svg>\r\n            )\r\n        );\r\n    },\r\n\r\n    \"send\": (props) => {\r\n        return (\r\n            (   \r\n                <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\" fill={props.fill} data-fillable/></svg>\r\n                \r\n            )\r\n        );\r\n    },\r\n\r\n    \"add\": (props) => {\r\n        return (\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height=\"24\" viewBox=\"0 0 24 24\" width=\"24\"><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z\" fill={props.fill} data-fillable/></svg>\r\n        );\r\n    },\r\n\r\n\r\n    \"more_vert\": (props) => {\r\n        return(\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" height={ props.size || 24} viewBox=\"0 0 24 24\" width={props.size || 24}><path d=\"M0 0h24v24H0z\" fill=\"none\"/><path d=\"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z\" fill={props.fill} data-fillable/></svg>\r\n        );\r\n    },\r\n\r\n    \"arrow_forward_ios\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}>\r\n                        <path   d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n                        <path   d=\"M5.88 4.12L13.76 12l-7.88 7.88L8 22l10-10L8 2z\" \r\n                                fill={props.fill} \r\n                                data-fillable/>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n    \"list\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}>\r\n                        <path   d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n                        <path   d=\"M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z\"\r\n                                fill={props.fill} \r\n                                data-fillable/>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n\r\n    \"arrow_right\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}\r\n                    style={props.style}>\r\n                        <path   d=\"M10 17l5-5-5-5v10z\"\r\n                                fill={props.fill} \r\n                                data-fillable/>\r\n                        <path   d=\"M0 24V0h24v24H0z\" \r\n                                fill=\"none\"/>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n\r\n    \"arrow_left\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}\r\n                    style={props.style}>\r\n                        <path   d=\"M14 7l-5 5 5 5V7z\"\r\n                                fill={props.fill} \r\n                                data-fillable/>\r\n                       <path    d=\"M24 0v24H0V0h24z\" \r\n                                fill=\"none\"/>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n\r\n    \"public\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\"\r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}>\r\n                <path   d=\"M0 0h24v24H0z\" \r\n                        fill=\"none\"/>\r\n                <path   d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z\"\r\n                        fill={props.fill} \r\n                        data-fillable/>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n\r\n    \"link\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}>\r\n                <path   d=\"M0 0h24v24H0z\" \r\n                        fill=\"none\"/>\r\n                <path   d=\"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z\"\r\n                        fill={props.fill} \r\n                        data-fillable/>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n\r\n    \"delete\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}>\r\n                <path   d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n                <path   d=\"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z\"\r\n                        fill={props.fill} \r\n                        data-fillable/>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n    \"verified\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}>\r\n                        <g>\r\n                            <rect fill=\"none\" \r\n                                    height={24} \r\n                                    width={24}/>\r\n                        </g>\r\n                        <g>\r\n                            <path   d=\"M23,12l-2.44-2.79l0.34-3.69l-3.61-0.82L15.4,1.5L12,2.96L8.6,1.5L6.71,4.69L3.1,5.5L3.44,9.2L1,12l2.44,2.79l-0.34,3.7 l3.61,0.82L8.6,22.5l3.4-1.47l3.4,1.46l1.89-3.19l3.61-0.82l-0.34-3.69L23,12z M10.09,16.72l-3.8-3.81l1.48-1.48l2.32,2.33 l5.85-5.87l1.48,1.48L10.09,16.72z\" \r\n                                    fill={props.fill} \r\n                                    data-fillable/>\r\n                        </g>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n    \"history\": (props) => {\r\n        return(\r\n            <svg    xmlns=\"http://www.w3.org/2000/svg\" \r\n                    height={ props.size || 24} \r\n                    viewBox=\"0 0 24 24\" \r\n                    width={props.size || 24}>\r\n                        <path d=\"M0 0h24v24H0z\" fill=\"none\"/>\r\n                        <path   d=\"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z\"\r\n                                fill={props.fill} \r\n                                data-fillable/>\r\n            </svg>\r\n        );\r\n    },\r\n\r\n\r\n    \r\n\r\n};\r\n\r\nconst SVGIcon = (props) => {\r\n    let Icon = svgIcons[props.name];\r\n    return (\r\n        <React.Fragment>\r\n            <Icon {...props}></Icon>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default SVGIcon;","let database = {\r\n    db: null,\r\n    init: function(callbackAction){\r\n        // if(true){\r\n        if(window.devMode){\r\n            // this.db = openDatabase('stories.db', '1.0', 'my first database', 1024 * 1024 * 1024);\r\n            // if(typeof callbackAction === 'function') callbackAction(); \r\n\r\n            let request = window.indexedDB.open(\"stories\");\r\n\r\n            request.onerror = () => {\r\n                alert(\"Error opening Database\");\r\n            }\r\n\r\n            request.onsuccess = (e) => {\r\n                this.db = e.target.result;\r\n                if(typeof callbackAction === 'function') callbackAction();\r\n            }\r\n\r\n            request.onupgradeneeded = (e) => {\r\n                let _db = e.target.result;\r\n\r\n                if (!_db.objectStoreNames.contains('tbl_stories')) { \r\n                    let objs = _db.createObjectStore('tbl_stories', {autoIncrement: true});\r\n                    objs.createIndex(\"url\", \"url\", { unique: true });\r\n                }\r\n            }\r\n\r\n        }else{\r\n            \r\n            this.db = window.sqlitePlugin.openDatabase({\r\n                name: 'stories.db',\r\n                location: 'default',\r\n            });\r\n\r\n            if(typeof callbackAction === 'function') callbackAction(); \r\n\r\n        }\r\n\r\n\r\n    },\r\n\r\n    asyncQuery: function(sql, values){\r\n        return new Promise((resolve, reject) => {\r\n            this.db.transaction(function (tx) {\r\n                tx.executeSql(\r\n                    sql,\r\n                    values,\r\n                    (tx, results) => {\r\n                        // if(window.devMode){\r\n                        //     resolve(results.rows);\r\n                        // }else{\r\n                        //     resolve(results.rows);\r\n                        // }\r\n\r\n                        let data = [];\r\n                        for(let i=0; i<results.rows.length; i++){\r\n                            let item = results.rows.item(i);\r\n                            data.push(item);\r\n                        }\r\n\r\n                        resolve(data);\r\n                        \r\n                    },\r\n    \r\n                    (tx, err) => {\r\n                        if(window.devMode){\r\n                            reject(err);\r\n                        }else{\r\n                            reject(tx);\r\n                        }\r\n                    }\r\n                );\r\n            });\r\n        });\r\n    },\r\n\r\n    asyncExec: function(sql, values){\r\n        return new Promise((resolve, reject) => {\r\n            this.db.transaction(function (tx) {\r\n                tx.executeSql(\r\n                    sql,\r\n                    values,\r\n                    (tx, results) => {\r\n                        if(window.devMode){\r\n                            resolve(results);\r\n                        }else{\r\n                            resolve(results);\r\n                        }\r\n                        \r\n                    },\r\n    \r\n                    (tx, err) => {\r\n                        if(window.devMode){\r\n                            reject(err);\r\n                        }else{\r\n                            reject(err);\r\n                        }\r\n                    }\r\n                );\r\n            });\r\n        });\r\n    }\r\n};\r\n\r\n\r\n\r\nexport default database;","import database from '../database/db';\r\n\r\n\r\n\r\nfunction initTable(){\r\n    if(window.devMode){\r\n        console.log(database.db);\r\n    }else{\r\n        database.db.transaction(function (tx) {\r\n            tx.executeSql('CREATE TABLE IF NOT EXISTS tbl_stories('+\r\n                'id INTEGER PRIMARY KEY AUTOINCREMENT,'+\r\n                'title TEXT,'+\r\n                'url TEXT UNIQUE,'+\r\n                'cover TEXT,'+\r\n                'description TEXT,'+\r\n                'info_json TEXT,'+\r\n                'date_added TEXT'+\r\n            ')');\r\n        });\r\n    }\r\n}\r\n\r\nfunction addStory(obj){\r\n    return new Promise((resolve, reject) => {\r\n        if(window.devMode){\r\n            let _objectStore =   database.db\r\n                        .transaction('tbl_stories', 'readwrite')\r\n                        .objectStore(\"tbl_stories\");\r\n            _objectStore.add(obj);\r\n            resolve(\"ok\");\r\n        }else{\r\n            let keys = Object.keys(obj);\r\n            let placeholder = keys.map((key) => {\r\n                return key;\r\n            }).join(\",\");\r\n    \r\n    \r\n            let values = Object.values(obj);\r\n            let placeholder2 = values.map(() => {\r\n                return \"?\"\r\n            }).join(\",\");\r\n    \r\n            let sqlString = `INSERT INTO tbl_stories (${placeholder}) VALUES (${placeholder2})`\r\n    \r\n            database.asyncExec(sqlString, values)\r\n            .then((result) => {\r\n                resolve(result);\r\n            })\r\n            .catch(err => {\r\n                reject(err);\r\n            });\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction getStories({search, limit, page}){\r\n    return new Promise(async (resolve, reject) => {\r\n        if(window.devMode){\r\n            let results = [];\r\n            \r\n\r\n            function startCall(){\r\n\r\n                if(database.db){\r\n                    let _objectStore =   database.db\r\n                        .transaction('tbl_stories', 'readwrite')\r\n                        .objectStore(\"tbl_stories\");\r\n                    _objectStore.openCursor().onsuccess = function(event) {\r\n                        var cursor = event.target.result;\r\n                        if (cursor) {\r\n                            // console.log(\"Name for SSN \" + cursor.key + \" is \" + cursor.value.name);\r\n                \r\n                            let regStr = (search.trim().split(/\\s+/)).map((item) => {\r\n                                return item;\r\n                            }).join(\"|\");\r\n                            let regex = new RegExp(`(${regStr})`, 'gi')\r\n                            if(String(cursor.value.title).match(regex)){\r\n                                results.push({\r\n                                    id: cursor.key,\r\n                                    ...cursor.value\r\n                                });\r\n                            }\r\n                           \r\n                            cursor.continue();\r\n                        }\r\n                        else {\r\n                            console.log(\"No more entries!\");\r\n\r\n                            //sort the results by title\r\n                            results.sort((a, b) => {\r\n                               return a.title.toLowerCase().localeCompare(b.title.toLowerCase());\r\n                            });\r\n\r\n                            let toSend = [];\r\n                            let size = results.length;\r\n                            let offset = limit * (page - 1);\r\n\r\n                            for(let i=0; i<limit; i++){\r\n                                let index = offset + i;\r\n                                if(index >= size){\r\n                                    break;\r\n                                }else{\r\n                                    toSend.push(results[index]);\r\n                                }\r\n                            }\r\n\r\n                            //return the final results\r\n                            resolve({\r\n                                results: toSend,\r\n                                current_page_record_count: toSend.length,\r\n                                current_page: page,\r\n                                total_record_count: results.length,\r\n                                total_page_count: Math.ceil(size / limit)\r\n                            });\r\n                        }\r\n                    };\r\n                }else{\r\n                    setTimeout(() => {\r\n                        startCall();\r\n                    }, 300);\r\n                }\r\n            }\r\n\r\n\r\n            startCall();\r\n\r\n            \r\n        }else{\r\n\r\n            try{\r\n                // let _search = `%${search}%`;\r\n                let cleanSearch = search.trim().replace(/\\s+/g, \" \");\r\n                let tempArr = String(cleanSearch).split(\" \");\r\n                let finalArr = [search];\r\n                finalArr = finalArr.concat(tempArr);\r\n                let conditions = finalArr.map((word) => {\r\n                    return ` title LIKE '%${word.replace(\"'\", \"''\")}%' `\r\n                }).join(\" OR \");\r\n                \r\n                let offset = limit * (page - 1);\r\n    \r\n                let sqlString = `SELECT * \r\n                                FROM tbl_stories \r\n                                WHERE ${conditions}\r\n                                ORDER BY title COLLATE NOCASE ASC\r\n                                LIMIT ? OFFSET ?`;\r\n    \r\n                let sqlString2 = `SELECT COUNT(id) as count\r\n                                FROM tbl_stories \r\n                                WHERE ${conditions}`;\r\n    \r\n    \r\n                let results = null\r\n                console.log(sqlString);\r\n                console.log(sqlString2);\r\n                await database.asyncQuery(sqlString, [limit, offset])\r\n                .then((data) => {\r\n                    // alert(JSON.stringify(data));\r\n                    results = data;\r\n                })\r\n                .catch((err) => {\r\n                    reject(err);\r\n                });\r\n    \r\n                let total_record_count = null;\r\n                await database.asyncQuery(sqlString2)\r\n                .then((data) => {\r\n                    // alert(JSON.stringify(data));\r\n                    total_record_count = data[0].count;\r\n                })\r\n                .catch((err) => {\r\n                    reject(err);\r\n                });\r\n    \r\n                resolve({\r\n                    results: results,\r\n                    current_page_record_count: results.length,\r\n                    current_page: page,\r\n                    total_record_count: total_record_count,\r\n                    total_page_count: Math.ceil(total_record_count / limit)\r\n                });\r\n            }catch(err){\r\n                reject(err);\r\n            }\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction getStoriesByURL(url){\r\n    return new Promise(async (resolve, reject) => {\r\n        try{\r\n\r\n            if(window.devMode){\r\n\r\n                function startAction(){\r\n                    if(database.db){\r\n                        let _objectStore =   database.db\r\n                                    .transaction('tbl_stories', 'readwrite')\r\n                                    .objectStore(\"tbl_stories\");\r\n\r\n                        let urlIndex = _objectStore.index(\"url\");\r\n                        \r\n                        urlIndex.get(url).onsuccess = (e) => {\r\n                            console.log(\"index res: \", e.target.result);\r\n                            if(e.target.result){\r\n                                resolve([e.target.result]);\r\n                            }else{\r\n                                resolve([]);\r\n                            }\r\n                            \r\n\r\n\r\n                        };\r\n                    }else{\r\n                        setTimeout(() => {\r\n                            startAction();\r\n                        }, 300);\r\n                    }\r\n                    \r\n                }\r\n\r\n                startAction();\r\n            }else{\r\n                let sqlString = `SELECT * \r\n                                FROM tbl_stories \r\n                                WHERE url = ?\r\n                                ORDER BY title COLLATE NOCASE ASC`;\r\n    \r\n                await database.asyncQuery(sqlString, [url])\r\n                .then((data) => {\r\n                    // alert(JSON.stringify(data));\r\n    \r\n                    resolve(data);\r\n                })\r\n                .catch((err) => {\r\n                    reject(err);\r\n                });\r\n            }\r\n\r\n\r\n\r\n            \r\n        }catch(err){\r\n            reject(err);\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction updateStory(id, obj){\r\n    return new Promise((resolve, reject) => {\r\n        let keys = Object.keys(obj);\r\n        let placeholder = keys.map((key) => {\r\n            return key + ' = ?';\r\n        }).join(\",\");\r\n\r\n\r\n        let values = Object.values(obj);\r\n\r\n        let sqlString = `UPDATE tbl_stories SET ${placeholder}\r\n                        WHERE id = ?`\r\n\r\n        database.asyncExec(sqlString, [...values, id])\r\n        .then((result) => {\r\n            resolve(result);\r\n        })\r\n        .catch(err => {\r\n            reject(err);\r\n        });\r\n    });\r\n}\r\n\r\n\r\nfunction deleteStory(id){\r\n    return new Promise(async (resolve, reject) => {\r\n        if(window.devMode){\r\n            let _objectStore =   database.db\r\n                        .transaction('tbl_stories', 'readwrite')\r\n                        .objectStore(\"tbl_stories\");\r\n\r\n            _objectStore.delete(id).onsuccess = (e) => {\r\n                resolve(e);\r\n            }\r\n        }else{\r\n            let sql = `DELETE FROM tbl_stories WHERE id = ?`;\r\n            database.asyncExec(sql, [id])\r\n            .then((data) => {\r\n                resolve(data);\r\n            })\r\n            .catch((err) => {\r\n                reject(err);\r\n            });\r\n        }\r\n      \r\n    });\r\n}\r\n\r\n\r\nexport default {\r\n    initTable,\r\n    addStory,\r\n    getStories,\r\n    getStoriesByURL,\r\n    deleteStory,\r\n    updateStory\r\n}","\r\nlet { getStoryHTML, getChapterHTML, getImage, searchOnline } = window.erl_require('req');\r\n\r\n\r\nasync function getStoryDetails(url){\r\n    try{\r\n        //CONVERT STRING HTML TO DOCUMENT OBJECT\r\n        let proceed = true;\r\n        let strHTML = await getStoryHTML(url)\r\n        .catch(() => {\r\n            proceed = false;\r\n            console.log(\"call catch\");\r\n            return Promise.reject(\"Failed\")\r\n        });\r\n        // console.log(strHTML);\r\n        // console.log(\"proceed: \", proceed, strHTML);\r\n        if(proceed === false){\r\n            return {status: 500};\r\n        }\r\n        let doc = new DOMParser().parseFromString(strHTML, 'text/html');\r\n\r\n        //DECLARE STORY OBJECT\r\n        let story = {};\r\n\r\n        //GET TITLE\r\n        let titleDOM =  doc.querySelector(\".post-title>h1\") ||\r\n                        doc.querySelector(\".post-title>h3\");\r\n        let title = titleDOM.childNodes[titleDOM.childNodes.length - 1].textContent.trim();\r\n\r\n\r\n        //GET COVER PHOTO\r\n        let coverDOM = doc.querySelector(\".summary_image img\");\r\n        let cover = coverDOM.getAttribute(\"data-src\") || \r\n                    coverDOM.getAttribute(\"data-cfsrc\") || \r\n                    coverDOM.getAttribute(\"src\");\r\n\r\n\r\n        //STORY INFO\r\n        let storyInfoDOM = [...doc.querySelectorAll(\".post-content .post-content_item\")];\r\n        let storyInfo = {};\r\n        \r\n        storyInfoDOM.forEach((item) => {\r\n            storyInfo[item.querySelector(\".summary-heading\").textContent.trim()] = \r\n                item.querySelector(\".summary-content\").textContent.trim();\r\n        });\r\n\r\n        let storyStatusDOM = [...doc.querySelectorAll(\".post-status .post-content_item\")];\r\n\r\n        storyStatusDOM.forEach((item) => {\r\n            storyInfo[item.querySelector(\".summary-heading\").textContent.trim()] = \r\n                item.querySelector(\".summary-content\").textContent.trim();\r\n        });\r\n\r\n        let description = [...doc.querySelectorAll(\".summary__content p\")]\r\n            .map((e) => e.textContent)\r\n            .join(\"\\n\\n\");\r\n\r\n\r\n        //GET CHAPTERS\r\n        let chapters = [];\r\n        [...doc.querySelectorAll(\".wp-manga-chapter\")]\r\n        .forEach((e) => {\r\n            let chapLabelDOM = e.querySelector(\"a\");\r\n            let dateDOM = e.querySelector(\".chapter-release-date\");\r\n            let date = (dateDOM.querySelector(\"i\") ? dateDOM.querySelector(\"i\").textContent.trim() : dateDOM.querySelector(\"a\").getAttribute(\"title\")) || \"No Date\";\r\n            let url = chapLabelDOM.getAttribute(\"href\") && chapLabelDOM.getAttribute(\"href\").trim();\r\n            let title = chapLabelDOM.textContent && chapLabelDOM.textContent.trim();\r\n            chapters.push({\r\n                \"url\": url,\r\n                \"title\": title,\r\n                \"date\": date\r\n            });\r\n        });\r\n\r\n        story[\"url\"]            = url;\r\n        story[\"title\"]          = title;\r\n        story[\"cover\"]          = cover;\r\n        story[\"storyInfo\"]      = storyInfo;\r\n        story[\"chapters\"]       = chapters;\r\n        story[\"description\"]    = description;\r\n\r\n        return Promise.resolve(story);\r\n    }catch(err){\r\n        return Promise.reject(err)\r\n    }\r\n}\r\n\r\n\r\nasync function getChapterImages(url){\r\n    //CONVERT STRING HTML TO DOCUMENT OBJECT\r\n    let strHTML = await getChapterHTML(url);\r\n    // console.log(strHTML);\r\n    let doc = new DOMParser().parseFromString(strHTML, 'text/html'); \r\n\r\n\r\n    //GET IMAGE SOURCE\r\n    let list = [];\r\n    [...doc.querySelectorAll(\".reading-content img\")].forEach((e) => {\r\n        var url = e.getAttribute('data-src') || e.getAttribute('data-cfsrc') || e.getAttribute('src');\r\n        url = url.trim();\r\n        if(list.indexOf(url) < 0){\r\n            list.push(url);\r\n        }\r\n    });\r\n\r\n    // console.log(\"images list: \", list);\r\n\r\n    return list;\r\n}\r\n\r\n\r\nasync function getRecommendations(tabIndex, pageNumber, orderBy){\r\n    console.log(\"tabIndex: \", tabIndex);\r\n    let _sources = [\r\n        {\r\n            url: \"https://www.webtoon.xyz/webtoons/\",\r\n\r\n        },\r\n        {\r\n            url: \"https://mangaclash.com/manga/\"\r\n        }\r\n    ];\r\n\r\n    console.log(\"tabIndex: \", tabIndex, _sources[tabIndex]);\r\n    if(typeof pageNumber !== 'number') return null;\r\n    let preURL = _sources[tabIndex].url;\r\n    if(pageNumber > 1){\r\n        preURL = preURL + `page/${pageNumber}/`;\r\n    }\r\n    if(orderBy){\r\n        preURL = preURL + \"?m_orderby=\" + orderBy;\r\n    }\r\n    let strHTML = await getStoryHTML(preURL);\r\n    // console.log(strHTML);\r\n    let doc = new DOMParser().parseFromString(strHTML, 'text/html'); \r\n    //page-content-listing\r\n    let listCon = doc.querySelector(\".page-content-listing\");\r\n    // console.log(listCon);\r\n    let items = [...listCon.querySelectorAll(\".page-item-detail\")];\r\n    // console.log(items);\r\n    let resultCount = doc.querySelector(\".c-blog__heading .h4\").textContent.trim().match(/\\d+/gi)[0];\r\n\r\n    let itemJsonData = [];\r\n    for(let i=0; i<items.length; i++){\r\n        try{\r\n            console.log(\"loop index: \", i);\r\n            let itm = items[i];\r\n            // console.log(\"itm: \", itm);\r\n            let url = itm.querySelector(\".item-thumb > a\").getAttribute(\"href\").trim();\r\n            // console.log(\"url\", url);\r\n            let title = itm.querySelector(\".item-summary > .post-title > .h5 > a\").textContent.trim();\r\n            // console.log(\"title: \", title);\r\n            // let imgURL = (function(){\r\n            //     let _el = itm.querySelector(\".item-thumb > a > img\").getAttribute('data-src');\r\n            //     if(_el){\r\n            //         return _el.trim()\r\n            //     }else{\r\n            //         return itm.querySelector(\"a > img\").getAttribute('src').trim();\r\n            //     }\r\n            // })();\r\n            // data-cfsrc\r\n            // console.log(itm.querySelector(\".item-thumb > a > img\").outerHTML);\r\n            let imgURL = itm.querySelector(\".item-thumb > a > img\").getAttribute('data-src') ? \r\n                            itm.querySelector(\".item-thumb > a > img\").getAttribute('data-src').trim() \r\n                            : \r\n                            (\r\n                                itm.querySelector(\".item-thumb > a > img\").getAttribute('data-cfsrc') ?\r\n                                itm.querySelector(\".item-thumb > a > img\").getAttribute('data-cfsrc').trim()\r\n                                :\r\n                                itm.querySelector(\".item-thumb > a > img\").getAttribute('src').trim()\r\n                            );\r\n                            \r\n\r\n            // console.log(\"imgURL: \", imgURL);\r\n\r\n            let rating = itm.querySelector(\".item-summary > .meta-item > .post-total-rating > .score\").textContent.trim();\r\n            let chapterItems = [...itm.querySelectorAll(\".list-chapter .chapter-item\")];\r\n            // console.log(\"chapterItems: \", chapterItems);\r\n\r\n            let last_two_chapters = [];\r\n            for(let j=0; j<chapterItems.length; j++){\r\n                let chpItm = chapterItems[j];\r\n                // console.log(\"chpItm: \", chpItm);\r\n                if(chpItm){\r\n                    let chapText = chpItm.querySelector(\".chapter > a\").textContent.trim();\r\n                    let chapURL = chpItm.querySelector(\".chapter > a\").getAttribute(\"href\");\r\n                    let postOn = chpItm.querySelector(\".post-on > .c-new-tag\") \r\n                                        ?   String(chpItm.querySelector(\".post-on > .c-new-tag > a\").getAttribute(\"title\")).trim()\r\n                                            : \r\n                                            chpItm.querySelector(\".post-on\").textContent.trim();\r\n                    let isNew = chpItm.querySelector(\".post-on > .c-new-tag\") ? true : false;\r\n\r\n                    last_two_chapters.push({\r\n                        chapText: chapText,\r\n                        chapURL: chapURL,\r\n                        postOn: postOn,\r\n                        isNew: isNew\r\n                    });\r\n                }else{\r\n                    console.log(\"cannot read index\");\r\n                }\r\n                \r\n            }\r\n\r\n            let badgesElems = [...itm.querySelectorAll(\".item-thumb .manga-title-badges\")];\r\n            let badges = [];\r\n\r\n            for(let k=0; k<badgesElems.length; k++){\r\n                let bItm = badgesElems[k];\r\n                badges.push(bItm.textContent.trim());\r\n            }\r\n\r\n\r\n            itemJsonData.push({\r\n                url: url,\r\n                title: title,\r\n                imgURL: imgURL,\r\n                rating: rating,\r\n                last_two_chapters: last_two_chapters,\r\n                badges: badges\r\n            })    \r\n        }catch(err){\r\n            console.log(err);\r\n        }\r\n        \r\n    }\r\n\r\n    console.log(itemJsonData);\r\n\r\n    return {\r\n        list: itemJsonData,\r\n        resultTotalCount: Number(resultCount)\r\n    };\r\n}\r\n\r\n// CONVERT BLOB TO OBJECTURL\r\n// async function getImageBlob(url){\r\n//     let imageBlob = await getImage(url);\r\n//     let blobURL = URL.createObjectURL(imageBlob);\r\n//     return blobURL;\r\n// }\r\n\r\n//CONVERT BLOB TO BASE 64 URL\r\nfunction getImageBlob(url){\r\n    let attempt = 0;\r\n    let controller = null;\r\n    let pr = new Promise(async (resolve, reject) => {\r\n        attempt++;\r\n        const startReq = async () => {\r\n            await getImage(url).getAbortController((ctrl) => {\r\n                controller = ctrl;\r\n            })\r\n            .then((imageBlob) => {\r\n                let fr = new FileReader();\r\n                fr.onload = () => {\r\n                    resolve(fr.result);\r\n                }\r\n                fr.readAsDataURL(imageBlob);\r\n            })\r\n            .catch((err) => {\r\n                reject(window.base_url + 'erl-manhwa-img-error.jpg');\r\n            }); \r\n            \r\n        }\r\n        try{\r\n            startReq();\r\n        }catch(err){\r\n            if(attempt > 5){\r\n                reject(err);\r\n            }else{\r\n                startReq();\r\n            }\r\n        }\r\n        \r\n    });\r\n    pr.getAbortController = function(fn){\r\n        if(typeof fn === 'function') fn(controller);\r\n        return pr;\r\n    }\r\n    return pr;\r\n}\r\n\r\nfunction createImageDom(url){\r\n    let img = new Image();\r\n    img.src = window.base_url + 'loading.svg';\r\n    // img.setAttribute(\"data-src\", url);\r\n    //get blob url\r\n    getImageBlob(url)\r\n    .then((srcBlob) => {\r\n        img.className = \"img-loaded\";\r\n        img.src = srcBlob;\r\n    })\r\n    .catch(() => {\r\n        console.log(\"calling image error\");\r\n        img.className = \"img-loaded\";\r\n        img.src = window.base_url + 'erl-manhwa-img-error.jpg';\r\n    });\r\n\r\n    return img;\r\n}\r\n\r\n\r\nfunction searchStoryOnline(keyword){\r\n\r\n    return new Promise(async (resolve, reject) => {\r\n        try{\r\n            searchOnline(keyword)\r\n            .then((data) => {\r\n                resolve(data);\r\n            })\r\n            .catch((err) => {\r\n                reject(err);\r\n            })\r\n        }catch(err){\r\n            reject(err);\r\n        }\r\n        \r\n    });\r\n    \r\n}\r\n\r\nexport {\r\n    getStoryDetails,\r\n    getChapterImages,\r\n    getImageBlob,\r\n    createImageDom,\r\n    searchStoryOnline,\r\n    getRecommendations\r\n}","let db_img_cache = {\r\n    db: null,\r\n    init: function(callbackAction){\r\n        let request = window.indexedDB.open(\"img_cache\", 2);\r\n\r\n            request.onerror = () => {\r\n                alert(\"Error opening Database\");\r\n            }\r\n\r\n            request.onsuccess = (e) => {\r\n                this.db = e.target.result;\r\n                window.db_img_cache = this.db;\r\n\r\n                if(typeof callbackAction === 'function') callbackAction();\r\n            }\r\n\r\n            request.onupgradeneeded = (e) => {\r\n                // alert(\"called upgrade: \", true);\r\n                let _db = e.target.result;\r\n\r\n                if (!_db.objectStoreNames.contains('tbl_img_cache')) { \r\n                    _db.createObjectStore('tbl_img_cache', { autoIncrement: false });\r\n                }\r\n\r\n                if (!_db.objectStoreNames.contains('tbl_dl_chaps')) { \r\n                    // alert(\"tbl_dl_chaps: \", false);\r\n                     _db.createObjectStore('tbl_dl_chaps', { autoIncrement: false });\r\n                }\r\n            }\r\n    }\r\n}\r\n\r\nexport default db_img_cache;","import db_img_cache from '../database/db-image-cache';\r\nfunction add(url, obj){\r\n    return new Promise((resolve, reject) => {\r\n        // console.log(\"to add to tbl_img_cache: \", obj);\r\n        let _objectStore =   db_img_cache.db\r\n                            .transaction('tbl_dl_chaps', 'readwrite')\r\n                            .objectStore(\"tbl_dl_chaps\");\r\n            _objectStore.put(obj, url);\r\n            resolve(\"ok\");\r\n    });\r\n}\r\n\r\n\r\nfunction clearAllByStory(){\r\n    //please change the code here\r\n    return new Promise((resolve, reject) => {\r\n        let _objectStore =   db_img_cache.db\r\n                            .transaction('tbl_dl_chaps', 'readwrite')\r\n                            .objectStore(\"tbl_dl_chaps\");\r\n        _objectStore.clear();\r\n        resolve(\"ok\");\r\n    });\r\n}\r\n\r\nfunction clearAll(){\r\n    return new Promise((resolve, reject) => {\r\n        let _objectStore =   db_img_cache.db\r\n                            .transaction('tbl_dl_chaps', 'readwrite')\r\n                            .objectStore(\"tbl_dl_chaps\");\r\n        _objectStore.clear();\r\n        resolve(\"ok\");\r\n    });\r\n}\r\n\r\nfunction deleteSingle(url){\r\n    return new Promise((resolve, reject) => {\r\n        let req =   db_img_cache.db\r\n                            .transaction('tbl_dl_chaps', 'readwrite')\r\n                            .objectStore(\"tbl_dl_chaps\")\r\n                            .delete(url);\r\n        req.onsuccess = (event) => {\r\n            resolve({\r\n                message: \"Deleted Successfully\",\r\n                event: event\r\n            });\r\n        }\r\n\r\n        req.onerror = function(event) {\r\n            reject(event);\r\n        };\r\n    });\r\n}\r\n\r\n\r\n\r\nfunction get(url){\r\n    return new Promise((resolve, reject) => {\r\n        const action = () => {\r\n            // console.log(\"starting to request cached images\");\r\n            if(db_img_cache.db){\r\n                try{\r\n                    let _objectStore =   db_img_cache.db\r\n                                        .transaction(['tbl_dl_chaps'])\r\n                                        .objectStore(\"tbl_dl_chaps\");\r\n                    let req = _objectStore.get(url);\r\n            \r\n                    req.onsuccess = function(event) {\r\n                        // console.log(event.target.result);\r\n                        resolve(event.target.result);\r\n                    }\r\n            \r\n                    req.onerror = function(event) {\r\n                        // Handle errors!\r\n                        reject(event);\r\n                    };\r\n                }catch(err){\r\n                   reject(err);\r\n                }\r\n            }else{\r\n                setTimeout(() => {\r\n                    action();\r\n                }, 1000);\r\n            }\r\n        }\r\n\r\n        action();\r\n    });\r\n}\r\n\r\n\r\n\r\nexport default {\r\n    add,\r\n    clearAllByStory,\r\n    get,\r\n    deleteSingle,\r\n    clearAll\r\n};","import db_img_cache from '../database/db-image-cache';\r\nimport tbl_dl_chaps from './tbl_dl_chaps';\r\nimport customEvents from './customEvents';\r\n\r\nfunction add(url, obj){\r\n    return new Promise((resolve, reject) => {\r\n        // console.log(\"to add to tbl_img_cache: \", obj);\r\n        let _objectStore =   db_img_cache.db\r\n                            .transaction('tbl_img_cache', 'readwrite')\r\n                            .objectStore(\"tbl_img_cache\");\r\n            _objectStore.put(obj, url);\r\n            resolve(\"ok\");\r\n    });\r\n}\r\n\r\n\r\nfunction clearAll(){\r\n    return new Promise(async (resolve, reject) => {\r\n        let _objectStore =   db_img_cache.db\r\n                            .transaction('tbl_img_cache', 'readwrite')\r\n                            .objectStore(\"tbl_img_cache\");\r\n        _objectStore.clear();\r\n\r\n        await tbl_dl_chaps.clearAll();\r\n        resolve(\"ok\");\r\n    });\r\n}\r\n\r\nfunction deleteSingle(url){\r\n    return new Promise((resolve, reject) => {\r\n        let req =   db_img_cache.db\r\n                            .transaction('tbl_img_cache', 'readwrite')\r\n                            .objectStore(\"tbl_img_cache\")\r\n                            .delete(url);\r\n        req.onsuccess = (event) => {\r\n            resolve({\r\n                message: \"Deleted Successfully\",\r\n                event: event\r\n            });\r\n        }\r\n\r\n        req.onerror = function(event) {\r\n            reject(event);\r\n        };\r\n    });\r\n}\r\n\r\nfunction deleteByChapter(chapterURL){\r\n    return new Promise(async (resolve, reject) => {\r\n        let imagesURLs = await get(chapterURL);\r\n        if(imagesURLs){\r\n            for(let i=0; i<imagesURLs.length; i++){\r\n                let img = imagesURLs[i];\r\n                await deleteSingle(img);\r\n            }\r\n            await deleteSingle(chapterURL);\r\n            await tbl_dl_chaps.deleteSingle(chapterURL);\r\n            customEvents.emit(\"dl.chap.done\", {url: chapterURL, mode: false});\r\n            resolve(imagesURLs);\r\n        }else{\r\n            customEvents.emit(\"dl.chap.done\", {url: chapterURL, mode: false});\r\n            await tbl_dl_chaps.deleteSingle(chapterURL);\r\n            resolve(null);\r\n        }\r\n    });\r\n    \r\n}\r\n\r\nfunction deleteByStory(storyURL){\r\n    console.log(\"storyURL: \", storyURL);\r\n    return new Promise(async (resolve, reject) => {\r\n        let story = await get(storyURL);\r\n        \r\n        if(story){\r\n            let deleted = []\r\n            let chapters = story.chapters;\r\n            for(let i=0; i<chapters.length; i++){\r\n                let chap = chapters[i].url;\r\n                deleted.push(await deleteByChapter(chap));\r\n            }\r\n\r\n            await deleteSingle(storyURL);\r\n            resolve({\r\n                deletedChapters: deleted,\r\n                story: story\r\n            });\r\n        }else{\r\n            resolve(null);\r\n        }\r\n    });\r\n}\r\n\r\n\r\nfunction get(url){\r\n    return new Promise((resolve, reject) => {\r\n        const action = () => {\r\n            // console.log(\"starting to request cached images\");\r\n            if(db_img_cache.db){\r\n                try{\r\n                    let _objectStore =   db_img_cache.db\r\n                                        .transaction(['tbl_img_cache'])\r\n                                        .objectStore(\"tbl_img_cache\");\r\n                    console.log(\"url: \", url);\r\n                    let req = _objectStore.get(url);\r\n            \r\n                    req.onsuccess = function(event) {\r\n                        // console.log(event.target.result);\r\n                        resolve(event.target.result);\r\n                    }\r\n            \r\n                    req.onerror = function(event) {\r\n                        // Handle errors!\r\n                        reject(event);\r\n                    };\r\n                }catch(err){\r\n                   reject(err);\r\n                }\r\n            }else{\r\n                setTimeout(() => {\r\n                    action();\r\n                }, 1000);\r\n            }\r\n        }\r\n\r\n        action();\r\n    });\r\n}\r\n\r\n\r\nexport default {\r\n    add,\r\n    clearAll,\r\n    get,\r\n    deleteByChapter,\r\n    deleteSingle,\r\n    deleteByStory\r\n};","import React, { Component } from 'react';\r\n// import loadingImage from '../../loading.svg';\r\nimport { getImageBlob } from '../../models/story-model';\r\nimport tbl_img_cache from '../../models/tbl_img_cache';\r\nimport loading64 from '../../models/loading64';\r\n\r\n\r\nlet imageCache = {};\r\nwindow.erl = {};\r\nwindow.erl.imgcache = imageCache;\r\n\r\nexport default class CoverImage extends Component{\r\n\r\n    state = {\r\n        src: loading64,\r\n        // src: window.base_url + \"loading.svg\",\r\n        // isLoading: true\r\n    }\r\n\r\n    imgRef = React.createRef();\r\n\r\n    _isMounted = false;\r\n    abortController = null;\r\n\r\n\r\n    componentDidMount = async () => {\r\n        this._isMounted = true;\r\n\r\n        // this.setState({\r\n        //     src: this.props.showLoading ? window.base_url + \"loading.svg\" : ''\r\n        // });\r\n        this.loadData();\r\n        \r\n    }\r\n\r\n\r\n    loadData = async () => {\r\n        if(this.props.src){\r\n            let img = await tbl_img_cache.get(this.props.src)\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                });\r\n            // console.log(\"img cache: \", img);\r\n            if(img){\r\n                this.setState({\r\n                    src: img\r\n                }, () => {\r\n                    console.log(\"cache found\");\r\n                });\r\n            }else{\r\n                console.log(\"cache not found\");\r\n                getImageBlob(this.props.src)\r\n                .getAbortController((ctrl) => {\r\n                    this.abortController = ctrl;\r\n                })\r\n                .then((data) => {\r\n                    if(this._isMounted){\r\n                        this.setState({\r\n                            src: data,\r\n                            // isLoading: false\r\n                        }, () => {\r\n                            if(typeof this.props.onCache === 'function') this.props.onCache(this.props.src, data);\r\n                            // tbl_img_cache.add(this.props.src, data);\r\n                        });\r\n                    }\r\n                })\r\n                .catch((data) => {\r\n                    if(!this._isMounted) return;\r\n                    console.log(\"catch on cover image\");\r\n                    this.setState({\r\n                        src: data,\r\n                        // isLoading: false\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    getImageSource = () => {\r\n        return this.imgRef.current.src;\r\n    }\r\n\r\n\r\n    componentWillUnmount = () => {\r\n        this._isMounted = false;\r\n        if(this.abortController) {\r\n            this.abortController.abort();\r\n            console.log(\"called abort\", this.abortController);\r\n        }\r\n    }\r\n\r\n    // componentDidUpdate = () => {\r\n    //     if(this._isMounted === true)\r\n    //         this.loadData();\r\n    // }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <img    src={this.state.src} \r\n                    alt={this.props.alt || \"cover\"}\r\n                    className={this.props.className}\r\n                    style={this.props.style}\r\n                    ref={this.imgRef}\r\n                    data-src={this.props.src}\r\n                    data-role=\"img-cover\"/>\r\n        );\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './ListItemOptions.css'\r\nimport SVGIcon from '../SvgIcons/SvgIcons';\r\nclass ListItemOptions extends Component{\r\n    _onDelete = null;\r\n    _onOpen = null;\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            show: false,\r\n            value: \"\",\r\n            title: \"\",\r\n            url: \"\",\r\n            cardClass: \"translateY(100%) translateZ(0px)\",\r\n            bgClass: 0\r\n        };\r\n    }\r\n\r\n\r\n    show = (params) => {\r\n        document.addEventListener('backbutton', this.hide, false);\r\n        this.setState({\r\n            show: true,\r\n            ...params\r\n        }, () => {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    cardClass: \"translateY(0%) translateZ(0px)\",\r\n                    bgClass: 1\r\n                });\r\n            }, 10);\r\n        });\r\n    }\r\n\r\n\r\n    hide = () => {\r\n        document.removeEventListener('backbutton', this.hide);\r\n\r\n        this.setState({\r\n            cardClass: \"translateY(100%) translateZ(0px)\",\r\n            bgClass: 0\r\n        }, () => {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    show: false,\r\n                    value: \"\",\r\n                    title: \"\"\r\n                });\r\n            }, 300)\r\n        })\r\n\r\n        \r\n    }\r\n\r\n    setOnDelete = (fn) => {\r\n        if(typeof fn === 'function')\r\n            this._onDelete = fn;\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    setOnOpen = (fn) => {\r\n        if(typeof fn === 'function')\r\n            this._onOpen = fn;\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    onDelete = () => {\r\n        if(typeof this._onDelete === 'function'){\r\n            this._onDelete();\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    onOpen = () => {\r\n        if(typeof this._onOpen === 'function'){\r\n            this._onOpen();\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    render(){\r\n        return ReactDOM.createPortal(\r\n            (\r\n                this.state.show ?\r\n                <div className=\"lio-con\">\r\n                    <div    className=\"lio-bg\" \r\n                            onClick={this.hide}\r\n                            style={{\r\n                                opacity: this.state.bgClass\r\n                            }}></div>\r\n                    <div    className=\"lio-card\" \r\n                            style={{\r\n                                transform: this.state.cardClass\r\n                            }}>\r\n                        <div className=\"lio-head\">\r\n                            <div className=\"lio-head-title\">\r\n                                <div>{this.state.title}</div>\r\n                                <div className=\"lio-h-from\">\r\n                                    {(new URL(this.state.url).hostname)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {/* <div className=\"lio-title\">\"{this.state.title}\"</div> */}\r\n                        <div className=\"lio-content lio-btns\">\r\n                            {/* <div className=\"lio-title\">\"{this.state.url}\"</div> */}\r\n                            <button onClick={this.onOpen}>\r\n                                <div className=\"lio-btn-ico\">\r\n                                    <SVGIcon name=\"public\" fill=\"#777\"/>\r\n                                </div>\r\n                                \r\n                                <div>Go to Source Page</div>\r\n                            </button>\r\n                            <button onClick={this.onDelete}>\r\n                                <div className=\"lio-btn-ico\">\r\n                                    <SVGIcon name=\"delete\" fill=\"#777\"/>\r\n                                </div>\r\n                                \r\n                                <div>Delete Story</div>\r\n                            </button>\r\n\r\n                            <button onClick={this.hide}>\r\n                                <div className=\"lio-btn-ico\">\r\n                                    <SVGIcon name=\"close\" fill=\"#777\"/>\r\n                                </div>\r\n                                \r\n                                <div>Close</div>\r\n                            </button>\r\n                         \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                :\r\n                <React.Fragment></React.Fragment>\r\n            ),\r\n                document.body\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default ListItemOptions;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './StoryForm.css'\r\nimport SVGIcon from '../SvgIcons/SvgIcons';\r\nclass StoryForm extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            show: false,\r\n            value: \"\",\r\n        };\r\n    }\r\n\r\n\r\n    show = () => {\r\n        document.addEventListener('backbutton', this.hide, false);\r\n        this.setState({\r\n            show: true\r\n        });\r\n    }\r\n\r\n\r\n    hide = () => {\r\n        document.removeEventListener('backbutton', this.hide);\r\n        this.setState({\r\n            show: false,\r\n            value: \"\"\r\n        });\r\n    }\r\n\r\n    onTxtChange = (e) => {\r\n        e.preventDefault();\r\n        this.setState({\r\n            value: e.target.value\r\n        });\r\n    }\r\n\r\n\r\n    submit = () => {\r\n        if(this.state.value.match(/^(http|https):\\/\\/[^/]+\\/[^/]+\\/[^/]+\\/?$/)){\r\n            if(typeof this.props.onSubmit === 'function') this.props.onSubmit(this.state.value);\r\n            this.hide();\r\n        }else{\r\n            alert(\"Invalid URL\");\r\n        }\r\n        \r\n    }\r\n\r\n\r\n\r\n    render(){\r\n        return ReactDOM.createPortal(\r\n            (\r\n                this.state.show ?\r\n                <div className=\"sf-con\">\r\n                    <div className=\"sf-card\">\r\n                        <div className=\"sf-head\">\r\n                            <div className=\"sf-head-title\">Add Story</div>\r\n                            <div style={{flex: 1}}></div>\r\n                            <button className=\"btn-close\" onClick={this.hide}>\r\n                                <SVGIcon name=\"close\" fill=\"#DDD\"/>\r\n                            </button>\r\n                        </div>\r\n                        <div className=\"sf-content\">\r\n\r\n                            <div className=\"sf-in-con\">\r\n                                <input placeholder=\"Story URL...\"\r\n                                        value={this.state.value}\r\n                                        onChange={this.onTxtChange}></input>\r\n                            </div>\r\n\r\n                            <div style={{color: '#AAA'}}>\r\n                                <h4>Valid Sites:</h4>\r\n                                <ul>\r\n                                    <li>toonily.com</li>\r\n                                    <li>manhwa.club</li>\r\n                                    <li>manhwahentai.me</li>\r\n                                    <li>manytoon.com</li>\r\n                                </ul>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"sf-foot\">\r\n                            <button className=\"btn-save\" onClick={this.submit}>\r\n                               ADD STORY\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                :\r\n                <React.Fragment></React.Fragment>\r\n            ),\r\n                document.body\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default StoryForm;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './Snackbar.css'\r\n\r\nexport default class Snackbar extends Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            show: false,\r\n            message: \"Now, clone this repo in your termux ,navigate into it and install the packages and start the server\",\r\n            mode: \"success\",\r\n            visible: false,\r\n            autoClose: true,\r\n            autoCloseTime: 3000\r\n        };\r\n\r\n        this.closeAnimTimer = null;\r\n        this.closeTimer = null;\r\n        this.onForceClose = null;\r\n    }\r\n\r\n    positions = {\r\n        \"top\": {\r\n            show: \"sbar-open-anim-top\",\r\n            close: \"sbar-close-anim-top\"\r\n        },\r\n        \"bottom\": {\r\n            show: \"sbar-open-anim\",\r\n            close: \"sbar-close-anim\"\r\n        }\r\n    }\r\n\r\n    icons = {\r\n        \"success\": <span>&#xe86c;</span>,\r\n        \"error\": <span>&#xe001;</span>,\r\n        \"warning\": <span>&#xe002;</span>,\r\n        \"info\": <span>&#xe88f;</span>\r\n    }\r\n\r\n    colors = {\r\n        \"success\": \"#4caf50\",\r\n        \"error\": \"#f44336\",\r\n        \"warning\": \"#ff9800\",\r\n        \"info\": \"#2196f3\"\r\n    }\r\n\r\n    show = (params, callback) => {\r\n        return new Promise((resolve, reject) => {\r\n                // if(this.closeAnimTimer) clearTimeout(this.closeAnimTimer);\r\n            if(this.closeTimer) clearTimeout(this.closeTimer);\r\n\r\n            let action = () => {\r\n                this.setState({\r\n                    show: true,\r\n                    visible: true,\r\n                    mode: params.mode || \"info\",\r\n                    message: params.message || \"No Message\",\r\n                    autoClose: params.autoClose || true,\r\n                    autoCloseTime: params.autoCloseTime || 3000\r\n                }, () => {\r\n\r\n                    if(typeof callback === 'function') callback();\r\n\r\n                    if(this.state.autoClose === true){\r\n                        this.closeTimer = setTimeout(() => {\r\n                            this.close().then(() => {\r\n                                resolve(this);\r\n                            });\r\n                        }, this.state.autoCloseTime);\r\n                    }\r\n                });\r\n            };\r\n\r\n            if(this.state.show === false){\r\n                action();\r\n            }else{\r\n                this.close(() => {\r\n                    action();\r\n                })\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    close = (callback) => {\r\n        return new Promise((resolve, reject) => {\r\n            if(this.closeAnimTimer) clearTimeout(this.closeAnimTimer);\r\n            if(this.closeTimer) clearTimeout(this.closeTimer);\r\n            this.setState({\r\n                visible: false,\r\n            }, () => {\r\n                this.closeAnimTimer = setTimeout(() => {\r\n                    this.setState({\r\n                        show: false,\r\n                        mode: \"\",\r\n                        message: \"\",\r\n                        autoClose: true,\r\n                        autoCloseTime: 3000\r\n                    });\r\n                    if(typeof callback === 'function') callback();\r\n                    // if(typeof this.onCloseCallback === 'function') {\r\n                    //     console.log(\"executing this.onCloseCallback()\");\r\n                    //     this.onCloseCallback();\r\n                    // }\r\n                    resolve(this);\r\n                    this.onCloseCallback = null;\r\n                }, 300);\r\n                \r\n            });\r\n        });\r\n    }\r\n\r\n    setOnCloseCallback = () => {\r\n        return new Promise((resolve, reject) => {\r\n            this.close()\r\n            .then(() => {\r\n                resolve(this);\r\n            });\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return ReactDOM.createPortal( \r\n            (\r\n                this.state.show ? \r\n                <div    className={\"snackbar-con\" + (\r\n                                                        this.state.visible ? \r\n                                                        ` ${this.positions[this.props.position || \"bottom\"].show}` \r\n                                                        : \r\n                                                        ` ${this.positions[this.props.position || \"bottom\"].close}`\r\n                                                    )\r\n                        } \r\n                        style={\r\n                            {\r\n                                backgroundColor: this.colors[this.state.mode || \"success\"],\r\n                                [this.props.position || \"bottom\"]: 16\r\n                            }\r\n                        }>\r\n                    <div className=\"m-icon sbar-btn-ico\">{this.icons[this.state.mode || \"info\"]}</div>\r\n                    <div className=\"sbar-message\">{this.state.message}</div>\r\n                    <button className=\"m-icon sbar-btn-x\" onClick={() => {\r\n                        this.close()\r\n                        .then(() => {\r\n                            if(typeof this.onForceClose === 'function') this.onForceClose();\r\n                            this.onForceClose = null;\r\n                        });\r\n                    }}>&#xe5cd;</button>\r\n                </div>\r\n                :\r\n                null\r\n            )\r\n            ,\r\n            document.body\r\n        );\r\n    }\r\n}","import pubsub from './customEvents';\r\n\r\nexport default {\r\n    getState: function(){\r\n        let state = window.localStorage.getItem(\"loadImageSync\");\r\n        if(state){\r\n            return Number(state);\r\n        }else{\r\n            window.localStorage.setItem(\"loadImageSync\", \"0\");\r\n            return 0;\r\n        }\r\n    },\r\n\r\n    setState: function(value){\r\n        window.localStorage.setItem(\"loadImageSync\", String(value));\r\n        pubsub.emit(\"loadImageSyncChange\", Number(value));\r\n    }\r\n\r\n\r\n}","import pubsub from './customEvents';\r\n\r\nexport default {\r\n    getState: function(){\r\n        let state = window.localStorage.getItem(\"showItemStatus\");\r\n        if(state){\r\n            return Number(state);\r\n        }else{\r\n            window.localStorage.setItem(\"showItemStatus\", \"1\");\r\n            return 1;\r\n        }\r\n    },\r\n\r\n    setState: function(value){\r\n        window.localStorage.setItem(\"showItemStatus\", String(value));\r\n        pubsub.emit(\"showItemStatusChange\", Number(value));\r\n    }\r\n\r\n\r\n}","import pubsub from './customEvents';\r\n\r\nexport default {\r\n    getState: function(){\r\n        let state = window.localStorage.getItem(\"autoDeleteCache\");\r\n        if(state){\r\n            return Number(state);\r\n        }else{\r\n            window.localStorage.setItem(\"autoDeleteCache\", \"1\");\r\n            return 1;\r\n        }\r\n    },\r\n\r\n    setState: function(value){\r\n        window.localStorage.setItem(\"autoDeleteCache\", String(value));\r\n        pubsub.emit(\"autoDeleteCacheChange\", Number(value));\r\n    }\r\n\r\n\r\n}","import pubsub from './customEvents';\r\n\r\nexport default {\r\n    getState: function(){\r\n        let state = window.localStorage.getItem(\"fastDL\");\r\n        if(state){\r\n            return Number(state);\r\n        }else{\r\n            window.localStorage.setItem(\"fastDL\", \"0\");\r\n            return 1;\r\n        }\r\n    },\r\n\r\n    setState: function(value){\r\n        window.localStorage.setItem(\"fastDL\", String(value));\r\n        pubsub.emit(\"fastDLChange\", Number(value));\r\n    }\r\n\r\n\r\n}","import pubsub from './customEvents';\r\n\r\nexport default {\r\n    getState: function(){\r\n        let state = window.localStorage.getItem(\"theme\");\r\n        if(state){\r\n            return state;\r\n        }else{\r\n            window.localStorage.setItem(\"theme\", \"light\");\r\n            return \"light\";\r\n        }\r\n    },\r\n\r\n    setState: function(value){\r\n        window.localStorage.setItem(\"theme\", String(value));\r\n        document.body.setAttribute(\"class\", value);\r\n        pubsub.emit(\"themeChanged\", value);\r\n    }\r\n\r\n\r\n}","import React, { Component } from 'react'; \r\nimport './Toggle.css';\r\n\r\nexport default class Toggle extends Component{\r\n\r\n    state = {\r\n        checked: false,\r\n        disabled: false\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(this.props.defaultValue){\r\n            this.setState({\r\n                checked: this.props.defaultValue\r\n            });\r\n        }\r\n\r\n        if(this.props.disabled)\r\n        {\r\n            this.setState({\r\n                disabled: this.props.disabled\r\n            });\r\n        }\r\n    }\r\n\r\n    get disabled(){\r\n        return this.state.disabled;\r\n    }\r\n\r\n    set disabled(value){\r\n        this.setState({\r\n            disabled: value\r\n        });\r\n    }\r\n\r\n    get checked (){\r\n        return this.state.checked;\r\n    }\r\n\r\n    set checked(value){\r\n        this.setState({\r\n            checked: value\r\n        });\r\n    }\r\n\r\n    onTap = () => {\r\n        if(!this.state.disabled){\r\n            this.setState({\r\n                checked: !this.state.checked\r\n            }, () => {\r\n                if(this.props.onChange) this.props.onChange(this);\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div    className={\"toggle-con\" + (this.state.disabled ? \" toggle-disabled\" : \"\")}\r\n                    onClick={this.onTap} \r\n                    tabIndex={0}\r\n                    style={{backgroundColor: this.state.checked ? (this.props.activeColor ? this.props.activeColor : '#4CAF50' ) : null}}>\r\n                <div className=\"toggle-circle\" style={{\r\n                    left: this.state.checked ? 32 : 4\r\n                }}></div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, { Component, useEffect, useState } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport customEvents from '../../models/customEvents';\r\nimport LIS from '../../models/load-images-sync-event';\r\nimport SHOW_ITEM_STATUS from '../../models/show-item-status';\r\nimport AUTO_DELETE_CACHE from '../../models/auto-delete-cache';\r\nimport FAST_DL_STATUS from '../../models/fast-dl-status';\r\nimport DARK_MODE_STATUS from '../../models/dark-mode-status';\r\nimport './Drawer.css';\r\nimport Toggle from '../Toggle/Toggle';\r\n// import tbl_img_cache from '../../models/tbl_img_cache';\r\nimport erl_logo64 from '../../models/erl-logo64';\r\n\r\nconst DButton = (props) => {\r\n\r\n    let [active, setActive] = useState(false);\r\n\r\n    const onURLChange = () => {\r\n        let c_path = window.location.pathname;\r\n        if(c_path === props.to){\r\n            setActive(true);\r\n        }else{\r\n            setActive(false);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        console.log(\"exe\");\r\n        onURLChange();\r\n        customEvents.on('pushstate', onURLChange);\r\n        window.addEventListener('popstate', onURLChange);\r\n        \r\n\r\n        return () => {\r\n            customEvents.off('pushstate', onURLChange);\r\n            window.removeEventListener('popstate', onURLChange);\r\n        }\r\n    }, []);\r\n\r\n    const onClick = () => {\r\n        if(typeof props.onClick === 'function') props.onClick();\r\n        setTimeout(() => {\r\n            if(window.location.pathname === props.to) return;\r\n            window.history.pushState(null, \"\", props.to);\r\n            customEvents.emit('pushstate');\r\n        }, 300);\r\n        \r\n    }\r\n\r\n    return(\r\n        <button className={\"dbutton\" + (active ? \" db-act\" : \"\")} onClick={onClick}>\r\n            <div className=\"dbutton-ico m-icon\">\r\n                {props.icon}\r\n            </div>\r\n            <div className=\"db-lbl\">\r\n                {props.label}\r\n            </div>\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default class Drawer extends Component{\r\n\r\n\r\n    drawerCardRef = React.createRef();\r\n    drawerBgRef = React.createRef();\r\n    darkModeToggleRef = React.createRef();\r\n    loadImageSyncToggle = React.createRef();\r\n    showItemStatusToggle = React.createRef();\r\n    autoDeleteToggle = React.createRef();\r\n    fastDLToggle = React.createRef();\r\n    threshold = 16;\r\n    allowMove = false;\r\n    startPoint = 0;\r\n    endPoint = 0;\r\n    currentPosition = 0;\r\n    distance = 0;\r\n    // startTopPoint = 0;\r\n    // endTopPoint = 0;\r\n\r\n    startTime = 0;\r\n    endTime = 0;\r\n\r\n    isOpen = false;\r\n    slideTimer = null;\r\n\r\n    componentDidMount = () => {\r\n        // window.addEventListener('touchstart', this.onTouchStart);\r\n        // window.addEventListener('touchmove', this.onTouchMove);\r\n        // window.addEventListener('touchend', this.onTouchEnd);\r\n        // document.addEventListener('backbutton', this.close, false);\r\n\r\n        this.darkModeToggleRef.current.checked = DARK_MODE_STATUS.getState() === \"dark\" ? true : false;\r\n        this.loadImageSyncToggle.current.checked = LIS.getState();\r\n        this.showItemStatusToggle.current.checked = SHOW_ITEM_STATUS.getState();\r\n        // this.autoDeleteToggle.current.checked = AUTO_DELETE_CACHE.getState();\r\n        this.fastDLToggle.current.checked = FAST_DL_STATUS.getState();\r\n        \r\n        \r\n        customEvents.on(\"loadImageSyncChange\", this.onLISChange);\r\n        customEvents.on(\"showItemStatusChange\", this.on_SHOW_ITEM_STATUS_Change);\r\n        // customEvents.on(\"autoDeleteCacheChange\", this.on_AUTO_DELETE_CACHE_Change);\r\n        customEvents.on(\"fastDLChange\", this.on_FAST_DL_STATUS_Change);\r\n        customEvents.on(\"themeChanged\", this.on_DARK_MODE_STATUS_changed);\r\n    }\r\n\r\n\r\n    componentWillUnmount = () => {\r\n\r\n        customEvents.off(\"loadImageSyncChange\", this.onLISChange);\r\n        customEvents.off(\"showItemStatusChange\", this.on_SHOW_ITEM_STATUS_Change);\r\n        // customEvents.off(\"autoDeleteCacheChange\", this.on_AUTO_DELETE_CACHE_Change);\r\n        customEvents.off(\"fastDLChange\", this.on_FAST_DL_STATUS_Change);\r\n        customEvents.off(\"themeChanged\", this.on_DARK_MODE_STATUS_changed);\r\n        // window.removeEventListener('touchstart', this.onTouchStart);\r\n        // window.removeEventListener('touchmove', this.onTouchMove);\r\n        // window.removeEventListener('touchend', this.onTouchEnd);\r\n        // document.addEventListener('backbutton', this.close, false);\r\n    }\r\n\r\n    on_DARK_MODE_STATUS_changed = (state) => {\r\n        this.darkModeToggleRef.current.checked = state === \"dark\" ? true : false;\r\n    }\r\n\r\n    onLISChange = (state) => {\r\n        this.loadImageSyncToggle.current.checked = state;\r\n    }\r\n\r\n    on_SHOW_ITEM_STATUS_Change = (state) => {\r\n        this.showItemStatusToggle.current.checked = state;\r\n    }\r\n\r\n    // on_AUTO_DELETE_CACHE_Change = (state) => {\r\n    //     this.autoDeleteToggle.current.checked = state;\r\n    // }\r\n\r\n    on_FAST_DL_STATUS_Change = (state) => {\r\n        this.fastDLToggle.current.checked = state;\r\n    }\r\n\r\n    onTouchStart = (e) => {\r\n        this.startTime = (new Date()).getTime();\r\n        this.startPoint = e.touches[0].clientX;\r\n        this.endPoint = this.startPoint;\r\n        // this.startTopPoint = e.touches[0].clientY;\r\n\r\n        if(this.isOpen){\r\n            this.allowMove = true;\r\n            this.drawerBgRef.current.style.display = \"block\";\r\n        }else{\r\n            if(this.startPoint <= this.threshold){\r\n                console.log(\"start\");\r\n                this.allowMove = true;\r\n                this.drawerBgRef.current.style.display = \"block\";\r\n            }\r\n        }\r\n        \r\n    }\r\n\r\n    onTouchMove = (e) => {\r\n        // this.endTopPoint = e.touches[0].clientY;\r\n        // let verticalDistance = this.endTopPoint - this.startTopPoint;\r\n        // let horizontalDistance = this.endPoint - this.startPoint;\r\n        // console.log(`${verticalDistance} = ${horizontalDistance}`);\r\n        const action = () => {\r\n            if(this.allowMove === true){\r\n\r\n                \r\n\r\n                this.endPoint = e.touches[0].clientX;\r\n\r\n                let _currentPosition = this.currentPosition + (this.endPoint - this.startPoint);\r\n\r\n                if(_currentPosition > 256){\r\n                    _currentPosition = 256;\r\n                }\r\n               \r\n                // if(verticalDistance < horizontalDistance){\r\n                    console.log(this.currentPosition);\r\n                    this.drawerCardRef.current.style.transform = `translateX(${_currentPosition}px)`;\r\n                    this.drawerBgRef.current.style.opacity = (_currentPosition / 256);\r\n\r\n                // }\r\n            }\r\n        }\r\n        window.requestAnimationFrame(action);\r\n    }\r\n\r\n    onTouchEnd = (e) => {\r\n        // console.log(`distance: ${this.startPoint} / ${this.endPoint}`);\r\n        let distance = this.currentPosition + (this.endPoint - this.startPoint);\r\n        console.log(\"distance: \", distance);\r\n        if(this.startPoint === this.endPoint) return;\r\n\r\n        if(this.allowMove === true){\r\n            let direction = '';\r\n            this.endTime = (new Date()).getTime();\r\n            let timeElapse = this.endTime - this.startTime;\r\n            let isFling = false;\r\n            if(timeElapse > 300){\r\n                timeElapse = 300;\r\n            }\r\n\r\n            if(timeElapse < 80){\r\n                timeElapse = 100;\r\n                isFling = true;\r\n            }\r\n\r\n\r\n            console.log(timeElapse);\r\n            console.log(`${this.startPoint} / ${this.endPoint}`);\r\n\r\n\r\n            if(this.startPoint < this.endPoint){\r\n                //going right\r\n                direction = 'right';\r\n            }else if(this.startPoint > this.endPoint){\r\n                //going left\r\n                direction = 'left';\r\n                \r\n            }\r\n\r\n        \r\n\r\n            if(isFling){\r\n                if(direction === 'right'){\r\n                    this.slideToRight(timeElapse);\r\n                }else{\r\n                    this.slideToLeft(timeElapse);\r\n                }\r\n            }else{\r\n                if(direction === 'right'){\r\n                    if(distance > (256 * 0.33)){\r\n                        this.slideToRight(timeElapse);\r\n                    }else{\r\n                        this.slideToLeft(timeElapse);\r\n                    }\r\n                }else{\r\n                    if(distance < (256 * 0.66)){\r\n                        this.slideToLeft(timeElapse);\r\n                    }else{\r\n                        this.slideToRight(timeElapse);\r\n                    }   \r\n                    \r\n                }\r\n                \r\n            }\r\n\r\n            this.allowMove = false;\r\n        }\r\n        \r\n        \r\n        \r\n\r\n\r\n\r\n        \r\n    }\r\n\r\n    wait = (time) => {\r\n        return new Promise((resolve, reject) => {\r\n            setTimeout(() => {\r\n                resolve();\r\n            }, time);\r\n        });\r\n    }\r\n\r\n    slideToRight = async (timeElapse, fromButton) => {\r\n        if(fromButton){\r\n            this.drawerBgRef.current.style.display = \"block\";\r\n            this.drawerBgRef.current.style.opacity = 0;\r\n        }\r\n\r\n        await this.wait(10);\r\n\r\n        if(this.slideTimer) clearTimeout(this.slideTimer);\r\n        this.drawerCardRef.current.style.transition = `all ${timeElapse}ms`;\r\n        this.drawerCardRef.current.style.transform = `translateX(256px)`;\r\n        this.drawerBgRef.current.style.transition = `all ${timeElapse}ms`;\r\n        this.drawerBgRef.current.style.opacity = 1;\r\n        this.slideTimer = setTimeout(() => {\r\n            this.drawerCardRef.current.style.transition = \"none\";\r\n            this.drawerBgRef.current.style.transition = \"none\";\r\n            this.drawerBgRef.current.style.display = \"block\";\r\n            this.isOpen = true;\r\n            this.currentPosition = 256;\r\n        },timeElapse);\r\n    }\r\n\r\n    slideToLeft = async (timeElapse, fromButton) => {\r\n        if(fromButton){\r\n            this.drawerBgRef.current.style.display = \"block\";\r\n            this.drawerBgRef.current.style.opacity = 1;\r\n        }\r\n\r\n        await this.wait(10);\r\n\r\n        if(this.slideTimer) clearTimeout(this.slideTimer);\r\n        this.drawerCardRef.current.style.transition = `all ${timeElapse}ms`;\r\n        this.drawerCardRef.current.style.transform = `translateX(0px)`;\r\n        this.drawerBgRef.current.style.transition = `all ${timeElapse}ms`;\r\n        this.drawerBgRef.current.style.opacity = 0;\r\n        this.slideTimer = setTimeout(() => {\r\n            this.drawerCardRef.current.style.transition = \"none\";\r\n            this.drawerBgRef.current.style.transition = \"none\";\r\n            this.drawerBgRef.current.style.display = \"none\";\r\n            this.isOpen = false;\r\n            this.currentPosition = 0;\r\n        },timeElapse);\r\n    }\r\n\r\n\r\n    close = () => {\r\n        this.slideToLeft(300, true);\r\n        document.removeEventListener('backbutton', this.close, false);\r\n    }\r\n\r\n    open = () => {\r\n        this.slideToRight(300, true);\r\n        document.addEventListener('backbutton', this.close, false);\r\n    }\r\n\r\n    onDarkModeChange = (e) => {\r\n        if(e.checked){\r\n            DARK_MODE_STATUS.setState(\"dark\");\r\n        }else{\r\n            DARK_MODE_STATUS.setState(\"light\");\r\n        }\r\n    }\r\n\r\n    onChange_loadImageSync = (e) => {\r\n        if(e.checked){\r\n            LIS.setState(1);\r\n        }else{\r\n            LIS.setState(0);\r\n        }\r\n    }\r\n\r\n    onChange_showItemStatusToggle = (e) => {\r\n        if(e.checked){\r\n            SHOW_ITEM_STATUS.setState(1);\r\n        }else{\r\n            SHOW_ITEM_STATUS.setState(0);\r\n        }\r\n    }\r\n\r\n    onChange_autoDeleteToggle = (e) => {\r\n        if(e.checked){\r\n            AUTO_DELETE_CACHE.setState(1);\r\n        }else{\r\n            AUTO_DELETE_CACHE.setState(0);\r\n        }\r\n    }\r\n\r\n\r\n    onChange_fastDLToggle = (e) => {\r\n        if(e.checked){\r\n            FAST_DL_STATUS.setState(1);\r\n        }else{\r\n            FAST_DL_STATUS.setState(0);\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return createPortal(\r\n            <div className=\"drawer-con\">\r\n                <div className=\"drawer-bg\" ref={this.drawerBgRef} onClick={this.close}>\r\n                </div>\r\n                <div className=\"drawer-card\" ref={this.drawerCardRef}>\r\n                    <div className=\"drawer-logo-con\">\r\n                        <img src={erl_logo64} alt=\"logo\" />\r\n                    </div>\r\n                    <DButton    icon={<span>&#xe88a;</span>}\r\n                                label=\"Home\"\r\n                                to={window.base_url === \"/\" ? \"/\" : \"/android_asset/www/index.html\"}\r\n                                onClick={() => {\r\n                                    this.close();\r\n                                }}/>\r\n                    <DButton    icon={<span>&#xe39d;</span>}\r\n                                label=\"Add New Story\"\r\n                                to={\"/add-story\"}\r\n                                onClick={() => {\r\n                                    this.close();\r\n                                }}/>\r\n                    {/* <DButton    icon={<span>&#xe8b8;</span>}\r\n                                label=\"Settings\"\r\n                                to={\"/settings\"}\r\n                                onClick={() => {\r\n                                    this.close();\r\n                                }}/> */}\r\n                    <DButton    icon={<span>&#xe889;</span>}\r\n                                label=\"Recents\"\r\n                                to={\"/recents\"}\r\n                                onClick={() => {\r\n                                    this.close();\r\n                                }}/>\r\n\r\n                    <DButton    icon={<span>&#xe8b8;</span>}\r\n                                label=\"Settings\"\r\n                                to={\"/settings\"}\r\n                                onClick={() => {\r\n                                    this.close();\r\n                                }}/>\r\n\r\n                    <DButton    icon={<span>&#xe88e;</span>}\r\n                                label=\"About\"\r\n                                to={\"/about\"}\r\n                                onClick={() => {\r\n                                    this.close();\r\n                                }}/>\r\n                    <h5 style={{ color: 'var(--text-color)'}}>Quick Access Settings</h5>\r\n\r\n                    <div className=\"darkmode-toggle-holder\">\r\n                        <div className=\"dth-dm-lbl\">Dark Mode</div>\r\n                        <Toggle ref={this.darkModeToggleRef} onChange={this.onDarkModeChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"darkmode-toggle-holder\">\r\n                        <div className=\"dth-dm-lbl\">Load Images Sync</div>\r\n                        <Toggle ref={this.loadImageSyncToggle} onChange={this.onChange_loadImageSync}/>\r\n                    </div>\r\n\r\n                    <div className=\"darkmode-toggle-holder\">\r\n                        <div className=\"dth-dm-lbl\">Show Item Current Status</div>\r\n                        <Toggle ref={this.showItemStatusToggle} onChange={this.onChange_showItemStatusToggle}/>\r\n                    </div>\r\n\r\n                    {/* <div className=\"darkmode-toggle-holder\">\r\n                        <div className=\"dth-dm-lbl\">Auto Delete Image Cache</div>\r\n                        <Toggle ref={this.autoDeleteToggle} onChange={this.onChange_autoDeleteToggle}/>\r\n                    </div> */}\r\n\r\n                    <div className=\"darkmode-toggle-holder\">\r\n                        <div className=\"dth-dm-lbl\">Fast Download</div>\r\n                        <Toggle ref={this.fastDLToggle} onChange={this.onChange_fastDLToggle}/>\r\n                    </div>\r\n\r\n                    {/* <button className={\"dbutton\"} onClick={() => {\r\n                        // tbl_img_cache.clearAll();\r\n                        // alert(\"Image Cache Cleared!\");\r\n                    }}>\r\n                        <div className=\"dbutton-ico m-icon\">\r\n                            &#xe872;\r\n                        </div>\r\n                        <div className=\"db-lbl\">\r\n                            Clear Image Cache\r\n                        </div>\r\n                    </button> */}\r\n                </div>\r\n            </div>,\r\n            document.body\r\n        );\r\n    }\r\n}","import React, { Component, useRef, useEffect, useState } from 'react';\r\nimport './HomePage2.css';\r\nimport SVGIcon from '../../components/SvgIcons/SvgIcons';\r\nimport tbl_stories from '../../models/tbl_stories';\r\nimport CoverImage from '../../components/CoverImage/CoverImage';\r\nimport customEvents from '../../models/customEvents';\r\nimport ListItemOptions from '../../components/ListItemOptions/ListItemOptions';\r\nimport StoryForm from '../../components/StoryForm/StoryForm';\r\nimport { getStoryDetails } from '../../models/story-model';\r\nimport Snackbar from '../../components/Snackbar/Snackbar';\r\nimport Drawer from '../../components/Drawer/Drawer';\r\nimport SHOW_ITEM_STATUS from '../../models/show-item-status';\r\nimport tbl_img_cache from '../../models/tbl_img_cache';\r\nimport erl_logo64 from '../../models/erl-logo64';\r\nimport loading64 from '../../models/loading64';\r\nimport DELAY from '../../models/delay';\r\n// import NavLink from '../../components/NavLink/NavLink';\r\nlet oldState = null;\r\n\r\n\r\nfunction StoryItem(props){\r\n    const [isNew, setIsNew] = useState(false);\r\n    const [LUpdate, setLUpdate] = useState(null);\r\n    let item = props.data;\r\n    let hostname = (new URL(item.url)).hostname;\r\n    let imgRef = useRef(null);\r\n    let titleRef = useRef(null);\r\n    let showItemsStatus = Boolean(SHOW_ITEM_STATUS.getState());\r\n\r\n    const onNavClick = () => {\r\n        // alert(\"Item Nav\");\r\n        let src = imgRef.current.getImageSource();\r\n        let url = `/story?url=${encodeURIComponent(item.url)}`;\r\n        console.log(item);\r\n        window.history.pushState({\r\n            storyData: item,\r\n            cover_base64: src\r\n        }, \"\", url);\r\n        customEvents.emit('pushstate');\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n\r\n        if(showItemsStatus){\r\n\r\n            getStoryDetails(item.url)\r\n            .then((data) => {\r\n                // console.log(\"Per item data: \", data.chapters);\r\n                tbl_img_cache.add(item.url, data);\r\n                let date = data.chapters[0].date;\r\n                if(date.match(/([0-9]+ \\w+ [0-9]+|\\w [0-9]+, [0-9]+|[0-9]+\\/[0-9]+\\/[0-9]+)/g)){\r\n                    setIsNew(false);\r\n                    setLUpdate(new Date(date).toDateString());\r\n                }else{\r\n                    setIsNew(true);\r\n                    setLUpdate(date);\r\n                }\r\n            })\r\n            .catch(async (err) => {\r\n                console.log(err);\r\n                // alert(err);\r\n\r\n                let data = await tbl_img_cache.get(item.url);\r\n                if(data){\r\n                    let date = data.chapters[0].date;\r\n                    if(date.match(/([0-9]+ \\w+ [0-9]+|\\w [0-9]+, [0-9]+|[0-9]+\\/[0-9]+\\/[0-9]+)/g)){\r\n                        setIsNew(false);\r\n                        setLUpdate(new Date(date).toDateString());\r\n                    }else{\r\n                        setIsNew(true);\r\n                        setLUpdate(date);\r\n                    }\r\n                }else{\r\n                    if(typeof props.onError === 'function') props.onError(err);\r\n                    setIsNew(false);\r\n                    setLUpdate(\"????-??-??\");\r\n                }\r\n\r\n            });\r\n        }\r\n\r\n        if(props.searchText === \"\") return;\r\n        let title = titleRef.current.textContent;\r\n\r\n        console.log(\"to update: \", title, props.searchText);\r\n        let wordArr = props.searchText.trim().replace(/\\s+/g,\" \").split(\" \");\r\n        \r\n\r\n        let reString = wordArr.map((word) => {\r\n            return word.replace(/(\\?|\\.|\\^|\\$|\\*|\\+|\\|)/g, \"\\\\$1\");\r\n        }).join(\"|\");\r\n        let regex = new RegExp(`(${reString})`, \"gi\");\r\n        title = title.replace(regex, `<span style=\"color: #f55;\">$1</span>`);\r\n        console.log(title);\r\n\r\n\r\n\r\n\r\n        \r\n        titleRef.current.innerHTML = title;\r\n    }, []);\r\n\r\n    return (\r\n        <div className=\"hp2-item-con\">\r\n            <div className=\"hp2-item-img-con\">\r\n                <CoverImage src={item.cover} ref={imgRef} onCache={(url, data) => {\r\n                    tbl_img_cache.add(url, data);\r\n                }}/>\r\n                {\r\n                    isNew &&\r\n                    <div className=\"c-new-tag\">NEW</div>\r\n                }\r\n            </div>\r\n            <div className=\"hp2-item-lbl-con\">\r\n                <div className=\"hp2-item-title\" ref={titleRef}>{item.title}</div>\r\n                <div className=\"hp2-item-desc\">{hostname}</div>\r\n                <div style={{flex: 1}}></div>\r\n                {\r\n                    showItemsStatus &&\r\n                    <div className=\"lupdate-lbl\">Last Update: <strong>{LUpdate || \"Loading...\"}</strong></div>\r\n                }\r\n            </div>\r\n            <div    className=\"hp2-item-navlink\" \r\n                    onClick={onNavClick}\r\n                    onContextMenu={(e) => {\r\n                        e.preventDefault();\r\n                        props.onMoreClick();\r\n                    }}></div>\r\n            <button className=\"hp2-item-more\"\r\n                    onClick={props.onMoreClick}\r\n                    title=\"More Options\">\r\n                <SVGIcon name=\"more_vert\" fill=\"#777\" size={16}/>\r\n            </button>\r\n        </div>\r\n    );\r\n}\r\n\r\nclass HomePage2 extends Component{\r\n\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            show: true,\r\n            list: [],\r\n            isLoading: false,\r\n            total_page_count: 1,\r\n            currentPage: 1,\r\n            search: \"\",\r\n            showSearchBox: false,\r\n            searchBoxX: `translateX(${window.screen.width}px)`,\r\n            logoAnim: 'hp2-logo-anim',\r\n            logoAnimEnable: false,\r\n            showLogo: false\r\n        };\r\n\r\n        this.currentURL = '';\r\n\r\n        this.formRef = React.createRef();\r\n        this.lioRef = React.createRef();\r\n        this.seachInRef = React.createRef();\r\n        this.snackRef = React.createRef();\r\n        this.drawerRef = React.createRef();\r\n    }\r\n\r\n    logoTimer = null;\r\n\r\n    componentDidMount = () => {\r\n        (async () => {\r\n            await DELAY(300);\r\n            if(this.logoTimer) clearTimeout(this.logoTimer);\r\n            if(oldState){\r\n                this.setState(oldState);\r\n            }else{\r\n                this.loadStories();\r\n            }\r\n\r\n            this.logoTimer = setTimeout(() => {\r\n                this.setState({\r\n                    logoAnimEnable: true,\r\n                    showLogo: true\r\n                },() => {\r\n                    this.logoBounce();\r\n                })\r\n            }, 500);\r\n\r\n            window.addEventListener('resize', this.onWindowResize);\r\n            customEvents.on(\"url.added\", this.onUrlAdded);\r\n        })();\r\n    }\r\n    \r\n    componentWillUnmount = () => {\r\n        // pubsub.off('url.changed', this.checkURL);\r\n        oldState = this.state;\r\n        window.removeEventListener('resize', this.onWindowResize);\r\n        customEvents.off(\"url.added\", this.onUrlAdded);\r\n    }\r\n\r\n    onUrlAdded = () => {\r\n        this.loadStories();\r\n    }\r\n\r\n    logoBounce = () => {\r\n        // this.logoTimer = setTimeout(() => {\r\n            this.setState({\r\n                logoAnimEnable: true\r\n            },() => {\r\n                if(this.logoTimer) clearTimeout(this.logoTimer);\r\n                this.logoTimer = setTimeout(() => {\r\n                    this.setState({\r\n                        logoAnimEnable: false\r\n                    });\r\n                }, 600);\r\n            })\r\n        // }, 500);\r\n    }\r\n\r\n\r\n    onWindowResize = () => {\r\n        this.setState({\r\n            searchBoxX: this.state.showSearchBox ? `translateX(0px)` : `translateX(${window.screen.width}px)`\r\n        });\r\n    }\r\n\r\n    loadStories = () => {\r\n        // alert(\"loading Stories!\");\r\n        try{\r\n            this.setState({\r\n                list: [],\r\n                isLoading: true\r\n            },() => {\r\n                tbl_stories.getStories({\r\n                    search: this.state.search,\r\n                    limit: 20,\r\n                    page: this.state.currentPage\r\n                })\r\n                .then((data) => {\r\n                    console.log(data);\r\n                    // alert(JSON.stringify(data));\r\n                    this.setState({\r\n                        isLoading: false,\r\n                        list: data.results,\r\n                        total_page_count: data.total_page_count,\r\n                        currentPage: data.current_page\r\n                    });\r\n                })\r\n                .catch((err) => {\r\n                    // throw err;\r\n                    alert(\"Error Loading Stories:\" + err);\r\n                });\r\n            });\r\n        }catch(err){\r\n            alert(\"err:\\n\" + err);\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    onPrevPage = () => {\r\n        let prev = this.state.currentPage - 1;\r\n        if(prev < 1){\r\n            prev = 1;\r\n        }\r\n\r\n        this.setState({\r\n            currentPage: prev\r\n        }, () => {\r\n            this.loadStories();\r\n        });\r\n    }\r\n\r\n\r\n    onNextPage = () =>{\r\n        let next = this.state.currentPage + 1;\r\n        if(next > this.state.total_page_count){\r\n            next = this.state.total_page_count;\r\n        }\r\n\r\n        this.setState({\r\n            currentPage: next\r\n        }, () => {\r\n            this.loadStories();\r\n        });\r\n    }\r\n\r\n\r\n    searchTimer = null;\r\n    onSearchChange = (e) => {\r\n        if(this.searchTimer) clearTimeout(this.searchTimer);\r\n        e.preventDefault();\r\n        this.setState({\r\n            search: e.target.value,\r\n            currentPage: 1\r\n        },() => {\r\n            this.searchTimer = setTimeout(() => {\r\n                this.loadStories();\r\n            }, 600)\r\n        })\r\n    }\r\n\r\n    onItemOptionShow = (item) => {\r\n        this.lioRef.current\r\n        .setOnDelete(async () => {\r\n            // alert(\"Delete: \" + item.title);\r\n            await tbl_stories.deleteStory(item.id);\r\n            this.snackRef.current.show({\r\n                message: \"Successfully Deleted\",\r\n                mode: \"success\"\r\n            });\r\n            this.loadStories();\r\n        })\r\n        .setOnOpen(() => {\r\n            // alert(\"Open: \" + item.url);\r\n            window.open(item.url);\r\n        })\r\n        .show({\r\n            title: item.title,\r\n            url: item.url\r\n        })\r\n    }\r\n\r\n\r\n    addStory = (url) => {\r\n        // let url = \"https://toonily.com/webtoon/the-hidden-past/\";\r\n        // let url = \"https://toonily.com/webtoon/solo-leveling-0032/\";\r\n        this.setState({\r\n            isLoading: true\r\n        }, () => {\r\n\r\n            getStoryDetails(url)\r\n            .then((data) => {\r\n                // alert(JSON.stringify(data));\r\n                console.log(data);\r\n                tbl_stories.addStory({\r\n                    title: data.title,\r\n                    url: data.url,\r\n                    cover: data.cover,\r\n                    info_json: JSON.stringify(data.storyInfo),\r\n                    // chapters: data.chapters,\r\n                    description: data.description,\r\n                })\r\n                .then((res) => {\r\n                    // alert(\"addStory: \\n\" + JSON.stringify(res));\r\n                    console.log(res);\r\n                    this.loadStories();\r\n                })\r\n                .catch((err) => {\r\n                    this.setState({\r\n                        isLoading: false\r\n                    });\r\n                    console.log(err);\r\n                    if(err.code === 6){\r\n                        alert(\"URL already exists.\" + (err.message ? \"\\nError:\\n\"+ err.message : \"\"));\r\n                    }else{\r\n                        if(err.message){\r\n                            // alert(\"code: \\n\" + err.code);\r\n                            alert(\"Error: \\n\" + err.message);\r\n                        }else{\r\n                            alert(\"Error: \"+err);\r\n                        }\r\n                    }\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                console.log(err);\r\n                alert(\"Error Getting Story Details:\" + err);\r\n                throw err;\r\n            });\r\n        });\r\n        \r\n    }\r\n\r\n    onFormSubmit = (url) => {\r\n        // console.log(url);\r\n        this.addStory(url);\r\n    }\r\n\r\n    onItemRequestError = (msg) => {\r\n        this.snackRef.current.show({\r\n            message: \"Item request error: \" + msg,\r\n            mode: \"error\"\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"homepage2-con\">\r\n                {/* <div className=\"hp2-head-bg\"></div> */}\r\n                <div className=\"hp2-head\">\r\n                    <button className=\"hp2-h-btn\" \r\n                            onClick={() => {\r\n                                this.drawerRef.current.open();\r\n                            }}\r\n                            title=\"Menu\">\r\n                        <SVGIcon name=\"menu\" fill=\"#555\"/>\r\n                    </button>\r\n                    <div style={{flex: 1}}></div>\r\n                    {\r\n                        this.state.showLogo &&\r\n                        <img    src={erl_logo64} \r\n                                alt=\"logo\" \r\n                                className={\"hp2-h-logo\" + (this.state.logoAnimEnable ? ' '+this.state.logoAnim : '')}\r\n                                id=\"app-header-logo\"\r\n                                onClick={(e) => {\r\n                                    this.logoBounce();\r\n                                    this.loadStories();\r\n                                }}/>\r\n                    }\r\n                    <div style={{flex: 1}}></div>\r\n                    <button className=\"hp2-h-btn\"\r\n                            onClick={() => {\r\n                                this.setState({\r\n                                    showSearchBox: true,\r\n                                    searchBoxX: 'translateX(0px)'\r\n                                }, () => {\r\n                                    setTimeout(() => {\r\n                                        this.seachInRef.current && this.seachInRef.current.focus();\r\n                                    } ,400)\r\n                                })\r\n                            }}\r\n                            title=\"Search Story\">\r\n                        <SVGIcon name=\"search\" fill=\"#555\"/>\r\n                    </button>\r\n\r\n                    <div    className=\"hp2-search-con\" \r\n                            style={{\r\n                                transform: this.state.searchBoxX\r\n                            }}>\r\n                        <button className=\"hp2-h-btn\"\r\n                                onClick={() => {\r\n                                    this.setState({\r\n                                        showSearchBox: false,\r\n                                        searchBoxX: `translateX(${window.screen.width}px)`\r\n                                    })\r\n                                }}\r\n                                title=\"Back\">\r\n                            <SVGIcon name=\"arrow_back\" fill=\"#555\"/>\r\n                        </button>\r\n                        <input  type=\"text\" \r\n                                placeholder=\"search..\" \r\n                                className=\"hp2-in\"\r\n                                value={this.state.search}\r\n                                onChange={this.onSearchChange}\r\n                                ref={this.seachInRef}/>\r\n                        <button className=\"hp2-h-btn\"\r\n                                onClick={() => {\r\n                                    this.setState({\r\n                                        search: \"\",\r\n                                        currentPage: 1\r\n                                    }, () => {\r\n                                        this.loadStories();\r\n                                    });\r\n                                }}\r\n                                title=\"Clear Search Text\">\r\n                            <SVGIcon name=\"close\" fill=\"#555\"/>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"hp2-content\">\r\n                    {\r\n                        !this.state.isLoading ?\r\n\r\n                        (\r\n                            this.state.list.length > 0 ?\r\n                            this.state.list.map((item, index) => {\r\n                                return (\r\n                                    <StoryItem  data={item} \r\n                                                key={index} \r\n                                                onMoreClick={() => {\r\n                                                    this.onItemOptionShow(item);\r\n                                                }}\r\n                                                searchText={this.state.search}\r\n                                                onError={this.onItemRequestError}/>\r\n                                );\r\n                            })\r\n\r\n                            :\r\n\r\n                            <div className=\"no-story-found\">\r\n                                No Story Found\r\n                            </div>\r\n                        )\r\n\r\n                        :\r\n\r\n                        <div>\r\n                                <img src={loading64} alt=\"loading\"/>\r\n                        </div>\r\n                    }\r\n\r\n                    <div style={{height: 56}}></div>\r\n                </div>\r\n                <div className=\"hp2-foot-con\">\r\n                    {/* <div className=\"hp2-pg-con-bg\"></div> */}\r\n                    <div className=\"hp2-pg-con\">\r\n                        {/* <div className=\"hp2-sl-lbl\">Story List</div> */}\r\n                        <button className=\"hp2-h-btn2\"\r\n                                onClick={this.onPrevPage}\r\n                                title=\"Previous Page\"\r\n                                disabled={\r\n                                    this.state.currentPage <= 1 ?\r\n                                    true\r\n                                    : \r\n                                    false\r\n                                }>\r\n                            <SVGIcon name=\"arrow_back\" fill=\"#777\"/>\r\n                        </button>\r\n                        <div className=\"hp2-pg-curr-lbl\">\r\n                            Page {this.state.currentPage} / {this.state.total_page_count > 0 ? this.state.total_page_count : 1}\r\n                        </div>\r\n                        <button className=\"hp2-h-btn2\"\r\n                                onClick={this.onNextPage}\r\n                                title=\"Next Page\"\r\n                                disabled={\r\n                                    this.state.currentPage >= this.state.total_page_count ?\r\n                                    true\r\n                                    : \r\n                                    false\r\n                                }>\r\n                            <SVGIcon name=\"arrow_forward\" fill=\"#777\"/>\r\n                        </button>\r\n                        <div style={{flex: 1}}></div>\r\n                        <button className=\"hp2-h-btn3\"\r\n                                onClick={() => {\r\n                                    // this.formRef.current.show()\r\n                                    window.history.pushState(null, \"\", \"/add-story\");\r\n                                    customEvents.emit('pushstate');\r\n                                }}>\r\n                            <SVGIcon name=\"add\" fill=\"#777\"/>\r\n                            Add Story\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n                {/* <div className=\"hp2-foot\"></div> */}\r\n\r\n                <StoryForm ref={this.formRef} onSubmit={this.onFormSubmit}/>\r\n                <ListItemOptions ref={this.lioRef}/>\r\n                <Snackbar ref={this.snackRef}/>\r\n                <Drawer ref={this.drawerRef}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default HomePage2;","let db_recents = {\r\n    db: null,\r\n    init: function(callbackAction){\r\n        let request = window.indexedDB.open(\"recents\");\r\n\r\n            request.onerror = () => {\r\n                alert(\"Error opening Database\");\r\n            }\r\n\r\n            request.onsuccess = (e) => {\r\n                this.db = e.target.result;\r\n                if(typeof callbackAction === 'function') callbackAction();\r\n            }\r\n\r\n            request.onupgradeneeded = (e) => {\r\n                let _db = e.target.result;\r\n\r\n                if (!_db.objectStoreNames.contains('tbl_recents')) { \r\n                    let objs = _db.createObjectStore('tbl_recents', {autoIncrement: true});\r\n                    objs.createIndex(\"dateAdded\", \"dateAdded\", { unique: true });\r\n                }\r\n            }\r\n    }\r\n}\r\n\r\nexport default db_recents;\r\n","import db_recents from '../database/db-recents';\r\n\r\n\r\nfunction add(obj){\r\n    return new Promise((resolve, reject) => {\r\n        console.log(\"to add to recent: \", obj);\r\n        let dateAdded = new Date();\r\n        obj.dateAdded = dateAdded.getTime();\r\n        let _objectStore =   db_recents.db\r\n                            .transaction('tbl_recents', 'readwrite')\r\n                            .objectStore(\"tbl_recents\");\r\n            _objectStore.add(obj);\r\n            resolve(\"ok\");\r\n    });\r\n}\r\n\r\n\r\nfunction clearAll(){\r\n    return new Promise((resolve, reject) => {\r\n        let _objectStore =   db_recents.db\r\n                            .transaction('tbl_recents', 'readwrite')\r\n                            .objectStore(\"tbl_recents\");\r\n        _objectStore.clear();\r\n        resolve(\"ok\");\r\n    });\r\n}\r\n\r\n\r\nfunction getAll(limit, pageNumber){\r\n    return new Promise((resolve, reject) => {\r\n        const action = () => {\r\n            let results = [];\r\n            if(db_recents.db){\r\n                let _objectStore =   db_recents.db\r\n                                    .transaction('tbl_recents', 'readwrite')\r\n                                    .objectStore(\"tbl_recents\");\r\n                _objectStore.openCursor().onsuccess = function(event) {\r\n                    var cursor = event.target.result;\r\n\r\n                    if(cursor){\r\n                        results.push({\r\n                            id: cursor.key,\r\n                            ...cursor.value\r\n                        });\r\n\r\n                        cursor.continue();\r\n                    }else{\r\n                        //sort all data to descending order\r\n                        results = results.reverse();\r\n\r\n                        //data to send\r\n                        let toSend = [];\r\n                        let size = results.length;\r\n                        let offset = limit * (pageNumber - 1);\r\n\r\n                        for(let i=0; i<limit; i++){\r\n                            let index = offset + i;\r\n                            if(index >= size){\r\n                                break;\r\n                            }else{\r\n                                toSend.push(results[index]);\r\n                            }\r\n                        }\r\n                        resolve({\r\n                            data: toSend,\r\n                            overAllSize: size,\r\n                            total_page_count: Math.ceil(size / limit)\r\n                        });\r\n                    }\r\n                }\r\n            }else{\r\n                setTimeout(action, 1000);\r\n            }\r\n        }\r\n        action();\r\n    }); \r\n}\r\n\r\nexport default {\r\n    add,\r\n    getAll,\r\n    clearAll\r\n};","import { getStoryDetails, getChapterImages, getImageBlob } from './story-model';\r\nimport tbl_img_cache from './tbl_img_cache';\r\nimport FAST_DL_STATUS from './fast-dl-status';\r\n\r\nlet _continue = true;\r\n\r\nfunction set_continue(v){\r\n    _continue = v;\r\n}\r\n\r\nfunction get_continue(){\r\n    return _continue;\r\n}\r\n\r\nfunction delay(ms){\r\n    return new Promise((resolve) => {\r\n        setTimeout(() => {\r\n            resolve();\r\n        }, ms);\r\n    });\r\n}\r\n\r\nfunction cacheStory(url){\r\n\r\n    let notify = null;\r\n    let notify2 = null;\r\n    let onReceiveDetails = null;\r\n\r\n    const pr = new Promise(async (resolve, reject) => {\r\n        getStoryDetails(url)\r\n        .then(async (data) => {\r\n            tbl_img_cache.add(url, data);\r\n            if(typeof onReceiveDetails === 'function') onReceiveDetails(Object.assign({}, data));\r\n\r\n            let chapters = data.chapters;\r\n            // chapters = chapters.reverse();\r\n            for(let i=0; i<chapters.length; i++){\r\n                if(get_continue() === false) {\r\n                    resolve({\r\n                        message: \"Stopped\",\r\n                        url: chapters[i].url\r\n                    });\r\n                    break;\r\n                }\r\n                let currentChapter = chapters[i];\r\n\r\n                await cacheChapter(currentChapter.url)\r\n                .setOnProgress((index, total, imgUrl) => {\r\n                    if(typeof notify2 === 'function') notify2(index, total, currentChapter.title, currentChapter.url, imgUrl);\r\n                })\r\n                .then((res) => {\r\n                    if(res.message === \"Stopped\"){\r\n                        if(typeof notify === 'function') notify(res.url, currentChapter.title, (i+1), chapters.length, false);\r\n                        resolve(res);\r\n                        \r\n                    }else{\r\n                        if(typeof notify === 'function') notify(res.url, currentChapter.title, (i+1), chapters.length, true);\r\n\r\n                        if(i >= chapters.length - 1){\r\n                            resolve(res);\r\n                        }\r\n                        \r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    reject(err);\r\n                });\r\n        \r\n                // let imagesUrl = await getChapterImages(currentChapter.url);\r\n                // if(imagesUrl){\r\n                //     tbl_img_cache.add(currentChapter.url, imagesUrl);\r\n                // }\r\n                // await downloadImages(imagesUrl).then(() => {\r\n                //     if(typeof notify === 'function') \r\n                //         notify((i+1), chapters.length, currentChapter.title);\r\n                // });\r\n            }\r\n            \r\n        })\r\n\r\n    });\r\n\r\n\r\n    pr.setOnProgress = function(fn){\r\n        if(typeof fn === 'function') notify = fn;\r\n        return pr;\r\n    }\r\n\r\n    pr.setOnChapterProgress = function(fn){\r\n        if(typeof fn === 'function') notify2 = fn;\r\n        return pr;\r\n    }\r\n\r\n    pr.onReceiveDetails = function(fn){\r\n        if(typeof fn === 'function') onReceiveDetails = fn;\r\n        return pr;\r\n    }\r\n    \r\n    return pr;\r\n}\r\n\r\nfunction cacheChapter(url){\r\n    let notify = null;\r\n    const pr =  new Promise(async (resolve, reject) => {\r\n        let imagesUrl = await tbl_img_cache.get(url);\r\n        if(!imagesUrl){\r\n            imagesUrl = await getChapterImages(url)\r\n            .catch((err) => {\r\n                reject(err);\r\n            });\r\n            if(imagesUrl){\r\n                tbl_img_cache.add(url, imagesUrl);\r\n            }\r\n        }\r\n\r\n        await downloadImages(imagesUrl)\r\n        .setOnProgress((index, total, url) => {\r\n            if(typeof notify === 'function') notify(index, total, url)\r\n        })\r\n        .then((res) => {\r\n            if(res === \"Stopped\"){\r\n                resolve({\r\n                    message: \"Stopped\",\r\n                    url: url\r\n                });\r\n            }else{\r\n                resolve({\r\n                    message: \"Done Downloading Images\",\r\n                    url: url\r\n                });\r\n            }\r\n        })\r\n        .catch((err) => {\r\n            reject(err);\r\n        });\r\n    });\r\n\r\n    pr.setOnProgress = function(fn){\r\n        if(typeof fn === 'function') notify = fn;\r\n        return pr;\r\n    }\r\n\r\n    return pr;\r\n}\r\n\r\n\r\n\r\nfunction downloadImages(urlArray){\r\n    let counter = 0;\r\n    let notify = null;\r\n    \r\n    \r\n    const pr =  new Promise(async (resolve, reject) => {\r\n        if(urlArray){\r\n            for(let i=0; i<urlArray.length; i++){\r\n    \r\n                if( get_continue() === false ){\r\n                    resolve(\"Stopped\");\r\n                    // set_continue(true);\r\n                    return;\r\n                }\r\n    \r\n                let currentURL = urlArray[i];\r\n    \r\n                let checkData = await tbl_img_cache.get(currentURL)\r\n                                .catch((err) => {\r\n                                    reject(err)\r\n                                });\r\n                if(!checkData){\r\n                    if(Boolean(FAST_DL_STATUS.getState())){\r\n                        getImageBlob(currentURL)\r\n                        .then((dataBase64) => {\r\n                            counter++;\r\n                            tbl_img_cache.add(currentURL, dataBase64);\r\n                            if(counter >= urlArray.length){\r\n                                resolve(\"ok\");\r\n                            }\r\n                            if(typeof notify === 'function') notify(counter, urlArray.length, currentURL);\r\n                        })\r\n                        .catch((err) => {\r\n                            reject(err);\r\n                        })\r\n                        await delay(200);\r\n                    }else{\r\n                        await getImageBlob(currentURL)\r\n                        .then((dataBase64) => {\r\n                            counter++;\r\n                            tbl_img_cache.add(currentURL, dataBase64);\r\n                            if(counter >= urlArray.length){\r\n                                resolve(\"ok\");\r\n                            }\r\n                            if(typeof notify === 'function') notify(counter, urlArray.length, currentURL);\r\n                        })\r\n                        .catch((err) => {\r\n                            reject(err);\r\n                        })\r\n                    }\r\n                    \r\n                }else{\r\n                    counter++;\r\n                    if(counter >= urlArray.length){\r\n                        resolve(\"ok\");\r\n                    }\r\n                    if(typeof notify === 'function') notify(counter, urlArray.length, currentURL);\r\n                }\r\n            }\r\n        }else{\r\n            reject(\"Paramter passed was not an array\");\r\n        }\r\n    });\r\n\r\n    pr.setOnProgress = function(fn){\r\n        if(typeof fn === 'function') notify = fn;\r\n        return pr;\r\n    }\r\n\r\n    pr.setOnAbort = function(fn){\r\n\r\n    };\r\n\r\n    return pr;\r\n}\r\n\r\n\r\nexport {\r\n    cacheStory,\r\n    downloadImages,\r\n    cacheChapter,\r\n    get_continue,\r\n    set_continue\r\n}","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import './ListItemOptions.css'\r\nimport SVGIcon from '../SvgIcons/SvgIcons';\r\nclass ChapterListItemOptions extends Component{\r\n    _onDelete = null;\r\n    _onOpen = null;\r\n    _onDownload = null;\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            show: false,\r\n            value: \"\",\r\n            title: \"\",\r\n            url: \"\",\r\n            cardClass: \"translateY(100%) translateZ(0px)\",\r\n            bgClass: 0,\r\n            showDeleteBotton: true\r\n        };\r\n    }\r\n\r\n\r\n    show = (params) => {\r\n        document.addEventListener('backbutton', this.hide, false);\r\n        this.setState({\r\n            show: true,\r\n            ...params\r\n        }, () => {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    cardClass: \"translateY(0%) translateZ(0px)\",\r\n                    bgClass: 1\r\n                });\r\n            }, 10);\r\n        });\r\n    }\r\n\r\n\r\n    hide = () => {\r\n        document.removeEventListener('backbutton', this.hide);\r\n\r\n        this.setState({\r\n            cardClass: \"translateY(100%) translateZ(0px)\",\r\n            bgClass: 0\r\n        }, () => {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    show: false,\r\n                    value: \"\",\r\n                    title: \"\"\r\n                });\r\n            }, 300)\r\n        })\r\n\r\n        \r\n    }\r\n\r\n    setShowDeleteButton = (val) => {\r\n        this.setState({\r\n            showDeleteBotton: val\r\n        });\r\n        return this;\r\n    }\r\n\r\n    setOnDelete = (fn) => {\r\n        if(typeof fn === 'function')\r\n            this._onDelete = fn;\r\n\r\n        return this;\r\n    }\r\n\r\n    setOnDownload = (fn) => {\r\n        if(typeof fn === 'function')\r\n            this._onDownload = fn;\r\n\r\n        return this;\r\n    }\r\n\r\n    setOnOpen = (fn) => {\r\n        if(typeof fn === 'function')\r\n            this._onOpen = fn;\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    onDelete = () => {\r\n        if(typeof this._onDelete === 'function'){\r\n            this._onDelete();\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    onOpen = () => {\r\n        if(typeof this._onOpen === 'function'){\r\n            this._onOpen();\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    onDownload = () => {\r\n        if(typeof this._onDownload === 'function'){\r\n            this._onDownload();\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n\r\n\r\n    render(){\r\n        return ReactDOM.createPortal(\r\n            (\r\n                this.state.show ?\r\n                <div className=\"lio-con\">\r\n                    <div    className=\"lio-bg\" \r\n                            onClick={this.hide}\r\n                            style={{\r\n                                opacity: this.state.bgClass\r\n                            }}></div>\r\n                    <div    className=\"lio-card\" \r\n                            style={{\r\n                                transform: this.state.cardClass\r\n                            }}>\r\n                        <div className=\"lio-head\">\r\n                            <div className=\"lio-head-title\">\r\n                                <div>{this.state.title}</div>\r\n                                {/* <div className=\"lio-h-from\">\r\n                                    {this.state.url}\r\n                                </div> */}\r\n                            </div>\r\n                        </div>\r\n                        {/* <div className=\"lio-title\">\"{this.state.title}\"</div> */}\r\n                        <div className=\"lio-content lio-btns\">\r\n                            {/* <div className=\"lio-title\">\"{this.state.url}\"</div> */}\r\n                            <button onClick={this.onOpen}>\r\n                                <div className=\"lio-btn-ico\">\r\n                                    <SVGIcon name=\"list\" fill=\"#777\"/>\r\n                                </div>\r\n                                \r\n                                <div>Open Chapter</div>\r\n                            </button>\r\n\r\n                            {\r\n                                !this.state.showDeleteBotton &&\r\n                                <button onClick={this.onDownload}>\r\n                                    <div className=\"lio-btn-ico\">\r\n                                        <SVGIcon name=\"cloud_download\" fill=\"#777\"/>\r\n                                    </div>\r\n                                    \r\n                                    <div>Download Chapter</div>\r\n                                </button>\r\n                            }\r\n                        \r\n                            {\r\n                                this.state.showDeleteBotton &&\r\n                                <button onClick={this.onDelete}>\r\n                                    <div className=\"lio-btn-ico\">\r\n                                        <SVGIcon name=\"delete\" fill=\"#777\"/>\r\n                                    </div>\r\n                                    \r\n                                    <div>Delete Downloaded Chapter</div>\r\n                                </button>\r\n                            }\r\n\r\n                            <button onClick={this.hide}>\r\n                                <div className=\"lio-btn-ico\">\r\n                                    <SVGIcon name=\"close\" fill=\"#777\"/>\r\n                                </div>\r\n                                \r\n                                <div>Close</div>\r\n                            </button>\r\n                         \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                :\r\n                <React.Fragment></React.Fragment>\r\n            ),\r\n                document.body\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default ChapterListItemOptions;","import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\n// import './ListItemOptions.css'\r\nimport SVGIcon from '../SvgIcons/SvgIcons';\r\n\r\nclass ConfirmModal extends Component{\r\n    _onOpen = null;\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            show: false,\r\n            value: \"\",\r\n            title: \"\",\r\n            url: \"\",\r\n            cardClass: \"translateY(100%) translateZ(0px)\",\r\n            bgClass: 0,\r\n            buttons: []\r\n        };\r\n    }\r\n\r\n\r\n    show = (params) => {\r\n        document.addEventListener('backbutton', this.hide, false);\r\n        this.setState({\r\n            show: true,\r\n            ...params\r\n        }, () => {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    cardClass: \"translateY(0%) translateZ(0px)\",\r\n                    bgClass: 1\r\n                });\r\n            }, 10);\r\n        });\r\n        return this;\r\n    }\r\n\r\n\r\n    hide = () => {\r\n        document.removeEventListener('backbutton', this.hide);\r\n\r\n        this.setState({\r\n            cardClass: \"translateY(100%) translateZ(0px)\",\r\n            bgClass: 0\r\n        }, () => {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    show: false,\r\n                    value: \"\",\r\n                    title: \"\",\r\n                    buttons: []\r\n                });\r\n            }, 300)\r\n        })\r\n\r\n        return this;\r\n    }\r\n\r\n\r\n    setOnOpen = (fn) => {\r\n        if(typeof fn === 'function')\r\n            this._onOpen = fn;\r\n\r\n        return this;\r\n    }\r\n\r\n    onOpen = () => {\r\n        if(typeof this._onOpen === 'function'){\r\n            this._onOpen();\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n    render(){\r\n        return ReactDOM.createPortal(\r\n            (\r\n                this.state.show ?\r\n                <div className=\"lio-con\">\r\n                    <div    className=\"lio-bg\" \r\n                            onClick={this.hide}\r\n                            style={{\r\n                                opacity: this.state.bgClass\r\n                            }}></div>\r\n                    <div    className=\"lio-card\" \r\n                            style={{\r\n                                transform: this.state.cardClass\r\n                            }}>\r\n                        <div className=\"lio-head\">\r\n                            <div className=\"lio-head-title\">\r\n                                <div>{this.state.title}</div>\r\n                                {/* <div className=\"lio-h-from\">\r\n                                    {this.state.url}\r\n                                </div> */}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"lio-content lio-btns\">\r\n\r\n                            {\r\n                                this.state.buttons.map((item, index) => {\r\n                                    return(\r\n                                        <button onClick={(e) => {\r\n                                            if(typeof item.onClick === 'function') item.onClick(e, this);\r\n                                            this.hide();\r\n                                        }} key={index}>\r\n                                            <div className=\"lio-btn-ico\">\r\n                                                <SVGIcon name={item.iconName} fill=\"#777\"/>\r\n                                            </div>\r\n                                            \r\n                                            <div>{item.text}</div>\r\n                                        </button>\r\n                                    );\r\n                                })\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                :\r\n                <React.Fragment></React.Fragment>\r\n            ),\r\n                document.body\r\n        );\r\n    }\r\n}\r\n\r\n\r\n\r\nexport default ConfirmModal;","import React, { useState, useEffect } from 'react';\r\nimport customEvents from '../../models/customEvents';\r\nimport SVGIcon from '../SvgIcons/SvgIcons';\r\nimport tbl_recents from '../../models/tbl_recents';\r\nimport tbl_dl_chaps from '../../models/tbl_dl_chaps';\r\nimport tbl_img_cache from '../../models/tbl_img_cache';\r\nimport { cacheChapter } from '../../models/story-downloader';\r\nimport ConfirmModal from '../ConfirmModal/ConfirmModal';\r\nimport { set_continue, get_continue } from '../../models/story-downloader';\r\n\r\nconst ChapterItem = (props) => {\r\n    let item = props.item;\r\n    let context = props.context;\r\n    let index = props.index;\r\n    let CMRef = React.createRef(); \r\n\r\n    let url = `/chapter?url=${encodeURIComponent(item.url)}`;\r\n\r\n    const [isDownloaded, setIsDownloaded] = useState(false);\r\n    const [isDownloading, setIsDownloading] = useState(false);\r\n    const [percent, setPercent] = useState(0);\r\n\r\n    const onOpen = () => {\r\n        \r\n        window.history.pushState({\r\n            chapterList: [...context.state.chapters].reverse(),\r\n            currentChapter: item,\r\n            currentIndex: index,\r\n            storyTitle: context.state.title,\r\n            cover: context.state.raw_cover\r\n        }, \"\", url);\r\n        customEvents.emit('pushstate');\r\n        tbl_recents.add({\r\n            ...item,\r\n            storyTitle: context.state.title,\r\n            cover: context.state.raw_cover\r\n        });\r\n    }\r\n\r\n\r\n    const onDlChapDone = ({url, mode}) => {\r\n        if(url === item.url){\r\n            let _mode = true;\r\n            if(mode === false){\r\n                _mode = false;\r\n            }\r\n            setIsDownloaded(_mode);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        customEvents.on(\"dl.chap.done\", onDlChapDone);\r\n        (async () => {\r\n            let exist = await tbl_dl_chaps.get(item.url)\r\n\r\n            if(exist){\r\n                setIsDownloaded(true);\r\n            }else{\r\n                setIsDownloaded(false);\r\n            }\r\n        })();\r\n\r\n\r\n        return(() => {\r\n            customEvents.off(\"dl.chap.done\", onDlChapDone);\r\n        });\r\n        \r\n    },[]);\r\n\r\n\r\n    return(\r\n        <React.Fragment>\r\n            <div    key={index} \r\n                    className=\"si2-con\" \r\n                    onClick={(e) => {\r\n                        console.log(\"fired a.onClick: \", e.target.outerHTML);\r\n                        onOpen();\r\n                        e.preventDefault();\r\n                    }}\r\n                    onContextMenu={(e) => {\r\n                        e.preventDefault();\r\n                        context.CLIORef.current\r\n                        .setShowDeleteButton(isDownloaded)\r\n                        .setOnOpen(() => {\r\n                            setTimeout(() => {\r\n                                onOpen();\r\n                            }, 350);\r\n                        })\r\n                        .setOnDownload(() => {\r\n                            // tbl_img_cache.\r\n                            if(get_continue() === false){\r\n                                set_continue(true);\r\n                            }\r\n                            setIsDownloading(true);\r\n                            cacheChapter(item.url)\r\n                            .setOnProgress((index, total, url) => {\r\n                                let _per = Math.floor((index / total) * 100);\r\n                                console.log(\"_per: \", _per);\r\n                                setPercent(_per);\r\n                            })\r\n                            .then(() => {\r\n                                tbl_dl_chaps.add(item.url, item.title);\r\n                                setIsDownloaded(true);\r\n                                setIsDownloading(false);\r\n                            })\r\n                            .catch(() => {\r\n                                setIsDownloading(false);\r\n                            });\r\n                        })\r\n                        .setOnDelete(async () => {\r\n                            /**DELETE DOWNLOADED CHAPTER */\r\n                            // alert(\"Delete Action\");\r\n\r\n                            const delAction = async () => {\r\n                                await tbl_dl_chaps.deleteSingle(item.url);\r\n                                let deleted = await tbl_img_cache.deleteByChapter(item.url);\r\n                                console.log(\"deleted: \", deleted);\r\n                                setIsDownloaded(false);\r\n                                context.snackRef.current.show({\r\n                                    message: \"Successfully Deleted \" + item.title,\r\n                                    mode: \"success\"\r\n                                });\r\n                            }\r\n\r\n                            CMRef.current.show({\r\n                                title: `Delete \"${item.title}\" from downloads?`,\r\n                                buttons: [\r\n                                    {\r\n                                        text: \"YES\",\r\n                                        iconName: \"delete\",\r\n                                        onClick: (e) => {\r\n                                            // e.preventDefault();\r\n                                            delAction();\r\n                                        },\r\n\r\n                                    },\r\n                                    {\r\n                                        text: \"NO\",\r\n                                        iconName: \"close\",\r\n                                        onClick: (e) => {\r\n                                            console.log(\"NO\");\r\n                                        }\r\n                                    }\r\n                                ]\r\n                            })\r\n\r\n                            \r\n                        })\r\n                        .show({\r\n                            title: item.title,\r\n                            url: item.url\r\n                        });\r\n                    }}>\r\n                <div style={{flex: 1, textAlign: 'left'}}>\r\n                    <div className=\"si2-title noselect\">{item.title}</div>\r\n                    <div className=\"si2-date noselect\">{context.getDayName(item.date)}</div>\r\n                    {\r\n                        isDownloaded &&\r\n                        <div className=\"si2-dl-lbl noselect\">Downloaded</div>\r\n                    }\r\n                </div>\r\n                <div className=\"sp2-item-number noselect\">\r\n                    #{Number(context.state.chapters.length - index).toLocaleString()}\r\n                </div>\r\n\r\n                {\r\n                    isDownloading &&\r\n                    <div className=\"ci-dl-prog-con\">\r\n                        <div className=\"ci-dl-prog-bar\" style={{width: `${percent}%`}}></div>\r\n                        <div className=\"ci-dl-prog-bar-lbl\">\r\n                            {percent}%\r\n                        </div>\r\n                    </div>\r\n                }\r\n                \r\n                <SVGIcon name=\"arrow_forward_ios\" fill=\"#AAA\" size={16}/>\r\n                \r\n            </div>\r\n            <ConfirmModal ref={CMRef}/>\r\n        </React.Fragment>\r\n    );\r\n}\r\n\r\nexport default ChapterItem;","import React, {Component } from 'react';\r\nimport './StoryPage2.css';\r\n// import CoverImage from '../../components/CoverImage/CoverImage';\r\nimport { getStoryDetails, getImageBlob } from '../../models/story-model';\r\nimport SVGIcon from '../../components/SvgIcons/SvgIcons';\r\nimport customEvents from '../../models/customEvents';\r\nimport tbl_stories from '../../models/tbl_stories';\r\nimport Snackbar from '../../components/Snackbar/Snackbar';\r\nimport tbl_recents from '../../models/tbl_recents';\r\nimport tbl_img_cache from '../../models/tbl_img_cache';\r\nimport tbl_dl_chaps from '../../models/tbl_dl_chaps';\r\nimport { cacheStory, set_continue, get_continue } from '../../models/story-downloader';\r\nimport ChapterListItemOptions from '../../components/ChapterListItemOptions/ChapterListItemOptions';\r\nimport ChapterItem from '../../components/ChapterItem/ChapterItem';\r\nimport loading64 from '../../models/loading64';\r\nimport ConfirmModal from '../../components/ConfirmModal/ConfirmModal';\r\nimport DELAY from '../../models/delay';\r\n\r\nclass StoryPage2 extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            show: false,\r\n            chapters: [],\r\n            isLoading: false,\r\n            title: \"Loading Story\",\r\n            cover: null,\r\n            info: {},\r\n            url: null,\r\n            showAddButton: false,\r\n            raw_cover: \"\",\r\n            coverWindowHeight: 272,\r\n            disableDlBtn: false\r\n        };\r\n\r\n        this.contentRef = React.createRef();\r\n        this.snackRef = React.createRef();\r\n        this.CLIORef = React.createRef();\r\n        this.CMRef = React.createRef(); \r\n    }\r\n\r\n\r\n    componentDidMount = () => {\r\n        (async () => {\r\n            await DELAY(300);\r\n            this.checkIfExistOnTheDatabase();\r\n            if(window.history.state){\r\n                if(window.history.state.storyData){\r\n                    let { title, url, info_json, description } = window.history.state.storyData;\r\n                    let cover = window.history.state.cover_base64;\r\n                    this.setState(\r\n                        {\r\n                            title,\r\n                            cover,\r\n                            url,\r\n                            info: JSON.parse(info_json),\r\n                            description,\r\n                            raw_cover: window.history.state.storyData.cover\r\n                        },\r\n                        () => {\r\n\r\n                            (async () => {\r\n                                if(String(cover).match(loading64) || cover === null){\r\n                                    let blob = await getImageBlob(window.history.state.storyData.cover);\r\n                                    this.setState({\r\n                                        cover: blob,\r\n                                        raw_cover: window.history.state.storyData.cover\r\n                                    }, () => {\r\n                                        \r\n                                    });\r\n                                }\r\n                            })()\r\n                            // console.log(this.state);\r\n                            // console.log(String(cover).match(/\\/loading.svg$/));\r\n                            console.log(\"raw cover: \", this.state.raw_cover);\r\n                        }\r\n                    );\r\n                }\r\n            }\r\n\r\n            this.loadStory();\r\n        })();\r\n    }\r\n\r\n    checkIfExistOnTheDatabase = () => {\r\n        let url = (new URL(window.location.href)).searchParams.get(\"url\");\r\n        console.log(url);\r\n        tbl_stories.getStoriesByURL(url)\r\n        .then((result) => {\r\n            if(result.length > 0){\r\n                this.setState({\r\n                    showAddButton: false\r\n                });\r\n            }else{\r\n                this.setState({\r\n                    showAddButton: true\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n    loadStory = () => {\r\n        this.setState({\r\n            isLoading: true,\r\n        }, async () => {\r\n            let url =  new URL(window.location.href).searchParams.get(\"url\");\r\n            \r\n            getStoryDetails(url)\r\n            .then(data => {\r\n                console.log(\"url: \", url);\r\n                if(data.status === 500) return;\r\n\r\n                tbl_img_cache.add(url, data);\r\n                // if(this.state.show === false) return;\r\n                // alert(JSON.stringify(data.chapters));\r\n                // console.log(data);\r\n                this.setState({\r\n                    chapters: data.chapters,\r\n                    isLoading: false,\r\n                    info: data.storyInfo\r\n                }, () => {\r\n                    if(!window.history.state){\r\n                        this.setState({\r\n                            title: data.title,\r\n                            url: data.url,\r\n                            raw_cover: data.cover,\r\n                            info: data.storyInfo,\r\n                            description: data.description\r\n                        },async () => {\r\n                            // console.log(String(this.state.cover).match(/\\/loading.svg$/));\r\n                            if(String(this.state.cover).match(loading64) || this.state.cover === null){\r\n                                let blob = await getImageBlob(data.cover);\r\n                                this.setState({\r\n                                    cover: blob\r\n                                },() => {\r\n                                    console.log(\"raw cover: \", this.state.raw_cover);\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                // alert(err);\r\n                fallback();\r\n            });\r\n\r\n\r\n            const fallback = async () => {\r\n                let data = await tbl_img_cache.get(url);\r\n                if(!data) return;\r\n                this.setState({\r\n                    chapters: data.chapters,\r\n                    isLoading: false,\r\n                    info: data.storyInfo\r\n                }, () => {\r\n                    if(!window.history.state){\r\n                        this.setState({\r\n                            title: data.title,\r\n                            url: data.url,\r\n                            raw_cover: data.cover,\r\n                            info: data.storyInfo,\r\n                            description: data.description\r\n                        },async () => {\r\n                            // console.log(String(this.state.cover).match(/\\/loading.svg$/));\r\n                            if(String(this.state.cover).match(loading64) || this.state.cover === null){\r\n                                let blob = await getImageBlob(data.cover);\r\n                                this.setState({\r\n                                    cover: blob\r\n                                },() => {\r\n                                    console.log(\"raw cover: \", this.state.raw_cover);\r\n                                });\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    /**\r\n     * \r\n     * @param {string} txt \r\n     */\r\n    getLimitChars = (txt) => {\r\n        if(txt.length > 75)\r\n            return `${txt.substr(0, 75)}...`;\r\n        else    \r\n            return txt;\r\n    }\r\n\r\n\r\n    gotoInfoPage = () => {\r\n        let url = `/story-info`;\r\n        window.history.pushState({\r\n            title: this.state.title,\r\n            info: this.state.info,\r\n            description: this.state.description,\r\n            url: this.state.url,\r\n            cover: this.state.cover,\r\n            raw_cover: this.state.raw_cover\r\n        }, \"\", url);\r\n        customEvents.emit('pushstate');\r\n    }\r\n\r\n\r\n    getDayName = (date) => {\r\n        // var weekday = new Array(7);\r\n        // weekday[0] = \"Sun\";\r\n        // weekday[1] = \"Mon\";\r\n        // weekday[2] = \"Tue\";\r\n        // weekday[3] = \"Wed\";\r\n        // weekday[4] = \"Thu\";\r\n        // weekday[5] = \"Fri\";\r\n        // weekday[6] = \"Sat\";\r\n\r\n        if(date.match(/([0-9]+ \\w+ [0-9]+|\\w [0-9]+, [0-9]+)/g)){\r\n            // let day = weekday[new Date(date).getDay()];\r\n            // return `(${day})`;\r\n            return new Date(date).toDateString();\r\n        }else{\r\n            return date;\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"sp2-con\">\r\n                <div className=\"sp2-cover-holder\" >\r\n                    {\r\n                        this.state.cover &&\r\n                        <React.Fragment>\r\n                            <img    src={this.state.cover}\r\n                                    className=\"sp2-cover-bg\"\r\n                                    alt=\"cover\"/>\r\n                            <div className=\"sp2-cp-con\">\r\n                                <img    src={this.state.cover}\r\n                                        className=\"sp2-cover-pic\"\r\n                                        alt=\"cover\"/>\r\n                            </div>\r\n                        </React.Fragment>\r\n                    }\r\n                </div>\r\n                <div className=\"sp2-nav\">\r\n                    <button className=\"hp2-h-btn\" onClick={() => {\r\n                        window.history.back();\r\n\r\n                        // if(document.referrer !== ''){\r\n                        //     window.history.back();\r\n                        // }else{\r\n                        //     window.history.replaceState({}, \"\", '/');\r\n                        //     window.location.reload();\r\n                        // }\r\n                    }}\r\n                    title=\"Back to List\">\r\n                        <SVGIcon name=\"arrow_back\" fill=\"#fff\"/>\r\n                    </button>\r\n\r\n                    <div style={{flex: 1}}></div>\r\n\r\n                    {\r\n                        !this.state.isLoading &&\r\n                        (\r\n                            this.state.showAddButton &&\r\n                            <button className=\"hp2-h-btn\" onClick={(e) => {\r\n                                e.target.disabled = true;\r\n                                tbl_stories.addStory({\r\n                                    title: this.state.title,\r\n                                    url: this.state.url,\r\n                                    cover: this.state.raw_cover,\r\n                                    description: this.state.description,\r\n                                    info_json: JSON.stringify(this.state.info)\r\n                                })\r\n                                .then((data) => {\r\n                                    console.log(data);\r\n                                    this.setState({\r\n                                        showAddButton: false\r\n                                    });\r\n                                    this.snackRef.current.show({\r\n                                        message: \"Successfully Added to List\",\r\n                                        mode: \"success\"\r\n                                    });\r\n                                    customEvents.emit(\"url.added\", null);\r\n                                })\r\n                                .catch((err) => {\r\n                                    console.log(err);\r\n                                    this.setState({\r\n                                        showAddButton: true\r\n                                    });\r\n                                });\r\n                            }}\r\n                            title=\"Add Story to List\"\r\n                            style={{\r\n                                position: 'relative',\r\n                                overflow: 'visible'\r\n                            }}>\r\n                                <SVGIcon name=\"add\" fill=\"#fff\"/>\r\n                                {/* Add To List */}\r\n                                {\r\n                                    !this.state.isLoading &&\r\n                                    (\r\n                                        this.state.showAddButton &&\r\n                                        <div className=\"pop-add-to-list\">Add to List</div>\r\n                                    )\r\n\r\n                                }\r\n                            </button>\r\n                        )\r\n                    }\r\n                    {\r\n                        !this.state.isLoading && (\r\n                            <button className=\"hp2-h-btn\"\r\n                                    title=\"Download Story\"\r\n                                    disabled={this.state.disableDlBtn}\r\n                                    onClick={() => {\r\n\r\n                                        const startDownload = async () => {\r\n                                            if(get_continue() === false){\r\n                                                set_continue(true);\r\n                                            }\r\n                                            customEvents.emit(\"dl.show\", null);\r\n    \r\n                                            this.setState({\r\n                                                disableDlBtn: true\r\n                                            });\r\n                                            // tbl_dl_chaps\r\n    \r\n                                            cacheStory(this.state.url)\r\n                                            .onReceiveDetails((data) => {\r\n                                                customEvents.emit(\"dl.receive.story\", data);\r\n                                            })\r\n                                            .setOnProgress((url, chapTitle, indx, tot, stat) => {\r\n                                                if(stat){\r\n                                                    tbl_dl_chaps.add(url, chapTitle);\r\n                                                    customEvents.emit('dl.chap.done', {url, chapTitle, indx, tot, stat});\r\n                                                }\r\n                                            })\r\n                                            .setOnChapterProgress((index, total, chapTitle, chapUrl, imgUrl) => {\r\n                                                customEvents.emit('dl.img.prog', {index, total, chapTitle, chapUrl, imgUrl});\r\n                                            })\r\n                                            .then((res) => {\r\n                                                \r\n                                                customEvents.emit('dl.progress', {\r\n                                                    message: res.message === \"Stopped\" ? res.message : \"Downloaded All Chapters\",\r\n                                                    mode: \"success\"\r\n                                                });\r\n                                                this.setState({\r\n                                                    disableDlBtn: false\r\n                                                });\r\n                                                customEvents.emit(\"dl.hide\", null);\r\n                                            })\r\n                                        }\r\n\r\n                                        this.CMRef.current.show({\r\n                                            title: `Download All Chapters?`,\r\n                                            buttons: [\r\n                                                {\r\n                                                    text: \"YES\",\r\n                                                    iconName: \"cloud_download\",\r\n                                                    onClick: (e) => {\r\n                                                        startDownload();\r\n                                                    },\r\n            \r\n                                                },\r\n                                                {\r\n                                                    text: \"CANCEL\",\r\n                                                    iconName: \"close\",\r\n                                                    onClick: (e) => {\r\n                                                        console.log(\"NO\");\r\n                                                    }\r\n                                                }\r\n                                            ]\r\n                                        })\r\n                                    }}>\r\n                                <SVGIcon name=\"cloud_download\" fill=\"#fff\"/>\r\n                            </button>\r\n                        )\r\n                    }\r\n\r\n{\r\n                        !this.state.isLoading && (\r\n                            <button className=\"hp2-h-btn\"\r\n                                    title=\"Delete Story Caches\"\r\n                                    disabled={this.state.disableDlBtn}\r\n                                    onClick={() => {\r\n\r\n                                        this.CMRef.current.show({\r\n                                            title: `Delete all saved chapters?`,\r\n                                            buttons: [\r\n                                                {\r\n                                                    text: \"YES\",\r\n                                                    iconName: \"delete\",\r\n                                                    onClick: (e) => {\r\n                                                        // e.preventDefault();\r\n                                                        tbl_img_cache.deleteByStory(this.state.url)\r\n                                                        .then((res) => {\r\n                                                            console.log(res);\r\n                                                            customEvents.emit('dl.progress', {\r\n                                                                message: \"Deleted Story Caches Successfully\",\r\n                                                                mode: \"success\"\r\n                                                            });\r\n                                                        });\r\n                                                    },\r\n            \r\n                                                },\r\n                                                {\r\n                                                    text: \"NO\",\r\n                                                    iconName: \"close\",\r\n                                                    onClick: (e) => {\r\n                                                        console.log(\"NO\");\r\n                                                    }\r\n                                                }\r\n                                            ]\r\n                                        })\r\n\r\n                                        \r\n                                    }}>\r\n                                <SVGIcon name=\"delete\" fill=\"#fff\"/>\r\n                            </button>\r\n                        )\r\n                    }\r\n                    {/* <button className=\"hp2-h-btn\"\r\n                            title=\"More Options\">\r\n                        <SVGIcon name=\"more_vert\" fill=\"#fff\"/>\r\n                    </button> */}\r\n                </div>\r\n                <div className=\"sp2-content-holder\">\r\n                    <div className=\"sp2-cover-window\" style={{\r\n                        height: this.state.coverWindowHeight\r\n                    }}>\r\n                        <div className=\"sp2-title\"\r\n                                onClick={this.gotoInfoPage}>\r\n                            {this.state.title}\r\n                        </div>\r\n                        <div className=\"sp2-src-site\">\r\n                            From: \r\n                            <a href={this.state.url} onClick={(e) => {\r\n                                e.preventDefault();\r\n                                window.open(this.state.url);\r\n                            }}>\r\n                                <strong>\r\n                                    {\r\n                                        this.state.url &&\r\n                                        (() => {\r\n                                            let hostname = new URL(this.state.url).hostname;\r\n                                            return <span>{hostname}</span>\r\n                                        })()\r\n                                    }\r\n                                </strong>\r\n                            </a>\r\n                        </div>\r\n\r\n                        <div    className=\"sp2-desc\"\r\n                                onClick={this.gotoInfoPage}>\r\n                            {this.getLimitChars(this.state.description || '')}\r\n                        </div>\r\n\r\n                        {\r\n                            this.state.chapters.length > 0 &&\r\n                            <React.Fragment>\r\n                                <div className=\"sp2-top-btns\">\r\n                                    <button className=\"btn-re1\" \r\n                                            onClick={() => {\r\n                                                console.log(this.state);\r\n                                                let item = this.state.chapters[this.state.chapters.length - 1];\r\n                                                let url = `/chapter?url=${encodeURIComponent(item.url)}`;\r\n                                                window.history.pushState({\r\n                                                    chapterList: [...this.state.chapters].reverse(),\r\n                                                    currentChapter: item,\r\n                                                    currentIndex: this.state.chapters.length - 1,\r\n                                                    storyTitle: this.state.title,\r\n                                                    cover: this.state.raw_cover\r\n                                                }, \"\", url);\r\n                                                customEvents.emit('pushstate');\r\n                                                tbl_recents.add({\r\n                                                    ...item,\r\n                                                    storyTitle: this.state.title,\r\n                                                    cover: this.state.raw_cover\r\n                                                });\r\n                                            }}>\r\n                                        Read First Chapter\r\n                                    </button>\r\n                                    \r\n                                    <button className=\"btn-re1\" \r\n                                            onClick={() => {\r\n                                                console.log(this.state);\r\n                                                let item = this.state.chapters[0];\r\n                                                let url = `/chapter?url=${encodeURIComponent(item.url)}`;\r\n                                                window.history.pushState({\r\n                                                    chapterList: [...this.state.chapters].reverse(),\r\n                                                    currentChapter: item,\r\n                                                    currentIndex: 0,\r\n                                                    storyTitle: this.state.title,\r\n                                                    cover: this.state.raw_cover\r\n                                                }, \"\", url);\r\n                                                customEvents.emit('pushstate');\r\n                                                tbl_recents.add({\r\n                                                    ...item,\r\n                                                    storyTitle: this.state.title,\r\n                                                    cover: this.state.raw_cover\r\n                                                });\r\n                                            }}>\r\n                                        Read Last Chapter\r\n                                    </button>\r\n                                </div>\r\n                            </React.Fragment>\r\n                        }\r\n                    </div>\r\n                    <div className=\"sp2-content noselect\" ref={this.contentRef} style={{\r\n                        minHeight: window.innerHeight - (this.state.coverWindowHeight + 56)\r\n                    }}>\r\n                        <h3>Chapters</h3>\r\n                        {\r\n                            this.state.isLoading ?\r\n                            <React.Fragment>\r\n                                <img src={loading64} alt=\"loading\"/>\r\n                                {/* <div style={{height: 1000}}></div> */}\r\n                            </React.Fragment>\r\n                            :\r\n                            this.state.chapters.map((item, index) => {\r\n                                return <ChapterItem item={item} index={index} context={this} key={index}/>\r\n                            })\r\n                        }\r\n                    </div>\r\n                </div>\r\n                <Snackbar ref={this.snackRef}/>\r\n                <ChapterListItemOptions ref={this.CLIORef}/>\r\n                <ConfirmModal ref={this.CMRef}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default StoryPage2;","import React from 'react';\r\nimport './LogoLoading.css';\r\nimport erl_logo64 from '../../models/erl-logo64';\r\n\r\nfunction LogoLoading(props){\r\n    return(\r\n        <div className=\"logo-loading-con\" style={props.style}>\r\n            <img src={erl_logo64} alt=\"logo-loading\"/>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default LogoLoading;","import React from 'react';\r\n// import CoverImage from '../CoverImage/CoverImage';\r\nimport { getImageBlob } from '../../models/story-model';\r\nimport tbl_img_cache from '../../models/tbl_img_cache';\r\n\r\nexport default class ImageOneByOneArr extends React.Component{\r\n\r\n    state = {\r\n        loadingURL: window.base_url + \"loading.svg\",\r\n        isActive: false\r\n    }\r\n\r\n    isActive = false\r\n\r\n    componentDidMount = () => {\r\n        this.isActive = true;\r\n        this.loadImages();\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.isActive = false;\r\n    }\r\n\r\n    loadImages = async () => {\r\n        \r\n        try{\r\n            for(let i=0; i<this.props.list.length; i++){\r\n                if(this.isActive === false) break;\r\n                let currentURL = this.props.list[i];\r\n\r\n                \r\n                console.log(\"currentURL\", currentURL);\r\n\r\n                let data = await tbl_img_cache.get(currentURL);\r\n                if(data){\r\n                    console.log(\"** from cache **\");\r\n                    if(this.isActive === false) return;\r\n                    console.log(\"Done!\" , this.isActive);\r\n                    let target = document.querySelector(`img[data-src=\"${currentURL}\"]`);\r\n                    if(target) target.src = data;\r\n                }else{\r\n                    await getImageBlob(currentURL)\r\n                    .then((data) => {\r\n                        // tbl_img_cache.add(currentURL, data);\r\n                        if(this.isActive === false) return;\r\n                        console.log(\"Done!\" , this.isActive);\r\n                        let target = document.querySelector(`img[data-src=\"${currentURL}\"]`);\r\n                        if(target) target.src = data;\r\n                    })\r\n                    .catch((data) => {\r\n                        if(this.isActive === false) return;\r\n                        let target = document.querySelector(`img[data-src=\"${currentURL}\"]`);\r\n                        \r\n                        if(target) target.src = data;\r\n                    })\r\n                }\r\n\r\n                \r\n            }\r\n        }catch(err){\r\n            throw err;\r\n        }\r\n\r\n        \r\n        // (async () => {\r\n        // })();\r\n        \r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <React.Fragment>\r\n                {\r\n                    this.props.list &&\r\n                    this.props.list.map((item, index) => {\r\n                        return(\r\n                            <img    src={this.state.loadingURL} \r\n                                    alt={this.props.alt || \"Image Here\"} \r\n                                    className={this.props.className}\r\n                                    data-src={item}\r\n                                    key={index}/>\r\n                        );\r\n                    })\r\n                }\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}","import React, { Component } from 'react';\r\nimport './ChapterPage2.css'\r\nimport SVGIcon from '../../components/SvgIcons/SvgIcons';\r\nimport { getChapterImages, getStoryDetails } from '../../models/story-model';\r\nimport CoverImage from '../../components/CoverImage/CoverImage';\r\nimport LogoLoading from '../../components/LogoLoading/LogoLoading';\r\nimport tbl_recents from '../../models/tbl_recents';\r\nimport ImageOneByOneArr from '../../components/ImageOneByOneArr/ImageOneByOneArr';\r\nimport LIS from '../../models/load-images-sync-event';\r\nimport tbl_img_cache from '../../models/tbl_img_cache';\r\nimport DELAY from '../../models/delay';\r\n\r\nclass ChapterPage2 extends Component{\r\n\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            title: 'Loading Chapter',\r\n            url: null,\r\n            date: null,\r\n            chapterList: [],\r\n            currentIndex: 0,\r\n            images: [],\r\n            showNav: true,\r\n            isLoading: false,\r\n            currentChapter: null,\r\n            storyTitle: \"\",\r\n            cover: null,\r\n            imgLoadAll: Boolean(LIS.getState())\r\n        };\r\n\r\n\r\n        this.pgCon = React.createRef();\r\n\r\n        this.chapterPrevIndex = null;\r\n        this.chapterNextIndex = null;\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        \r\n        (async () => {\r\n            await DELAY(300);\r\n            if(window.history.state){\r\n                this.loadDataFromHistory();\r\n            }else{\r\n                this.loadDataFromHref();\r\n            }\r\n            this.pgCon.current.addEventListener('scroll', this.onScroll);\r\n        })();\r\n        \r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        this.pgCon.current.removeEventListener('scroll', this.onScroll);\r\n    }\r\n\r\n    onScroll = (e) => {\r\n        // this.animID && window.cancelAnimationFrame(this.animID);\r\n        // console.log(`${e.target.scrollTop} / ${e.target.clientHeight} / ${e.target.scrollTop + e.target.clientHeight} / ${e.target.scrollHeight}`);\r\n        let currentPos = e.target.scrollTop + e.target.clientHeight;\r\n        // console.log(\"currentPos: \", currentPos);\r\n        if(this.state.showNav === true){\r\n            this.setState({\r\n                showNav: false\r\n            });\r\n        }\r\n\r\n        if(currentPos <= e.target.clientHeight || Math.ceil(currentPos) >= e.target.scrollHeight){\r\n            this.onReachEdge();\r\n        }\r\n        \r\n    }\r\n\r\n    onReachEdge = () => {\r\n        if(this.state.showNav === false){\r\n            this.setState({\r\n                showNav: true\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    scrollTimer = null;\r\n    scrollToTop = () => {\r\n        // this.smoothScroll(0, 700);\r\n        if(this.scrollTimer) clearInterval(this.scrollTimer);\r\n\r\n        // this.scrollTimer = setInterval(() => {\r\n        //     let targetPos = Math.floor(this.pgCon.current.scrollTop - (this.pgCon.current.scrollTop / 6));\r\n        //     this.pgCon.current.scrollTop = targetPos;\r\n\r\n        //     console.log(targetPos);\r\n        //     if(this.pgCon.current.scrollTop <= 0){\r\n        //         clearInterval(this.scrollTimer);\r\n        //     }\r\n\r\n        // }, 1000 / 60);\r\n\r\n        const looper = () => {\r\n            let targetPos = this.pgCon.current.scrollTop - (this.pgCon.current.scrollTop / 6);\r\n            if(targetPos < 1 && targetPos > 0){\r\n                targetPos = Math.floor(targetPos)\r\n            }\r\n            this.pgCon.current.scrollTop = targetPos;\r\n\r\n            console.log(targetPos);\r\n            if(this.pgCon.current.scrollTop > 0){\r\n                this.scrollTimer = window.requestAnimationFrame(looper);\r\n            }\r\n        }\r\n\r\n        this.scrollTimer = window.requestAnimationFrame(looper);\r\n    }\r\n\r\n\r\n    scrollToPosition = () => {\r\n        let target =  Math.round(this.pgCon.current.scrollTop + (window.screen.height * 0.75));\r\n        this.smoothScroll(target, 700);\r\n    }\r\n\r\n    onMouseDownImageCon = () => {\r\n        this.animID && window.cancelAnimationFrame(this.animID);\r\n        this.scrollTimer && window.cancelAnimationFrame(this.scrollTimer);\r\n    }\r\n\r\n    animID = null;\r\n    smoothScroll = (targetPos, duration) => {\r\n        this.animID && window.cancelAnimationFrame(this.animID);\r\n        let targetPosition = targetPos;\r\n        let startingPosition =  this.pgCon.current.scrollTop;\r\n        let distance = targetPosition - startingPosition;\r\n        var startTime = null;\r\n        \r\n\r\n\r\n        let animation = (currentTime) => {\r\n            \r\n            if(startTime === null) startTime = currentTime;\r\n            let timeElapse = currentTime - startTime;\r\n            let run = Math.round(ease(timeElapse, startingPosition, distance, duration));\r\n            console.log(targetPos + \" / \" + run);\r\n            console.log(run);\r\n            this.pgCon.current.scrollTop = run;\r\n            if(timeElapse <= duration) {\r\n                this.animID = window.requestAnimationFrame(animation);\r\n            }\r\n            // if(run < targetPosition) {\r\n            //     this.animID = window.requestAnimationFrame(animation);\r\n            // }\r\n        }\r\n\r\n        function ease (t, b, c, d) {\r\n            return c * ( -Math.pow( 2, -10 * t/d ) + 1 ) + b;\r\n        };\r\n\r\n        window.requestAnimationFrame(animation);\r\n    }\r\n\r\n    getCurrentChapterIndex = (url, arrChaps) => {\r\n        // console.log(\"arrChaps: \", arrChaps);\r\n        return arrChaps.findIndex((item) => {\r\n            if(item.url.match(url)){\r\n                return true;\r\n            }else{\r\n                return false;\r\n            }\r\n        })\r\n    }\r\n\r\n    loadDataFromHref = () => {\r\n        let url = (new URL(window.location.href)).searchParams.get('url');\r\n        console.log(url);\r\n        let story_url = url.replace(/\\/[^/]+\\/?$/, '/');\r\n\r\n        this.setState({\r\n            isLoading: true,\r\n            // story_url: story_url,\r\n            images: []\r\n        });\r\n\r\n        getStoryDetails(story_url)\r\n        .then((data) => {\r\n            if(this.state.show === false ) return;\r\n            tbl_img_cache.add(story_url, data);\r\n            console.log(data);\r\n            data.chapters = data.chapters.reverse();\r\n            let chapterCurrentIndex = this.getCurrentChapterIndex(url, data.chapters);\r\n            let currentChapter = data.chapters[chapterCurrentIndex];\r\n\r\n            // console.log(chpIndx);\r\n            // this.sliverRef.current.setTitle(data[\"chapters\"][this.chapterCurrentIndex][\"title\"]);\r\n            this.setState({\r\n                currentChapter: currentChapter,\r\n                currentIndex: chapterCurrentIndex,\r\n                title: currentChapter.title,\r\n                url: currentChapter.url,\r\n                date: currentChapter.date,\r\n                chapterList: data.chapters,\r\n                storyTitle: data.title,\r\n                cover: data.cover\r\n            }, () => {\r\n                this.chapterPrevIndex = chapterCurrentIndex - 1;\r\n                this.chapterNextIndex = chapterCurrentIndex + 1;\r\n                this.loadImages();\r\n            });\r\n        })\r\n        .catch(async () => {\r\n            let data = await tbl_img_cache.get(story_url);\r\n            if(data){\r\n\r\n                data.chapters = data.chapters.reverse();\r\n                let chapterCurrentIndex = this.getCurrentChapterIndex(url, data.chapters);\r\n                let currentChapter = data.chapters[chapterCurrentIndex];\r\n    \r\n                // console.log(chpIndx);\r\n                // this.sliverRef.current.setTitle(data[\"chapters\"][this.chapterCurrentIndex][\"title\"]);\r\n                this.setState({\r\n                    currentChapter: currentChapter,\r\n                    currentIndex: chapterCurrentIndex,\r\n                    title: currentChapter.title,\r\n                    url: currentChapter.url,\r\n                    date: currentChapter.date,\r\n                    chapterList: data.chapters,\r\n                    storyTitle: data.title,\r\n                    cover: data.cover\r\n                }, () => {\r\n                    this.chapterPrevIndex = chapterCurrentIndex - 1;\r\n                    this.chapterNextIndex = chapterCurrentIndex + 1;\r\n                    this.loadImages();\r\n                });\r\n                \r\n            }\r\n        })\r\n    }\r\n\r\n    loadDataFromHistory = () => {\r\n        if(window.history.state){\r\n            if(window.history.state.currentChapter){\r\n                let _url = window.history.state.currentChapter.url;\r\n                let chapterList = [];\r\n                if(window.history.state.chapterList){\r\n                    chapterList = window.history.state.chapterList;\r\n                }\r\n\r\n                let currentIndex = 0;\r\n\r\n                if(typeof window.history.state.currentIndex === 'number'){\r\n                    currentIndex = this.getCurrentChapterIndex(_url ,chapterList);\r\n                    console.log(\"currentIndex: \", currentIndex);\r\n                }\r\n\r\n\r\n                this.chapterNextIndex = currentIndex + 1;\r\n                this.chapterPrevIndex = currentIndex - 1;\r\n\r\n                let {\r\n                    title,\r\n                    url,\r\n                    date\r\n                } = window.history.state.currentChapter;\r\n\r\n                this.setState({\r\n                    title,\r\n                    url,\r\n                    date,\r\n                    chapterList,\r\n                    currentIndex,\r\n                    currentChapter: window.history.state.currentChapter,\r\n                    storyTitle: window.history.state.storyTitle,\r\n                    cover: window.history.state.cover,\r\n                }, () => {\r\n                    this.loadImages(this.state.url);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n    loadImages = (url) => {\r\n        let _url = url;\r\n        if(!_url){\r\n            _url = (new URL(window.location.href)).searchParams.get('url');\r\n        }\r\n        this.setState({\r\n            isLoading: true\r\n        });\r\n        getChapterImages(_url)\r\n        .then((imageURLs) => {\r\n            // if(this.state.show === false ) return;\r\n            tbl_img_cache.add(_url, imageURLs);\r\n            this.setState({\r\n                isLoading: false,\r\n                images: imageURLs\r\n            }, () => {\r\n                // console.log(this.state.images);\r\n            });\r\n        }).catch(async () => {\r\n            let imageURLs = await tbl_img_cache.get(_url);\r\n            if(imageURLs){\r\n                this.setState({\r\n                    isLoading: false,\r\n                    images: imageURLs\r\n                }, () => {\r\n                    // console.log(this.state.images);\r\n                });\r\n            }else{\r\n                this.setState({\r\n                    isLoading: false,\r\n                }, () => {\r\n                    // console.log(this.state.images);\r\n                });\r\n            }\r\n        })\r\n    }\r\n\r\n    onChapterChange = (index) => {\r\n        let chap =  this.state.chapterList[index];\r\n        let url = chap.url;\r\n        let title = chap.title;\r\n        let date = chap.date;\r\n        console.log(\"cover before set: \", this.state.cover);\r\n        this.setState({\r\n            currentIndex: index,\r\n            url: url,\r\n            title: title,\r\n            date: date,\r\n            currentChapter: chap\r\n        }, () => {\r\n            this.chapterNextIndex = this.state.currentIndex + 1;\r\n            this.chapterPrevIndex = this.state.currentIndex - 1;\r\n            let targetURL = `/chapter?url=${encodeURIComponent(url)}`;\r\n            let newHistoryState = {\r\n                chapterList: this.state.chapterList,\r\n                currentChapter: this.state.currentChapter,\r\n                currentIndex: this.state.currentIndex,\r\n                storyTitle: this.state.storyTitle,\r\n                cover: this.state.cover\r\n            };\r\n            window.history.replaceState(newHistoryState, \"\", targetURL);\r\n            this.loadImages();\r\n            console.log(\"cover after set: \", this.state.cover);\r\n        });\r\n\r\n        tbl_recents.add({\r\n            storyTitle: this.state.storyTitle,\r\n            cover: this.state.cover,\r\n            ...chap\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <React.Fragment>\r\n                <div className=\"cp2-con\" ref={this.pgCon} data-id=\"image-scroll\">\r\n                    <div    className=\"cp2-content\" \r\n                            onTouchStart={this.onMouseDownImageCon}\r\n                            onClick={() => {\r\n                            this.setState({\r\n                                showNav: !this.state.showNav\r\n                            });\r\n                            }}>\r\n                    \r\n                        {\r\n                            this.state.isLoading ?\r\n                            <LogoLoading />\r\n                            :\r\n                            (\r\n                                this.state.imgLoadAll ?\r\n                                this.state.images.map((item, index) => {\r\n                                    return <CoverImage src={item} key={index}/>;\r\n                                })\r\n                                :\r\n                                <ImageOneByOneArr list={this.state.images}/>\r\n                            )\r\n                            \r\n                        }\r\n                        \r\n                        \r\n                    </div>\r\n                    \r\n                </div>\r\n                <div className=\"cp2-head\" style={{\r\n                        transform: this.state.showNav ? 'translateY(0px)' : 'translateY(-56px)'\r\n                    }}>\r\n                        <button className=\"hp2-h-btn\" onClick={() => {\r\n                            window.history.back();\r\n                        }}>\r\n                            <SVGIcon name=\"list\" fill=\"#fff\"/>\r\n                        </button>\r\n\r\n                        <div className=\"cp2-title\">\r\n                            {this.state.title}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"cp2-foot\" style={{\r\n                        transform: this.state.showNav ? 'translateY(0px)' : 'translateY(56px)'\r\n                    }}>\r\n                        <button className=\"hp2-h-btn\" onClick={() => {\r\n                            // window.history.back();\r\n                            this.scrollToTop();\r\n                        }}>\r\n                            <SVGIcon name=\"arrow_up\" fill=\"#fff\" />\r\n                        </button>\r\n                        <div style={{flex: 1}}></div>\r\n\r\n\r\n                        <button className=\"hp2-h-btn\" \r\n                                disabled={this.state.chapterList[this.chapterPrevIndex] ? false : true}\r\n                                onClick={() => {\r\n                            this.onChapterChange(this.chapterPrevIndex);\r\n                        }}>\r\n                            <SVGIcon name=\"arrow_left\" fill=\"#fff\" style={{transform: 'scale(1.5)'}}/>\r\n                        </button>\r\n\r\n                        <div className=\"cp2-story-index-lbl\">\r\n                            {Number(this.state.currentIndex + 1).toLocaleString()} / {Number(this.state.chapterList.length).toLocaleString()}\r\n                        </div>\r\n\r\n\r\n                        \r\n                            \r\n                        <button className=\"hp2-h-btn\" \r\n                                disabled={this.state.chapterList[this.chapterNextIndex] ? false : true}\r\n                                onClick={() => {\r\n                                    this.onChapterChange(this.chapterNextIndex);\r\n                                }}>\r\n                            <SVGIcon name=\"arrow_right\" fill=\"#fff\" style={{transform: 'scale(1.5)'}}/>\r\n                        </button>\r\n                        \r\n\r\n\r\n                        <button className=\"hp2-h-btn foot-over fo-cen\" onClick={() => {\r\n                            this.scrollToPosition();\r\n                    }}>\r\n                        <SVGIcon name=\"arrow_down\" fill=\"#fff\"/>\r\n                    </button>\r\n                </div>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default ChapterPage2;","export default [\r\n    // \"https://toonily.com/\",\r\n    \"https://webtoon.xyz/\",\r\n    \"https://mangaclash.com/\",\r\n    \"https://manhwa.club/\",\r\n    \"https://manytoon.com/\",\r\n    \"https://manhwahentai.me/\",\r\n]","import React, { Component, useEffect, useState } from 'react';\r\nimport { getRecommendations } from '../../models/story-model';\r\nimport CoverImage from '../CoverImage/CoverImage';\r\nimport './RecommendationTab.css';\r\nimport customEvents from '../../models/customEvents';\r\nimport { SectionTitle } from '../../pages/AddPage/AddPage';\r\nimport tbl_recents from '../../models/tbl_recents';\r\nimport tbl_img_cache from '../../models/tbl_img_cache';\r\nimport loading64 from '../../models/loading64';\r\n\r\nlet RecoOldState = null;\r\nlet categories = [\r\n    {\r\n        key: \"latest\",\r\n        value: \"Latest\"\r\n    },\r\n    {\r\n        key: \"alphabet\",\r\n        value: \"A-Z\"\r\n    },\r\n    {\r\n        key: \"rating\",\r\n        value: \"Rating\"\r\n    },\r\n    {\r\n        key: \"trending\",\r\n        value: \"Trending\"\r\n    },\r\n    {\r\n        key: \"views\",\r\n        value: \"Most Views\"\r\n    },\r\n    {\r\n        key: \"new-manga\",\r\n        value: \"New\"\r\n    },\r\n];\r\n\r\nconst sources = [\r\n    \"WEBTOONS.XYZ\",\r\n    \"MANGACLASH.COM\"\r\n];\r\n\r\n\r\nconst CatItem = (props) => {\r\n\r\n    const [active, setActiveState] = useState(props.isActive ? true : false);\r\n\r\n    const onChangeCateg = (key) => {\r\n        setActiveState(key === props.data.key);\r\n    }\r\n\r\n    const onclick = () => {\r\n        customEvents.emit(\"cat.change\", props.data.key);\r\n    }\r\n\r\n    useEffect(() => {\r\n        //on mount\r\n        customEvents.on(\"cat.change\", onChangeCateg);\r\n        setActiveState(props.currentOrder === props.data.key);\r\n        return () => {\r\n            //on unmount\r\n            customEvents.off(\"cat.change\", onChangeCateg);\r\n        }\r\n    });\r\n\r\n    return(\r\n        <div onClick={onclick}\r\n            className={\"cat-btn\" + (active ? \" cat-act\" : \"\")}>\r\n            {props.data.value}\r\n        </div>\r\n    );\r\n}\r\n\r\nclass RecommendationTab extends Component{\r\n\r\n    constructor(){\r\n        super();\r\n        this.state = {\r\n            currentPage: 1,\r\n            isLoading: false,\r\n            list: [],\r\n            itemPerPageCount: 20,\r\n            pageArr: [],\r\n            orderBy: \"latest\",\r\n            overallCount: 0,\r\n            tabIndex: 0\r\n        }\r\n\r\n        // this.timer = null;\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(RecoOldState){\r\n            this.setState(RecoOldState);\r\n        }else{\r\n            this.loadPage();\r\n        }\r\n        customEvents.on(\"cat.change\", this.onCatChange);\r\n        console.log(this.state.orderBy);\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        RecoOldState = this.state;\r\n        customEvents.off(\"cat.change\", this.onCatChange);\r\n    }\r\n\r\n    onCatChange = (key) => {\r\n        if(key){\r\n            this.setState({\r\n                orderBy: key,\r\n                currentPage: 1\r\n            }, () => {\r\n                this.loadPage(this.state.orderBy);\r\n            });\r\n        }\r\n    }\r\n\r\n    loadPage = (orderBy) => {\r\n        this.setState({\r\n            isLoading: true\r\n        }, () => {\r\n            getRecommendations(this.state.tabIndex, this.state.currentPage, orderBy)\r\n            .then((data) => {\r\n                console.log(data);\r\n\r\n                let pageArr = this.createPageArray(data.resultTotalCount, data.list.length);\r\n\r\n                this.setState({\r\n                    isLoading: false,\r\n                    list: data.list,\r\n                    itemPerPageCount: this.state.currentPage === 1 ? data.list.length : this.state.itemPerPageCount,\r\n                    pageArr: this.state.currentPage === 1 ? pageArr : this.state.pageArr,\r\n                    overallCount: data.resultTotalCount\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                this.setState({\r\n                    isLoading: false\r\n                });\r\n\r\n                console.log(err);\r\n            })\r\n        });\r\n        \r\n    }\r\n\r\n    createPageArray = (totalCount, perPageCount) => {\r\n        let loopCount = Math.ceil(totalCount / perPageCount);\r\n        let arr = [];\r\n        for(let i=1; i<=loopCount; i++){\r\n            arr.push({\r\n                key: i,\r\n                value: `Page ${Number(i).toLocaleString()} / ${Number(loopCount).toLocaleString()}`\r\n            });\r\n        }\r\n        return arr;\r\n    }\r\n\r\n    nextPage = () => {\r\n        // if(this.timer) clearTimeout(this.timer);\r\n        // this.timer = setTimeout(() => {\r\n            this.setState({\r\n                currentPage: this.state.currentPage + 1\r\n            }, () => {\r\n                this.loadPage(this.state.orderBy);\r\n            });\r\n        // }, 100);\r\n        \r\n    }\r\n\r\n    prevPage = () => {\r\n        // if(this.timer) clearTimeout(this.timer);\r\n        // this.timer = setTimeout(() => {\r\n            if((this.state.currentPage - 1) >= 1){\r\n                this.setState({\r\n                    currentPage: this.state.currentPage - 1\r\n                }, () => {\r\n                    this.loadPage(this.state.orderBy);\r\n                });\r\n            }else{\r\n                this.setState({\r\n                    currentPage: 1\r\n                }, () => {\r\n                    this.loadPage(this.state.orderBy);\r\n                });\r\n            }\r\n        // }, 100);\r\n        \r\n    }\r\n\r\n\r\n    onSelPageChange = (e) => {\r\n        e.preventDefault();\r\n        this.setState({\r\n            currentPage: Number(e.target.options[e.target.selectedIndex].value)\r\n        }, () => {\r\n            this.loadPage(this.state.orderBy);\r\n        });\r\n    }\r\n\r\n\r\n    gotoStoryPage = (url) => {\r\n        // let url = `/story?url=${encodeURIComponent(item.url)}`\r\n        window.history.pushState(null, \"\", url);\r\n        customEvents.emit('pushstate');\r\n    }\r\n\r\n    gotoChapterPage = (item) => {\r\n        let url = `/chapter?url=${encodeURIComponent(item.chapURL)}`;\r\n        window.history.pushState(null, \"\", url);\r\n        customEvents.emit('pushstate');\r\n        tbl_recents.add({\r\n            date: item.postOn,\r\n            url: item.chapURL,\r\n            cover: item.cover,\r\n            storyTitle: item.title,\r\n            title: item.chapText\r\n        })\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"reco-parent-con\">\r\n                <div className=\"reco-tab-con\">\r\n                    <button onClick={() => {\r\n                                this.setState({\r\n                                    tabIndex: 0,\r\n                                    currentPage: 1\r\n                                }, () => {\r\n                                    this.loadPage();\r\n                                    console.log(this.state.tabIndex);\r\n                                });\r\n                            }}\r\n                            className={this.state.tabIndex === 0 ? \"rtb-act\" : \"\"}>\r\n                        WEBTOONS.XYZ\r\n                    </button>\r\n                    <div className=\"reco-tab-splitter\"></div>\r\n                    <button onClick={() => {\r\n                                this.setState({\r\n                                    tabIndex: 1,\r\n                                    currentPage: 1\r\n                                }, () => {\r\n                                    this.loadPage();\r\n                                    console.log(this.state.tabIndex);\r\n                                });\r\n                            }}\r\n                            className={this.state.tabIndex === 1 ? \"rtb-act\" : \"\"}>\r\n                        MANGACLASH.COM\r\n                    </button>\r\n                </div>\r\n                <h3 className=\"reco-h-title\">\"{sources[this.state.tabIndex]}\"</h3>\r\n                <p className=\"reco-sub-title\">Recommendations</p>\r\n\r\n                <div style={{\r\n                    paddingLeft: 8,\r\n                    paddingRight: 8,\r\n                }}>\r\n                    <SectionTitle title=\"Category\"/>\r\n                </div>\r\n\r\n                <div className=\"cat-btn-con\">\r\n                {\r\n                    categories.map((item, index) => {\r\n                        return (\r\n                            <CatItem key={index} data={item} currentOrder={this.state.orderBy}/>\r\n                        );\r\n                    })\r\n                }\r\n                </div>\r\n                \r\n\r\n                <div style={{\r\n                    paddingLeft: 8,\r\n                    paddingRight: 8,\r\n                }}>\r\n                    <SectionTitle title={` Results: ${this.state.isLoading ? 0 : Number(this.state.overallCount).toLocaleString()} | Page: ${Number(this.state.currentPage).toLocaleString()}`}/>\r\n                </div>\r\n                \r\n\r\n                {\r\n                    this.state.isLoading &&\r\n                    <img src={loading64} alt=\"Loading List..\"/>\r\n                }\r\n\r\n                {\r\n                    !this.state.isLoading &&\r\n                    <React.Fragment>\r\n                        <div className=\"reco-list-con\">\r\n                            {\r\n                                this.state.list.map((item, index) => {\r\n                                    let url = `/story?url=${encodeURIComponent(item.url)}`;\r\n                                    return (\r\n                                        <div key={index} className=\"reco-item ri-bg\">\r\n                                            <a className=\"reco-item-cover-con\"\r\n                                                    href={url}\r\n                                                    onClick={(e) => {\r\n                                                        e.preventDefault();\r\n                                                        this.gotoStoryPage(url);\r\n                                                    }}>\r\n                                                <CoverImage src={item.imgURL} \r\n                                                            alt={item.title}\r\n                                                            onCache={(url, data) => {\r\n                                                                tbl_img_cache.add(url, data);\r\n                                                            }}\r\n                                                            style={{\r\n                                                                width: 100,\r\n                                                                minHeight: 136.36\r\n                                                            }}/>\r\n                                                <div className=\"reco-item-badge-con\">\r\n                                                    {\r\n                                                        item.badges.map((itm, indx) => {\r\n                                                            return(\r\n                                                                itm === \"18+\" ?\r\n                                                                <div key={indx} className=\"reco-badge-adult\">\r\n                                                                    {itm}\r\n                                                                </div>\r\n\r\n                                                                :\r\n\r\n                                                                <div key={indx} className=\"reco-badge-new\">\r\n                                                                    {itm}\r\n                                                                </div>\r\n                                                            );\r\n                                                        })\r\n                                                    }\r\n                                                </div>\r\n                                            </a>\r\n                                            <div className=\"reco-item-summary\">\r\n                                                <a  className=\"ris-title\"\r\n                                                    href={url}\r\n                                                    onClick={(e) => {\r\n                                                        e.preventDefault();\r\n                                                        this.gotoStoryPage(url);\r\n                                                    }}>\r\n                                                        {item.title}\r\n                                                </a>\r\n                                                <div className=\"ris-rating\">\r\n                                                    Rating: <strong>{item.rating} / 5</strong>\r\n                                                </div>\r\n                                                <div className=\"ris-itm-con\">\r\n                                                    {\r\n                                                        item.last_two_chapters.map((_item, index) => {\r\n                                                            // console.log(item);\r\n                                                            let _url = `/chapter?url=${encodeURIComponent(_item.chapURL)}`;\r\n                                                            return(\r\n                                                                <a  key={index} \r\n                                                                    className=\"ris-chap-item-con\" \r\n                                                                    href={_url}\r\n                                                                    onClick={(e) => {\r\n                                                                        e.preventDefault();\r\n                                                                        _item.cover = item.imgURL;\r\n                                                                        _item.title = item.title;\r\n                                                                        this.gotoChapterPage(_item);\r\n\r\n                                                                    }}>\r\n                                                                    <div className=\"ris-chap-item\">\r\n                                                                        {_item.chapText}\r\n                                                                    </div>\r\n                                                                    <div className=\"risci-post-on\">\r\n                                                                        {\r\n                                                                            _item.isNew ?\r\n                                                                            <div className=\"risci-new\">NEW</div>\r\n                                                                            :\r\n                                                                            <div>{_item.postOn}</div>\r\n                                                                        }\r\n                                                                        \r\n                                                                    </div>\r\n                                                                </a>\r\n                                                                \r\n                                                            );\r\n                                                        })\r\n                                                    }\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            }\r\n                        </div>\r\n                        <div className=\"ris-btn-con\">\r\n                            \r\n                            <button onClick={this.prevPage} \r\n                                    disabled={\r\n                                        this.state.currentPage > 1 ? false : true\r\n                                    }>\r\n                                PREV\r\n                            </button>\r\n                            <div style={{width: 8}}></div>\r\n                            <select value={this.state.currentPage} \r\n                                    onChange={this.onSelPageChange}\r\n                                    className=\"sel-reco-pg\">\r\n                                <option value={0} disabled={true}>Select Page Number</option>\r\n                                {\r\n                                    this.state.pageArr.map((item, index) => {\r\n                                        return (\r\n                                            <option key={index} value={item.key}>{item.value}</option>\r\n                                        );\r\n                                    })\r\n                                }\r\n                            </select>\r\n                            <div style={{width: 8}}></div>\r\n                            <button onClick={this.nextPage}\r\n                                    disabled={\r\n                                        this.state.currentPage >= this.state.pageArr.length ? true: false\r\n                                    }>\r\n                                        NEXT\r\n                            </button>\r\n                        </div>\r\n                    </React.Fragment>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default RecommendationTab;","import React, { Component } from 'react';\r\nimport './AddPage.css';\r\nimport SVGIcon from '../../components/SvgIcons/SvgIcons';\r\nimport tbl_stories from '../../models/tbl_stories';\r\nimport { getStoryDetails, searchStoryOnline } from '../../models/story-model';\r\nimport customEvents from '../../models/customEvents';\r\nimport LogoLoading from '../../components/LogoLoading/LogoLoading';\r\nimport VALID_SITE from '../../models/valid-sites';\r\nimport RecommendationTab from '../../components/RecommendationTab/RecommendationTab';\r\n\r\nimport Snackbar from '../../components/Snackbar/Snackbar';\r\n\r\nconst SectionTitle = (props) => {\r\n    return(\r\n        <div className=\"sec-title-holder\">\r\n            <div className=\"sth-title\">\r\n                {props.title}\r\n            </div>\r\n            <div className=\"sth-underline\"></div>\r\n        </div>\r\n    );\r\n}\r\n\r\nlet addPageOldState = null;\r\nexport default class AddPage extends Component{\r\n\r\n\r\n    state = {\r\n        activeTab: 0,\r\n        tabCount: 3,\r\n        isLoading: false\r\n    }\r\n\r\n    inURLRef = React.createRef();\r\n    snackRef = React.createRef();\r\n\r\n    componentDidMount = () => {\r\n        // console.log(this.state);\r\n        if(addPageOldState){\r\n            this.setState({\r\n                ...addPageOldState\r\n            });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        addPageOldState = this.state\r\n    }\r\n\r\n    setActiveTab = (index) => {\r\n        this.setState({\r\n            activeTab: index,\r\n        },() => {\r\n            // console.log(this.state);\r\n        });\r\n    }\r\n\r\n\r\n    onSubmit = () => {\r\n        let value = this.inURLRef.current.value;\r\n        if(value.match(/^(http|https):\\/\\/[^/]+\\/[^/]+\\/[^/]+\\/?$/)){\r\n            // alert(\"OK\");\r\n            this.addStory(value)\r\n            .then(() => {\r\n\r\n                this.snackRef.current.show({\r\n                    message: \"Successfully Added to List\",\r\n                    mode: \"success\"\r\n                });\r\n                customEvents.emit(\"url.added\", null);\r\n                this.inURLRef.current.value = \"\";\r\n            });\r\n        }else{\r\n            this.snackRef.current.show({\r\n                message: \"Invalid URL\",\r\n                mode: \"error\"\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    addStory = (url) => {\r\n        return new Promise((resolve, reject) => {\r\n\r\n            this.setState({\r\n                isLoading: true\r\n            }, () => {\r\n    \r\n                getStoryDetails(url)\r\n                .then((data) => {\r\n                    if(data.status === 500){\r\n                        this.snackRef.current.show({\r\n                            message: \"Failed Requesting Story Info\",\r\n                            mode: \"error\"\r\n                        });\r\n                        this.setState({\r\n                            isLoading: false\r\n                        });\r\n                        return null;\r\n                    }\r\n                    // alert(JSON.stringify(data));\r\n                    console.log(data);\r\n                    tbl_stories.addStory({\r\n                        title: data.title,\r\n                        url: data.url,\r\n                        cover: data.cover,\r\n                        info_json: JSON.stringify(data.storyInfo),\r\n                        // chapters: data.chapters,\r\n                        description: data.description,\r\n                    })\r\n                    .then((res) => {\r\n                        // alert(\"addStory: \\n\" + JSON.stringify(res));\r\n                        console.log(res);\r\n                        resolve(res);\r\n                        this.setState({\r\n                            isLoading: false\r\n                        });\r\n                        \r\n                    })\r\n                    .catch((err) => {\r\n                        this.setState({\r\n                            isLoading: false\r\n                        });\r\n                        console.log(err);\r\n                        reject(err);\r\n                        if(err.code === 6){\r\n                            this.snackRef.current.show({\r\n                                message: `URL already exists.`,\r\n                                mode: \"error\"\r\n                            });\r\n                            // alert(\"URL already exists.\" + (err.message ? \"\\nError:\\n\"+ err.message : \"\"));\r\n                        }else{\r\n                            if(err.message){\r\n                                // alert(\"code: \\n\" + err.code);\r\n                                // alert(\"Error: \\n\" + err.message);\r\n                                this.snackRef.current.show({\r\n                                    message: \"Error: \\n\" + err.message,\r\n                                    mode: \"error\"\r\n                                });\r\n                            }else{\r\n                                // alert(\"Error: \"+err);\r\n                                this.snackRef.current.show({\r\n                                    message: \"Error: \"+err,\r\n                                    mode: \"error\"\r\n                                });\r\n                            }\r\n                        }\r\n                    });\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                    reject(err);\r\n                    // alert(\"Error Getting Story Details:\" + err);\r\n                    this.snackRef.current.show({\r\n                        message: \"Error Getting Story Details:\" + err,\r\n                        mode: \"error\"\r\n                    });\r\n                    throw err;\r\n                });\r\n            });\r\n        });\r\n        \r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"ap-con\">\r\n                <div className=\"ap-head\">\r\n                    <button className=\"hp2-h-btn\" onClick={\r\n                        () => {\r\n                            window.history.back();\r\n                        }\r\n                    }>\r\n                        <SVGIcon name=\"arrow_back\" fill=\"#555\"/>\r\n                    </button>\r\n\r\n                    <div className=\"ap-h-title\">Add New Story</div>\r\n                </div>\r\n                <div className=\"ap-content\">\r\n                    {/* <div className=\"ap-limiter-con\"> */}\r\n                        {\r\n                            ((i) => {\r\n                                let tabs = {\r\n                                        0: (\r\n                                            <RecommendationTab />\r\n                                        ),\r\n                                        1: (\r\n                                            <SearchOnline />\r\n                                        ),\r\n                                        2: (\r\n                                        <div className=\"link-frm-con\">\r\n                                            <h2>Add via URL</h2>\r\n                                            <input type=\"text\" placeholder=\"Story URL...\" \r\n                                                    ref={this.inURLRef}/>\r\n                                            <button onClick={this.onSubmit} disabled={this.state.isLoading}>ADD NOW</button>\r\n                                                \r\n                                                <div style={{height: 32}}></div>\r\n                                                {\r\n                                                    this.state.isLoading && <LogoLoading style={{backgroundColor: 'rgba(255,255,255, 0.7)', zIndex: 99}}/>\r\n                                                }\r\n                                            <h4>Sample Valid Story URL</h4>\r\n                                            <div className=\"sam-v-u\">https://manhwa.club/manhwa/solo-leveling/</div>\r\n                                        \r\n                                            {/* <div className=\"res-header\" style={{marginTop: 16}}>List of valid sites</div> */}\r\n                                            <SectionTitle title=\"List of Valid Sites\"/>\r\n                                            {\r\n                                                VALID_SITE.map((item, index) => {\r\n                                                    return(\r\n                    \r\n                                                        <a  href={item}\r\n                                                            target=\"_blank\" \r\n                                                            rel=\"noopener noreferrer\" \r\n                                                            key={index}>\r\n                                                            <div>\r\n                                                                {new URL(item).hostname}\r\n                                                            </div>\r\n                                                            <SVGIcon name=\"arrow_forward_ios\" fill=\"#777\" size={14}/>\r\n                                                        </a>\r\n                                            \r\n                                                    );\r\n                                                })\r\n                                            }\r\n                                        </div>\r\n                                        ),     \r\n                                };\r\n\r\n                            return tabs[i];\r\n                            })(this.state.activeTab)\r\n                        }\r\n\r\n                    {/* </div> */}\r\n                    <div>\r\n\r\n                    </div>\r\n                </div>\r\n                <div className=\"ap-foot\">\r\n                    <div className=\"ap-tab-act-line\" style={\r\n                        {\r\n                            transform: `translateX(${this.state.activeTab * 100}%)`,\r\n                            width: `${100 / this.state.tabCount}%`\r\n                        }\r\n                    }></div>\r\n                    <button onClick={() => {\r\n                        this.setActiveTab(0);\r\n                    }}>\r\n                        <SVGIcon name=\"verified\" fill=\"#555\"/>\r\n                        <div className=\"ap-f-btn-lbl\">Recommendations</div>\r\n                    </button>\r\n                    \r\n                    <button onClick={() => {\r\n                        this.setActiveTab(1);\r\n                    }}>\r\n                        <SVGIcon name=\"public\" fill=\"#555\"/>\r\n                        <div className=\"ap-f-btn-lbl\">Search Online</div>\r\n                    </button>\r\n\r\n                    <button onClick={() => {\r\n                        this.setActiveTab(2);\r\n                    }}>\r\n                        <SVGIcon name=\"link\" fill=\"#555\"/>\r\n                        <div className=\"ap-f-btn-lbl\">Add Link</div>\r\n                    </button>\r\n                    \r\n                </div>\r\n                <Snackbar ref={this.snackRef}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nlet searchOnlineOldState = null;\r\nclass SearchOnline extends Component{\r\n\r\n    state = {\r\n        search: \"\",\r\n        isLoading: false,\r\n        list: [],\r\n    }\r\n\r\n    searchTimer = null;\r\n\r\n\r\n    componentDidMount = () => {\r\n        this.getResults();\r\n\r\n        if(searchOnlineOldState){\r\n            this.setState({\r\n                ...searchOnlineOldState\r\n            });\r\n        }\r\n        \r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        searchOnlineOldState = this.state;\r\n    }\r\n\r\n\r\n    getResults = () => {\r\n        if(this.state.search === \"\") return;\r\n\r\n        this.setState({\r\n            isLoading: true\r\n        }, () => {\r\n            searchStoryOnline(this.state.search)\r\n            .then((data) => {\r\n                this.setState({\r\n                    isLoading: false,\r\n                    list: data\r\n                });\r\n            })\r\n            .catch((err) => {\r\n                this.setState({\r\n                    isLoading: false\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n\r\n    onSearchChange = (e) => {\r\n        // this.searchTimer && clearTimeout(this.searchTimer);\r\n        e.preventDefault();\r\n        this.setState({\r\n            search: e.target.value\r\n        }, () => {\r\n            // this.searchTimer = setTimeout(() => {\r\n            //     this.getResults();\r\n            // }, 600);\r\n        });\r\n    }\r\n\r\n    onSearchKeyDown = (e) => {\r\n        // console.log(e.keyCode);\r\n        if(e.keyCode === 13){\r\n            this.getResults();\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"ap-so-con\">\r\n                <div className=\"ap-search-con\">\r\n                    <input  type=\"text\"\r\n                            placeholder=\"Search Keyword...\"\r\n                            onChange={this.onSearchChange}\r\n                            value={this.state.search}\r\n                            onKeyDown={this.onSearchKeyDown}/>\r\n                    <button className=\"ap-s-search-btn\" onClick={() => {\r\n                        this.getResults();\r\n                    }}>\r\n                        <SVGIcon name=\"search\" fill=\"#888\"/>\r\n                    </button>\r\n                    <div style={{width: 8}}></div>\r\n                    <button className=\"ap-s-close\" onClick={() => {\r\n                        this.setState({search: \"\"});\r\n                    }}>\r\n                        <SVGIcon name=\"close\" fill=\"#888\"/>\r\n                    </button>\r\n\r\n                </div>\r\n\r\n                <div className=\"ap-results-con\">\r\n                    {\r\n                        this.state.isLoading ? \r\n                        <img    src={window.base_url + \"loading.svg\"} \r\n                                alt=\"loading\" \r\n                                style={{\r\n                                    display: 'block',\r\n                                    marginLeft: 'auto',\r\n                                    marginRight: 'auto'\r\n                                }}/>\r\n                        :\r\n                        this.state.list.map((item, index) => {\r\n\r\n                            if(item.success === true){\r\n                                let list = item.data;\r\n                                return(\r\n                                    <div key={index}>\r\n                                        <SectionTitle title={new URL(item.data[0].url).hostname}/>\r\n                                        <div>\r\n                                            {\r\n                                                list.map((s, indx) => {\r\n                                                    return(\r\n                                                        <button key={indx} \r\n                                                                className=\"search-item-con\"\r\n                                                                onClick={() => {\r\n                                                                    let url = `/story?url=${encodeURIComponent(s.url)}`;\r\n                                                                    window.history.pushState(null, \"\", url);\r\n                                                                    customEvents.emit('pushstate');\r\n                                                                }}>\r\n                                                            <div className=\"sic-title\">\r\n                                                                <div>\r\n                                                                    {s.title}\r\n                                                                </div>\r\n                                                                <div className=\"sic-hostname\">\r\n                                                                    {new URL(s.url).hostname}\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <SVGIcon name=\"arrow_forward_ios\" fill=\"#777\" size={14}/>\r\n                                                        </button>\r\n                                                    )\r\n                                                })\r\n                                            }\r\n                                        </div>\r\n                                    </div>\r\n                                )\r\n                            }else{\r\n                                return(null);\r\n                            }\r\n                        })\r\n                    }\r\n                </div>\r\n                \r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport{\r\n    SectionTitle\r\n}","import React, { Component } from 'react';\r\nimport './StoryInfoPage.css';\r\nimport SVGIcon from '../../components/SvgIcons/SvgIcons';\r\nimport { SectionTitle } from '../AddPage/AddPage';\r\n\r\nexport default class StoryInfoPage extends Component{\r\n\r\n    state = {\r\n        title: \"\",\r\n        url: null,\r\n        info: {},\r\n        description: \"\",\r\n        cover: \"\",\r\n        raw_cover: \"\"\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        if(window.history.state){\r\n            this.setState({\r\n                ...window.history.state\r\n            },() => {\r\n                console.log(\"State: \", this.state);\r\n            });\r\n        }\r\n        // this.setState();\r\n    }\r\n\r\n    getHostName = () => {\r\n        if(String(this.state.url).match(/^(http|https):\\/\\/[^/]+\\/[^/]+\\/[^/]+\\/?$/)){\r\n            return (new URL(this.state.url)).hostname;\r\n        }else{\r\n            return \"Unknown Site\";\r\n        }\r\n    }\r\n    \r\n    polishText = (str) => {\r\n        if(typeof str === 'string'){\r\n            let strArr = str.split(\",\");\r\n            let strF = strArr.map((item) => {\r\n                return item.trim();\r\n            }).join(\", \");\r\n            return strF;\r\n        }else{\r\n            return str;\r\n        }\r\n    }\r\n\r\n    render(){\r\n        let infoKeys = Object.keys(this.state.info);\r\n        return (\r\n            <div className=\"sip-con\">\r\n                <div className=\"ap-head\">\r\n                    <button className=\"hp2-h-btn\" onClick={\r\n                        () => {\r\n                            window.history.back();\r\n                        }\r\n                    }>\r\n                        <SVGIcon name=\"arrow_back\" fill=\"#555\"/>\r\n                    </button>\r\n\r\n                    <div className=\"ap-h-title\">Story Info</div>\r\n                </div>\r\n                <div className=\"sip-content\">\r\n                    <div className=\"sip-title\">\"{this.state.title}\"</div>\r\n                    <div>{this.getHostName()}</div>\r\n\r\n                    <SectionTitle title=\"Info\"/>\r\n                    <div className=\"sip-info\">\r\n                       {\r\n                            infoKeys.map((infoKey, index) => {\r\n                                return(\r\n                                    <div key={index} className=\"sip-info-item-con\">\r\n                                        <div className=\"sip-ii-key\">{infoKey}:</div>\r\n                                        <div className=\"sip-ii-val\">{this.polishText(this.state.info[infoKey])}</div>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                       }\r\n                    </div>\r\n\r\n                    <SectionTitle title=\"Description\"/>\r\n                    <div className=\"sip-desc\">\r\n                        {this.state.description}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport SVGIcon from '../../components/SvgIcons/SvgIcons';\r\nimport { SectionTitle } from '../AddPage/AddPage';\r\nfunction AboutPage(props){\r\n    \r\n    return(\r\n        <div className=\"sip-con\">\r\n                <div className=\"ap-head\">\r\n                    <button className=\"hp2-h-btn\" onClick={\r\n                        () => {\r\n                            window.history.back();\r\n                        }\r\n                    }>\r\n                        <SVGIcon name=\"arrow_back\" fill=\"#555\"/>\r\n                    </button>\r\n\r\n                    <div className=\"ap-h-title\">About</div>\r\n                </div>\r\n                <div className=\"sip-content\">\r\n                    <div className=\"siwt-list-con\">\r\n                        <img    src={window.base_url + \"erl-manhwa-logo.svg\"} \r\n                                alt=\"App Logo\"\r\n                                style={\r\n                                    {\r\n                                        maxWidth: 200,\r\n                                        width: '100%'\r\n                                    }\r\n                                }/>\r\n\r\n                        <SectionTitle title=\"App Creator\"/>\r\n                        <div className=\"sip-desc\">\r\n                        The app was created by: \r\n                        <br/>\r\n                        <br/>\r\n                        <strong onClick={() => {\r\n                            window.open(\"https://www.facebook.com/Erlzone1016/\")\r\n                        }}\r\n                        className=\"h-link\">Erlson David Escalante</strong>\r\n                        </div>\r\n\r\n                        <SectionTitle title=\"Version\"/>\r\n                        <div className=\"sip-desc\">\r\n                            0.1 (Beta Version)\r\n                        </div>\r\n                        \r\n\r\n                        <SectionTitle title=\"App Description\"/>\r\n                        <div className=\"sip-desc\">\r\n                            The purpose of the app is to scrape source sites. Its main goal is to remove ADS while reading the selected story.\r\n                        </div>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    );\r\n}\r\n\r\nexport default AboutPage;","import React from 'react';\r\nimport SVGIcon from '../../components/SvgIcons/SvgIcons';\r\nimport tbl_recents from '../../models/tbl_recents';\r\nimport customEvents from '../../models/customEvents';\r\nimport CoverImage from '../../components/CoverImage/CoverImage';\r\nimport './RecentPage.css';\r\nimport LogoLoading from '../../components/LogoLoading/LogoLoading';\r\n\r\nclass RecentPage extends React.Component{\r\n\r\n    state = {\r\n        list: [],\r\n        current_page: 1,\r\n        overAllSize: 0,\r\n        limit: 10,\r\n        isLoading: false,\r\n        total_page_count: 0\r\n    }\r\n\r\n    componentDidMount = () => {\r\n        this.loadData();\r\n    }\r\n\r\n    loadData = () => {\r\n        this.setState({\r\n            isLoading: true\r\n        }, () => {\r\n            tbl_recents.getAll(this.state.limit, this.state.current_page)\r\n            .then((res) => {\r\n                console.log(res);\r\n                \r\n                this.setState({\r\n                    list: res.data,\r\n                    overAllSize: res.overAllSize,\r\n                    total_page_count: res.total_page_count,\r\n                    isLoading: false\r\n                });\r\n            })\r\n            .catch(() => {\r\n                this.setState({\r\n                    isLoading: false\r\n                });\r\n            });\r\n        });\r\n        \r\n    }\r\n\r\n\r\n    onPrevPage = () => {\r\n        this.setState({\r\n            current_page: this.state.current_page - 1\r\n        }, () => {\r\n            this.loadData();\r\n        });\r\n    }\r\n\r\n    onNextPage = () => {\r\n        this.setState({\r\n            current_page: this.state.current_page + 1\r\n        }, () => {\r\n            this.loadData();\r\n        });\r\n    }\r\n\r\n    \r\n    render(){\r\n        return(\r\n            <div className=\"sip-con\">\r\n                <div className=\"ap-head\">\r\n                    <button className=\"hp2-h-btn\" onClick={\r\n                        () => {\r\n                            window.history.back();\r\n                        }\r\n                    }>\r\n                        <SVGIcon name=\"arrow_back\" fill=\"#555\"/>\r\n                    </button>\r\n\r\n                    <div className=\"ap-h-title\">Recents</div>\r\n                </div>\r\n                <div className=\"sip-content\">\r\n                    {\r\n                        this.state.isLoading ?\r\n                        <LogoLoading />\r\n                        :\r\n                        this.state.list.map((item, index) => {\r\n                            return(\r\n                                <a  key={index} \r\n                                    href={`/chapter?url=${encodeURIComponent(item.url)}`} \r\n                                    onClick={(e) => {\r\n                                        e.preventDefault();\r\n                                        window.history.pushState(null, \"\", `/chapter?url=${encodeURIComponent(item.url)}`);\r\n                                        customEvents.emit('pushstate');\r\n                                    }}\r\n                                    className=\"recent-item-con\">\r\n                                    <div className=\"ritm-cover-con\">\r\n                                        <CoverImage src={item.cover} />\r\n                                    </div>\r\n                                    <div className=\"ritm-info-con\">\r\n                                        <div className=\"ritm-title\">\r\n                                            {item.storyTitle}\r\n                                        </div>\r\n                                        <div className=\"ritm-chap\">\r\n                                            {item.title}\r\n                                        </div>\r\n                                        <div style={{flex: 1}}></div>\r\n                                        <div className=\"ritm-date\">\r\n                                            {new Date(item.dateAdded).toDateString()}\r\n                                        </div>\r\n                                        <div className=\"ritm-time\">\r\n                                            {new Date(item.dateAdded).toLocaleTimeString()}\r\n                                        </div>\r\n                                    </div>\r\n                                    \r\n                                </a>\r\n                            );\r\n                        })\r\n                    }\r\n                </div>\r\n                <div className=\"hp2-foot-con\">\r\n                    <div className=\"recent-pg-footer\">\r\n\r\n                        <button className=\"hp2-h-btn2\"\r\n                                onClick={this.onPrevPage}\r\n                                title=\"Previous Page\"\r\n                                disabled={\r\n                                    this.state.current_page <= 1 ?\r\n                                    true\r\n                                    : \r\n                                    false\r\n                                }>\r\n                            <SVGIcon name=\"arrow_back\" fill=\"#777\"/>\r\n                        </button>\r\n                        <div className=\"hp2-pg-curr-lbl\">\r\n                            Page {this.state.current_page} / {this.state.total_page_count > 0 ? this.state.total_page_count : 1}\r\n                        </div>\r\n                        <button className=\"hp2-h-btn2\"\r\n                                onClick={this.onNextPage}\r\n                                title=\"Next Page\"\r\n                                disabled={\r\n                                    this.state.current_page >= this.state.total_page_count ?\r\n                                    true\r\n                                    : \r\n                                    false\r\n                                }>\r\n                            <SVGIcon name=\"arrow_forward\" fill=\"#777\"/>\r\n                        </button>\r\n\r\n                        <div style={{flex: 1}}></div>\r\n\r\n                        <button className=\"hp2-h-btn3\"\r\n                                onClick={() => {\r\n                                    tbl_recents.clearAll();\r\n                                    this.loadData();\r\n                                }}>\r\n                            <SVGIcon name=\"delete\" fill=\"#777\"/>\r\n                            Clear All\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    \r\n}\r\n\r\nexport default RecentPage;","import React , { Component, createRef } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport customEvents from '../../models/customEvents';\r\nimport { set_continue } from '../../models/story-downloader';\r\nimport CoverImage from '../CoverImage/CoverImage';\r\nimport './DownloadModal.css';\r\nimport loading64 from '../../models/loading64';\r\n\r\nclass DownloadModal extends Component{\r\n    state = {\r\n        story: \"** Getting Story Latest Info **\",\r\n        chapters: [],\r\n        cover: null,\r\n        show: false,\r\n        isLoading: true\r\n    }\r\n\r\n    dlContentRef = createRef();\r\n\r\n    componentDidMount = () => {\r\n        customEvents.on(\"dl.receive.story\", this.onReceivedStory);\r\n        customEvents.on(\"dl.show\", this.show);\r\n        customEvents.on(\"dl.hide\", this.hide);\r\n        customEvents.on(\"dl.img.prog\", this.chapImageProgUpdate);\r\n        customEvents.on(\"dl.progress\", this.onDoneDL);\r\n    }\r\n\r\n    componentWillUnmount = () => {\r\n        customEvents.off(\"dl.receive.story\", this.onReceivedStory);\r\n        customEvents.off(\"dl.show\", this.show);\r\n        customEvents.off(\"dl.hide\", this.hide);\r\n        customEvents.off(\"dl.img.prog\", this.chapImageProgUpdate);\r\n        customEvents.off(\"dl.progress\", this.onDoneDL);\r\n    }\r\n\r\n    onDoneDL = () => {\r\n        this.setState({\r\n            story: \"Loading Story Title...\",\r\n            chapters: [],\r\n            cover: null,\r\n            isLoading: true\r\n        });\r\n    }\r\n\r\n    onReceivedStory = (data) => {\r\n        console.log(data.cover);\r\n        let chaps =  data.chapters.reverse();\r\n        this.setState({\r\n            story: data.title,\r\n            chapters: chaps,\r\n            cover: data.cover,\r\n            isLoading: false\r\n        });\r\n    }\r\n\r\n    chapImageProgUpdate = ({index, total, chaptitle, chapUrl, imgUrl}) => {\r\n        // console.log(\"url\", chapUrl);\r\n        if(!this.dlContentRef.current) return;\r\n        let target = this.dlContentRef.current.querySelector(`[data-url=\"${chapUrl}\"] > .dl-progbar`);\r\n        if(target){\r\n            let percent = Math.floor((index / total) * 100);\r\n   \r\n            // console.log(\"percent: \", percent , index, total);\r\n            target.setAttribute(\"style\", `width: ${percent}%`);\r\n        }\r\n    }\r\n\r\n    show = () => {\r\n        this.setState({\r\n            show: true\r\n        });\r\n    }\r\n\r\n    hide = () => {\r\n        this.setState({\r\n            show: false,\r\n            isLoading: true\r\n        });\r\n    }\r\n\r\n\r\n    render(){\r\n        return createPortal(\r\n            this.state.show ?\r\n            <div className=\"dl-modal-con\">\r\n                <div className=\"dl-header\">\r\n                    {this.state.story}\r\n                </div>\r\n                <div className=\"dl-content\" ref={this.dlContentRef}>\r\n                    {\r\n                        this.state.isLoading ? \r\n                        <img src={loading64} alt=\"Loading SVG\" />\r\n                        :\r\n                        <React.Fragment>\r\n                            <CoverImage src={this.state.cover}/>\r\n                            \r\n                            {\r\n                                this.state.chapters.map((item, index) => {\r\n                                    return(\r\n                                        <div key={index} className=\"dl-progbar-con\"\r\n                                            data-url={item.url}>\r\n                                            <div className=\"dl-progbar\"></div>\r\n                                            <div className=\"dl-progbar-title\">\r\n                                                {item.title}\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })\r\n                            }\r\n                        </React.Fragment>\r\n                    }\r\n                    \r\n                </div>\r\n                <div className=\"dl-footer\">\r\n                    <button className=\"btnDLStop\"    \r\n                            onClick={() => {\r\n                        set_continue(false)\r\n                        this.hide();\r\n                    }}>\r\n                        STOP\r\n                    </button>\r\n                </div>\r\n            </div>\r\n            :\r\n            null,\r\n            document.body\r\n        );\r\n    }\r\n}\r\n\r\nexport default DownloadModal;","import React, { Component, createRef, Fragment } from 'react';\r\nimport SVGIcon from '../../components/SvgIcons/SvgIcons';\r\nimport Toggle from '../../components/Toggle/Toggle';\r\nimport LIS from '../../models/load-images-sync-event';\r\nimport SHOW_ITEM_STATUS from '../../models/show-item-status';\r\nimport AUTO_DELETE_CACHE from '../../models/auto-delete-cache';\r\nimport FAST_DL_STATUS from '../../models/fast-dl-status';\r\nimport DARK_MODE_STATUS from '../../models/dark-mode-status';\r\nimport tbl_img_cache from '../../models/tbl_img_cache';\r\nimport tbl_dl_chaps from '../../models/tbl_dl_chaps';\r\nimport tbl_recents from '../../models/tbl_recents';\r\nimport ConfirmModal from '../../components/ConfirmModal/ConfirmModal';\r\nimport customEvents from '../../models/customEvents';\r\nimport './SettingsPage.css';\r\n\r\n\r\nclass SettingsPage extends Component{\r\n    darkModeRef = createRef();\r\n    loadImageSyncRef = createRef();\r\n    showItemStatusRef = createRef();\r\n    autoDeleteImageCacheRef = createRef();\r\n    fastDownloadRef = createRef();\r\n    CMRef = createRef();\r\n\r\n\r\n    componentDidMount = () => {\r\n        this.loadDefaultValues();\r\n    }\r\n\r\n    loadDefaultValues = () => {\r\n        this.darkModeRef.current.checked = DARK_MODE_STATUS.getState() === \"light\" ? false : true;\r\n        this.loadImageSyncRef.current.checked = Boolean(LIS.getState());\r\n        this.showItemStatusRef.current.checked = Boolean(SHOW_ITEM_STATUS.getState());\r\n        this.autoDeleteImageCacheRef.current.checked = Boolean(AUTO_DELETE_CACHE.getState());\r\n        this.fastDownloadRef.current.checked = Boolean(FAST_DL_STATUS.getState());\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"sip-con\">\r\n                <div className=\"ap-head\">\r\n                    <button className=\"hp2-h-btn\" onClick={\r\n                        () => {\r\n                            window.history.back();\r\n                        }\r\n                    }>\r\n                        <SVGIcon name=\"arrow_back\" fill=\"#555\"/>\r\n                    </button>\r\n\r\n                    <div className=\"ap-h-title\">Settings</div>\r\n                </div>\r\n                <div className=\"sip-content sett-page\">\r\n                    <div className=\"siwt-list-con\">\r\n                        <h4>Theme</h4>\r\n                        <SettingsItemWithToggle ref={this.darkModeRef}\r\n                                                text=\"Dark Mode\"\r\n                                                onChange={(e) => {\r\n                                                    if(e.checked){\r\n                                                        DARK_MODE_STATUS.setState(\"dark\");\r\n                                                    }else{\r\n                                                        DARK_MODE_STATUS.setState(\"light\");\r\n                                                    }  \r\n                                                }}/>\r\n\r\n                        <Spacer />\r\n                        <h4>Image and Item Loading Settings</h4>\r\n                        <SettingsItemWithToggle ref={this.loadImageSyncRef}\r\n                                                text=\"Load Images In Sync\"\r\n                                                onChange={(e) => {\r\n                                                    LIS.setState(Number(e.checked))\r\n                                                }}/>    \r\n\r\n                        <SettingsItemWithToggle ref={this.showItemStatusRef}\r\n                                                text={\r\n                                                    <Fragment>\r\n                                                        Show List Item Status\r\n                                                        <br />\r\n                                                        <span>(shows list item latest update date)</span>\r\n                                                    </Fragment>\r\n                                                }\r\n                                                onChange={(e) => {\r\n                                                    SHOW_ITEM_STATUS.setState(Number(e.checked))\r\n                                                }}/>    \r\n                        <Spacer />\r\n                        <h4>Download Settings</h4>\r\n                        <SettingsItemWithToggle ref={this.fastDownloadRef}\r\n                                                text=\"Fast Download\"\r\n                                                onChange={(e) => {\r\n                                                    FAST_DL_STATUS.setState(Number(e.checked))\r\n                                                }}/>    \r\n\r\n                        <SettingsItemWithToggle ref={this.autoDeleteImageCacheRef}\r\n                                                text={<Fragment>Auto Delete Images Cache<br /><span>(for web only, not working on the app)</span></Fragment>}\r\n                                                onChange={(e) => {\r\n                                                    AUTO_DELETE_CACHE.setState(Number(e.checked))\r\n                                                }}/>    \r\n\r\n                        <SettingsItemWithButton text={\"Clear All Recent List\"}\r\n                                                buttonClassName=\"del-color m-icon\"\r\n                                                onClick={() => {\r\n                                                    this.CMRef.current.show({\r\n                                                        title:  \"Clear All Recents?\",\r\n                                                        buttons: [\r\n                                                            {\r\n                                                                text: \"YES\",\r\n                                                                iconName: \"delete\",\r\n                                                                onClick: (e) => {\r\n                                                                    // e.preventDefault();\r\n                                                                    tbl_recents.clearAll()\r\n                                                                    .then(() => {\r\n                                                                        customEvents.emit('dl.progress', {\r\n                                                                            message: \"Deleted All Recents Successfully\",\r\n                                                                            mode: \"success\"\r\n                                                                        });\r\n                                                                    });\r\n                                                                },\r\n                        \r\n                                                            },\r\n                                                            {\r\n                                                                text: \"NO\",\r\n                                                                iconName: \"close\",\r\n                                                                onClick: (e) => {\r\n                                                                    console.log(\"NO\");\r\n                                                                }\r\n                                                            }\r\n                                                        ]\r\n                                                    })\r\n                                                }}>\r\n                            &#xe872;\r\n                        </SettingsItemWithButton>\r\n\r\n\r\n                        <SettingsItemWithButton text={\r\n                                                    <Fragment>\r\n                                                        Clear All Caches\r\n                                                        <br />\r\n                                                        <span>(Downloaded stories and chapters are included)</span>\r\n                                                    </Fragment>\r\n                                                }\r\n                                                buttonClassName=\"del-color m-icon\"\r\n                                                onClick={() => {\r\n                                                    this.CMRef.current.show({\r\n                                                        title:  <Fragment>\r\n                                                                    Clear All Cache?\r\n                                                                    <br/>\r\n                                                                    <span style={{fontSize: 14, fontWeight: 100}}>\r\n                                                                        (includes stories and chapters you downloaded)\r\n                                                                    </span>\r\n                                                                </Fragment>,\r\n                                                        buttons: [\r\n                                                            {\r\n                                                                text: \"YES\",\r\n                                                                iconName: \"delete\",\r\n                                                                onClick: (e) => {\r\n                                                                    // e.preventDefault();\r\n                                                                    tbl_img_cache.clearAll()\r\n                                                                    .then(() => {\r\n                                                                        customEvents.emit('dl.progress', {\r\n                                                                            message: \"Deleted All Caches Successfully\",\r\n                                                                            mode: \"success\"\r\n                                                                        });\r\n                                                                    });\r\n                                                                },\r\n                        \r\n                                                            },\r\n                                                            {\r\n                                                                text: \"NO\",\r\n                                                                iconName: \"close\",\r\n                                                                onClick: (e) => {\r\n                                                                    console.log(\"NO\");\r\n                                                                }\r\n                                                            }\r\n                                                        ]\r\n                                                    })\r\n                                                }}>\r\n                            &#xe872;\r\n                        </SettingsItemWithButton>\r\n                        <Spacer />\r\n                    </div>\r\n\r\n                </div>\r\n                <ConfirmModal ref={this.CMRef}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nconst Spacer = () => {\r\n    return(\r\n        <div style={{height: 32}}></div>\r\n    );\r\n}\r\n\r\nconst SettingsItemWithToggle = React.forwardRef((props, ref) => {\r\n    return(\r\n        <div className=\"siwt-con\">\r\n            <div className=\"siwt-lbl\">\r\n                {props.text}\r\n            </div>\r\n            <div>\r\n                <Toggle ref={ref} onChange={props.onChange}/>\r\n            </div>\r\n        </div>\r\n    );\r\n})\r\n\r\nconst SettingsItemWithButton = React.forwardRef((props, ref) => {\r\n    return(\r\n        <div className=\"siwt-con\">\r\n            <div className=\"siwt-lbl\">\r\n                {props.text}\r\n            </div>\r\n            <div>\r\n                <button ref={ref}\r\n                        className={\r\n                            \"siwt-btn\" + \r\n                            (   \r\n                                props.buttonClassName ? \r\n                                ` ${props.buttonClassName}` \r\n                                : \r\n                                \"\"\r\n                            )\r\n                        } \r\n                        onClick={props.onClick}>\r\n                    {props.children}\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n})\r\n\r\n\r\n\r\n\r\n\r\nexport default SettingsPage;\r\n\r\n\r\n","import React, {useEffect, createRef} from 'react';\n// import logo from './logo.svg';\nimport './App.css';\n// import ChapterPage from './pages/ChapterPage/ChapterPage';\n// import StoryPage from './pages/StoryPage/StoryPage';\n// import HomePage from './pages/HomePage/HomePage';\nimport RoutePage from './components/RoutePage/RoutePage';\nimport HomePage2 from './pages/HomePage2/HomePage2';\nimport StoryPage2 from './pages/StoryPage2/StoryPage2';\nimport ChapterPage2 from './pages/ChapterPage2/ChapterPage2';\nimport AddPage from './pages/AddPage/AddPage';\nimport StoryInfoPage from './pages/StoryInfoPage/StoryInfoPage';\nimport AboutPage from './pages/AboutPage/AboutPage';\nimport RecentPage from './pages/RecentPage/RecentPage';\nimport Snackbar from './components/Snackbar/Snackbar';\nimport customEvents from './models/customEvents';\nimport DownloadModal from './components/DownloadModal/DownloadModal';\nimport SettingsPage from './pages/SettingsPage/SettingsPage';\n\n// import SliverContainer from './components/SliverContainer/SliverContainer';\n// import ScrollView from './components/ScrollView/ScrollView';\n\n// import { getChapterImages, createImageDom } from './models/story-model';\n\n\nfunction App() {\n\n  let sbRef = createRef();\n\n  const dlProgress = ({ mode, message }) => {\n    sbRef.current.show({\n      message: message,\n      mode: mode\n  });\n  };\n\n  const onOnline = () => {\n    sbRef.current.show({\n        message: \"You are online.\",\n        mode: \"success\"\n    });\n  }\n\n  const onOffline = () => {\n    sbRef.current.show({\n      message: \"You are offline.\",\n      mode: \"error\"\n  });\n  }\n\n  useEffect(() => {\n\n    if(window.navigator.onLine){\n      onOnline();\n    }else{\n      onOffline();\n    }\n    \n    \n    window.addEventListener(\"online\", onOnline);\n    window.addEventListener(\"offline\", onOffline);\n    customEvents.on(\"dl.progress\", dlProgress);\n\n\n\n    return () => {\n      window.removeEventListener(\"online\", onOnline);\n      window.removeEventListener(\"offline\", onOffline);\n      customEvents.off(\"dl.progress\", dlProgress);\n    }\n  }, []);\n\n  return (\n    <div className=\"App\">\n      {/* <HomePage/> */}\n      {/* <SliverContainer>\n        <ScrollView>\n          <div style={{height: 1000}}></div>\n        </ScrollView>\n      </SliverContainer> */}\n      {/* <h1>test</h1> */}\n      {/* <RoutePage path=\"/\">\n        <HomePage/>\n      </RoutePage> */}\n\n      <RoutePage path=\"/\">\n        <HomePage2/>\n      </RoutePage>\n      <RoutePage path=\"/android_asset/www/index.html\">\n        <HomePage2/>\n      </RoutePage>\n      <RoutePage path=\"/add-story\">\n        <AddPage/>\n      </RoutePage>\n      <RoutePage path=\"/settings\">\n        <SettingsPage/>\n      </RoutePage>\n      <RoutePage path=\"/story\">\n        <StoryPage2/>\n      </RoutePage>\n      <RoutePage path=\"/story-info\">\n        <StoryInfoPage/>\n      </RoutePage>\n      <RoutePage path=\"/recents\">\n        <RecentPage />\n      </RoutePage>\n      <RoutePage path=\"/chapter\">\n        <ChapterPage2/>\n      </RoutePage>\n      {/* <RoutePage path=\"/settings\">\n        <h1>Settings</h1>\n      </RoutePage> */}\n      <RoutePage path=\"/about\">\n        <AboutPage />\n      </RoutePage>\n\n      \n\n\n      <Snackbar ref={sbRef}/>\n      <DownloadModal />\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import pubsub from './customEvents';\r\n\r\nfunction initWindowListener(){\r\n    window.addEventListener('popstate', (event) => {\r\n        pubsub.emit('url.changed', event);\r\n    });\r\n}\r\n\r\n\r\nexport default initWindowListener;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport initWinListener from './models/windowEvents';\nimport database from './database/db';\nimport db_recents from './database/db-recents';\nimport db_img_cache from './database/db-image-cache';\nimport tbl_stories from './models/tbl_stories';\nimport tbl_img_cache from './models/tbl_img_cache';\nimport AUTO_DELETE_CACHE from './models/auto-delete-cache';\n// import customEvents from './models/customEvents';\n\nlet theme = window.localStorage.getItem(\"theme\");\nif(theme === 'dark'){\n  document.body.setAttribute(\"class\", \"dark\");\n}else{\n  document.body.setAttribute(\"class\", \"light\");\n}\n\ninitWinListener();\nwindow.base_url = window.location.pathname.replace(/\\/[^/]+\\/?$/, '/');\nconsole.log(\"Base: \", window.base_url);\nwindow._startingURLPath = window.location.pathname;\n// window.history.pushState({}, \"\", '/');\n// customEvents.emit(\"pushstate\", null);\n\n\nfunction initTables(){\n  tbl_stories.initTable();\n  \n\n  // tbl_stories.getStories({\n  //   search: \"\",\n  //   limit: 20,\n  //   page: 1\n  // })\n  // .then((result) => {\n  //   console.log(result);\n  // })\n  // .catch((err) => {\n  //   console.log(\"sql error\", err);\n  // });\n  // tbl_stories.addStory({\n  //   title: \"david\",\n  //   url: \"url\",\n  //   cover: \"cover\",\n  //   description: \"description\",\n  //   info_json: \"info_json\",\n  // })\n  // .then((results) => {\n  //   console.log(results);\n  // });\n}\n\nwindow.addEventListener('unload', function(){\n  \n  if(Boolean(AUTO_DELETE_CACHE.getState())) tbl_img_cache.clearAll();\n  // alert(\"auto clearing caches\");\n});\n\nconst startApp = (msg) => {\n  database.init(initTables);\n  db_recents.init();\n  db_img_cache.init();\n  // if(msg) alert(msg);\n  ReactDOM.render(\n    <React.StrictMode>\n      <App />\n    </React.StrictMode>,\n    document.getElementById('root')\n  );\n}\n\nif(window.cordova){\n  document.addEventListener('deviceready', () => {\n    setTimeout(() => {\n      document.getElementById(\"splash\").style.opacity = 0;\n      setTimeout(() => {\n        document.getElementById(\"splash\").remove();\n        startApp();\n      }, 300);\n    }, 2000);\n  }, false);\n}else{\n  setTimeout(() => {\n    document.getElementById(\"splash\").style.opacity = 0;\n    setTimeout(() => {\n      document.getElementById(\"splash\").remove();\n      startApp();\n    }, 300);\n  }, 2000);\n}\n\n// If you want your app to work offline and load faster, you can change\n  // unregister() to register() below. Note this comes with some pitfalls.\n  // Learn more about service workers: https://bit.ly/CRA-PWA\n  // serviceWorker.unregister();\n  serviceWorker.register();\n  // window.history.pushState({}, \"\", '/');\n  // customEvents.emit(\"pushstate\", null);\n\n\n\n"],"sourceRoot":""}